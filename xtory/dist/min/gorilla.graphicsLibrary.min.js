this.gorilla=this.gorilla||{},function(e){"use strict";function t(){}function n(){}function r(e,t,n,i,o,a,c,s,u,f,l,h,E,d,_,S){this.db=new Float32Array(r.ELEMENT_COUNT),this.db[0]=e,this.db[4]=t,this.db[8]=n,this.db[12]=i,this.db[1]=o,this.db[5]=a,this.db[9]=c,this.db[13]=s,this.db[2]=u,this.db[6]=f,this.db[10]=l,this.db[14]=h,this.db[3]=E,this.db[7]=d,this.db[11]=_,this.db[15]=S}function i(e,t,n,r){this.x=e,this.y=t,this.z=n,this.w=r}function o(e,t){this.x=e,this.y=t}function a(e,t,n,r){this.x=e,this.y=t,this.z=n,this.w=r}function c(e,t,n){this.x=e,this.y=t,this.z=n}function s(){}function u(){}function f(e,n,i,o,a,s){function l(){g!==!1&&(_=r.createViewMatrix(n,i,o),y=!0,g=!1)}function h(){var e=d.clientWidth/d.clientHeight;(p!==!1||t.areEqual(e,A)!==!0)&&(A=e,S=r.createProjectionMatrix(f.FIELD_OF_VIEW_Y,A,a,s),y=!0,p=!1)}var E,d,_,S,O,T,g,p,y,A;try{E=this,void 0===n&&(n=new c(0,0,1e4)),void 0===i&&(i=f.DEFAULT_FACING_DIRECTION),void 0===o&&(o=f.DEFAULT_UP_DIRECTION),void 0===a&&(a=f.DEFAULT_DISTANCE_TO_NEAR_PLANE),void 0===s&&(s=f.DEFAULT_DISTANCE_TO_FAR_PLANE),a<f.MIN_DISTANCE_TO_NEAR_PLANE&&(a=f.MIN_DISTANCE_TO_NEAR_PLANE),f.MAX_DISTANCE_TO_FAR_PLANE<s&&(s=f.MAX_DISTANCE_TO_FAR_PLANE),d=e.canvas,T=new u,g=!0,p=!0,y=!0}catch(P){throw console.log("gorilla.graphicsLibrary.Camera: ",P),P}Object.defineProperty(E,"renderer",{get:function(){return e}}),Object.defineProperty(E,"position",{get:function(){return n},set:function(e){n=e}}),Object.defineProperty(E,"facingDirection",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(E,"upDirection",{get:function(){return o},set:function(e){o=e}}),Object.defineProperty(E,"distanceToNearPlane",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(E,"distanceToFarPlane",{get:function(){return s},set:function(e){s=e}}),Object.defineProperty(E,"viewFrustum",{get:function(){return T}}),this.invalidateViewMatrix=function(){g=!0},this.invalidateProjectionMatrix=function(){p=!0},this.getProjectionMatrix=function(e){h(),e.db=S.db.slice()},this.getTransform=function(e){l(),h(),y===!0&&(O=r.multiplyMatrices(S,_)),e.db=O.db.slice(),y===!0&&(y=!1)}}function l(e){var t;try{t=this}catch(n){throw console.log("gorilla.graphicsLibrary.CameraState: ",n),n}Object.defineProperty(t,"camera",{get:function(){return e}})}function h(){}function E(e){l.call(this,e)}function d(){}function _(){function e(){return(new Date).getTime()}var t,n,r;try{t=this,n=0,r=0}catch(i){throw console.log("gorilla.graphicsLibrary.Stopwatch: "+i),i}Object.defineProperty(t,"isRunning",{get:function(){return 0!==n?!0:!1}}),Object.defineProperty(t,"elapsedMilliseconds",{get:function(){return r+(t.isRunning===!0)?e()-n:0}}),this.start=function(){n=t.isRunning===!0?n:e()},this.stop=function(){r=t.isRunning===!0?r+(e()-n):r,n=0},this.reset=function(){n=0,r=0}}function S(e,n,r){var i,o,a,c;try{switch(i=this,e){case d.EASE_IN:o=-t.PI_OVER_TWO,a=0;break;case d.EASE_OUT:o=0,a=t.PI_OVER_TWO;break;case d.EASE_IN_OUT:o=-t.PI_OVER_TWO,a=t.PI_OVER_TWO;break;default:throw"A not-supported exception raised."}c=new _}catch(s){throw console.log("gorilla.graphicsLibrary.SineEase: "+s),s}Object.defineProperty(i,"easeMode",{get:function(){return e}}),Object.defineProperty(i,"duration",{get:function(){return n}}),Object.defineProperty(i,"sineOfStartAngle",{get:function(){return Math.sin(o)}}),Object.defineProperty(i,"sineOfCurrentAngle",{get:function(){var e=a-o;return Math.sin(o+e*i.ratioOfCurrentToTotalTimeOffset)}}),Object.defineProperty(i,"sineOfFinishAngle",{get:function(){return Math.sin(a)}}),Object.defineProperty(i,"ratioOfCurrentToTotalTimeOffset",{get:function(){if(r===!1)return i.isFinished===!0?1:c.elapsedMilliseconds/n;var e=c.elapsedMilliseconds%n;return e/n}}),Object.defineProperty(i,"ratioOfCurrentToTotalSineOfAngleOffset",{get:function(){var e=i.sineOfCurrentAngle-i.sineOfStartAngle,t=i.sineOfFinishAngle-i.sineOfStartAngle;return e/t}}),Object.defineProperty(i,"isRunning",{get:function(){return c.isRunning}}),Object.defineProperty(i,"isFinished",{get:function(){if(r===!0)return!1;var e=n<=c.elapsedMilliseconds?!0:!1;return e===!0&&c.stop(),e}}),this.start=function(){c.isRunning!==!0&&c.start()},this.pause=function(){c.isRunning!==!1&&c.stop()},this.resume=function(){c.isRunning!==!0&&c.start()},this.stop=function(){c.reset()}}function O(e,t,n,r,i){l.call(this,e);var o,a,c;try{o=this,c=0,a=new S(d.EASE_OUT,n,!1),a.start()}catch(s){throw console.log("gorilla.graphicsLibrary.CameraStateZooming: ",s),s}Object.defineProperty(o,"sineEase",{get:function(){return a}}),Object.defineProperty(o,"distance",{get:function(){return t}}),Object.defineProperty(o,"zoomedDistance",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(o,"updatingCallback",{get:function(){return r}}),Object.defineProperty(o,"finishingCallback",{get:function(){return i}})}function T(e,t,n,r,i,o){f.call(this,e,t,n,r,i,o);var a,c,s;try{a=this,c=new E(a),s=T.DEFAULT_ZOOM_DURATION}catch(u){throw console.log("gorilla.graphicsLibrary.SmoothCamera: ",u),u}Object.defineProperty(a,"state",{get:function(){return c},set:function(e){e!==c&&(c=e)}}),Object.defineProperty(a,"zoomingDuration",{get:function(){return s},set:function(e){s=e}}),this.update=function(){c.update()},this.zoom=function(e){c instanceof O!=!0&&(a.state=new O(a,e,s))},this.baseZoom=function(e){f.prototype.zoom.call(a,e)}}function g(){}function p(){}function y(e,t,n,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r}function A(){}function P(){}function w(e){var t,n,r;try{t=this,n=e.loader.renderer.gl,r=n.createBuffer()}catch(i){throw console.log("gorilla.graphicsLibrary.IndexBuffer: "+i),i}Object.defineProperty(t,"bufferLoader",{get:function(){return e}}),Object.defineProperty(t,"webGLBuffer",{get:function(){return r}})}function m(){}function R(){}function b(e,t,n,r,i,o,a){b.createVertexPositions(o,t,n,r),b.createVertexColors(a,i)}function v(){this.clearsDbAfterDrawing=!0}function x(){}function L(e,t){function n(){h={position:e.loader.createVertexBuffer(),color:e.loader.createVertexBuffer()},O={position:[],position2:void 0,color:[],color2:void 0}}function r(){E=e.loader.createIndexBuffer(),T=void 0}function i(){d=e.loader.setUpProgram(L.VERTEX_SHADER_SOURCE,L.FRAGMENT_SHADER_SOURCE),_={vertexPosition:e.getAttributeLocation(d,"vertexPosition"),vertexColor:e.getAttributeLocation(d,"vertexColor")},S={shared:{canvasClientSize:e.getUniformLocation(d,"canvasClientSize")}},g=new Float32Array([void 0,void 0])}function o(){var e=b.POSITION_SIZE*b.VERTEX_COUNT,t=e*l.length;(void 0===O.position2||O.position2.length!==t)&&(O.position2=new Float32Array(t));for(var n=0;n<l.length;n++)for(var r=O.position[n],i=0;e>i;i++)O.position2[e*n+i]=r[i];h.position.loadData(O.position2,b.POSITION_SIZE),e=b.COLOR_SIZE*b.VERTEX_COUNT,t=e*l.length,(void 0===O.color2||O.color2.length!==t)&&(O.color2=new Float32Array(t));for(var n=0;n<l.length;n++)for(var r=O.color[n],i=0;e>i;i++)O.color2[e*n+i]=r[i];h.color.loadData(O.color2,b.COLOR_SIZE)}function a(){var e=b.INDEX_COUNT,t=e*l.length;(void 0===T||T.length!==t)&&(T=new Uint16Array(t));for(var n=0;n<l.length;n++)for(var r=b.VERTEX_COUNT*n,i=0;e>i;i++)T[e*n+i]=r+b.INDICES[i];E.loadData(T)}function c(){e.program=d,e.setAttribute(_.vertexPosition,h.position),e.setAttribute(_.vertexColor,h.color),(e.canvas.clientWidth!==g[0]||e.canvas.clientHeight!==g[1])&&(g[0]=e.canvas.clientWidth,g[1]=e.canvas.clientHeight,e.setVector2DUniform(S.shared.canvasClientSize,g)),e.drawIndexedPrimitives(E,x.TRIANGLE_LIST,b.INDEX_COUNT*l.length)}function s(){l=[],t.clearsDbAfterDrawing===!1&&(y=!0)}var u,f,l,h,E,d,_,S,O,T,g,p,y;try{u=this,void 0===t&&(t=new v),f=e.gl,l=[],n(),r(),i(),p=!1,y=!0}catch(A){throw console.log("gorilla.graphicsLibrary.LineSegment2DBatch: "+A),A}Object.defineProperty(u,"renderer",{get:function(){return e}}),Object.defineProperty(u,"isBegun",{get:function(){return p}}),this.begin=function(){p=!0},this.drawLineSegment=function(e,n,r,i){if(t.clearsDbAfterDrawing!==!1||y!==!1){if(p===!1)throw"A begin-not-called-before-drawing exception raised.";var o,a,c=l.length;O.position.length-1<c?(o=[],O.position.push(o)):o=O.position[c],O.color.length-1<c?(a=[],O.color.push(a)):a=O.color[c];var s=new b(u,e,n,r,i,o,a);l.push(s)}},this.end=function(){if(p===!1)throw"A begin-not-called-before-drawing exception raised.";0<l.length&&((t.clearsDbAfterDrawing===!0||t.clearsDbAfterDrawing===!1&&y===!0)&&(o(),a(),t.clearsDbAfterDrawing===!1&&(y=!1)),c(),t.clearsDbAfterDrawing===!0&&s()),p=!1}}function I(){}function D(){}function N(){}function C(){}function U(){}function F(e){var t,n,r;try{t=this,n=e.loader.renderer.gl,r=n.createProgram()}catch(i){throw console.log("gorilla.graphicsLibrary.Program: "+i),i}Object.defineProperty(t,"programLoader",{get:function(){return e}}),Object.defineProperty(t,"webGLProgram",{get:function(){return r}})}function z(e,t,n,r){this.left=e,this.bottom=t,this.width=n,this.height=r}function M(e){var t,n,r,i;try{t=this,n=e.loader.renderer.gl,r=n.createBuffer()}catch(o){throw console.log("gorilla.graphicsLibrary.VertexBuffer: "+o),o}Object.defineProperty(t,"bufferLoader",{get:function(){return e}}),Object.defineProperty(t,"webGLBuffer",{get:function(){return r}}),Object.defineProperty(t,"size",{get:function(){return i},set:function(e){i=e}})}function B(e){var t,n;try{t=this,n=e.renderer.gl}catch(r){throw console.log("gorilla.graphicsLibrary.BufferLoader: "+r),r}Object.defineProperty(t,"loader",{get:function(){return e}}),this.createVertexBuffer=function(){return new M(t)},this.createIndexBuffer=function(){return new w(t)}}function H(){}function V(e){function t(e,t){var n;if(e===H.VERTEX_SHADER)n=o.createShader(o.VERTEX_SHADER);else{if(e!==H.FRAGMENT_SHADER)return null;n=o.createShader(o.FRAGMENT_SHADER)}if(o.shaderSource(n,t),o.compileShader(n),o.getShaderParameter(n,o.COMPILE_STATUS)===!1){var r=o.getShaderInfoLog(n);throw o.deleteShader(n),"An error occurred compiling the shaders: "+r}return n}function n(e){var t=document.getElementById(e);if(null===t)return null;for(var n="",r=t.firstChild;null!==r;)r.nodeType===Node.TEXT_NODE&&(n+=r.textContent),r=r.nextSibling;var i;if("x-shader/x-vertex"===t.type)i=o.createShader(o.VERTEX_SHADER);else{if("x-shader/x-fragment"!==t.type)return null;i=o.createShader(o.FRAGMENT_SHADER)}if(o.shaderSource(i,n),o.compileShader(i),o.getShaderParameter(i,o.COMPILE_STATUS)===!1){var a=o.getShaderInfoLog(i);throw o.deleteShader(i),"An error occurred compiling the shaders: "+a}return i}function r(e,t){var n=new F(i),r=n.webGLProgram;if(o.attachShader(r,e),o.attachShader(r,t),o.linkProgram(r),o.getProgramParameter(r,o.LINK_STATUS)===!1){var a=o.getProgramInfoLog(r);throw o.deleteProgram(r),"Unable to initialize the (shader) program: "+a}return n}var i,o;try{i=this,o=e.renderer.gl}catch(a){throw console.log("gorilla.graphicsLibrary.ProgramLoader: "+a),a}Object.defineProperty(i,"loader",{get:function(){return e}}),this.setUpProgram=function(e,n){var i=t(H.VERTEX_SHADER,e),o=t(H.FRAGMENT_SHADER,n);return r(i,o)},this.setUpProgramFromHtmlElements=function(e,t){var i=n(H.VERTEX_SHADER,e),o=n(H.FRAGMENT_SHADER,t);return r(i,o)}}function j(e){var t,n,r,i,o;try{t=this,n=e.loader.renderer.gl}catch(a){throw console.log("gorilla.graphicsLibrary.Texture2D: "+a),a}Object.defineProperty(t,"loader",{get:function(){return _loader}}),Object.defineProperty(t,"width",{get:function(){return r},set:function(e){r=e}}),Object.defineProperty(t,"height",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(t,"webGLTexture",{get:function(){return o},set:function(e){o=e}})}function G(e){function n(){return o.createTexture()}function r(e,n){o.bindTexture(o.TEXTURE_2D,n),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,e),t.isPowerOfTwo(e.width)===!0&&t.isPowerOfTwo(e.height)===!0?(o.generateMipmap(o.TEXTURE_2D),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR_MIPMAP_LINEAR)):o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.bindTexture(o.TEXTURE_2D,null)}var i,o,a;try{i=this,o=e.renderer.gl,a={}}catch(c){throw console.log("gorilla.graphicsLibrary.TextureLoader: "+c),c}Object.defineProperty(i,"loader",{get:function(){return e}}),this.loadTexture2D=function(e){if(void 0===e)throw"An argument-undefined exception raised.";var t=a[e];if(void 0!==t)return t;var t=new j(i);a[e]=t;var o=new Image;return o.addEventListener("load",function(){try{var e=n();r(o,e),t.width=o.width,t.height=o.height,t.webGLTexture=e}catch(i){throw console.log("gorilla.graphicsLibrary.TextureLoader.loadTexture2D(): "+i),i}}),o.addEventListener("error",function(){console.log("g2l.TextureLoader.loadTexture2D() could not load image: "+e)}),o.src=e,t}}function X(e){function t(){r=e.gl,Object.defineProperty(n,"renderer",{get:function(){return e}})}var n,r,i,o,a;try{n=this,t(),i=new B(n),o=new G(n),a=new V(n)}catch(c){throw console.log("gorilla.graphicsLibrary.Loader: "+c),c}this.createVertexBuffer=function(){return i.createVertexBuffer()},this.createIndexBuffer=function(){return i.createIndexBuffer()},this.setUpProgram=function(e,t){return a.setUpProgram(e,t)},this.setUpProgramFromHtmlElements=function(e,t){return a.setUpProgram(e,t)},this.loadTexture2D=function(e){return o.loadTexture2D(e)}}function W(){this.canvasUsesDefaultStyle=!0}function k(e,t){function n(){if(void 0===e){if(void 0===document.body)throw"document.body === undefined";e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=k.CANVAS_WIDTH,e.height=k.CANVAS_HEIGHT}}function r(){if(t.canvasUsesDefaultStyle!==!1){var n=e.style;n.width="100%",n.height="100%",n.display="block"}}function i(){if(h=e.getContext("webgl"),null===h){if(h=e.getContext("experimental-webgl"),null===h)throw alert("Unable to initialize WebGL. Your browser may not support it."),"A WebGL-not-supported exception raised.";console.log("Your browser supports WebGL. \n\nHowever, it indicates the support is experimental. That is, not all WebGL functionality may be supported, and content may not run as expected.")}h.depthRange(P.NEAR_CLIP_PLANE,P.FAR_CLIP_PLANE),_=k.DEFAULT_CLEAR_COLOR,S=k.DEFAULT_CLEAR_DEPTH,O=k.DEFAULT_CLEAR_STENCIL,h.clearColor(_.r,_.g,_.b,_.a),h.clearDepth(S),h.clearStencil(O),o(),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!0)}function o(){a(),c(),s(),u()}function a(){h.disable(h.BLEND)}function c(){h.enable(h.DEPTH_TEST),h.depthFunc(h.LEQUAL),h.disable(h.STENCIL_TEST)}function s(){}function u(){h.enable(h.CULL_FACE),h.cullFace(h.BACK)}function f(){void 0===window.requestAnimationFrame&&(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}())}var l,h,E,d,_,S,O;try{l=this,n(),void 0===t&&(t=new W),r(),i(),f()}catch(T){throw console.log("gorilla.graphicsLibrary.Renderer: "+T),T}Object.defineProperty(l,"canvas",{get:function(){return e}}),Object.defineProperty(l,"gl",{get:function(){return h}}),Object.defineProperty(l,"loader",{get:function(){return void 0===E&&(E=new X(l)),E}}),Object.defineProperty(l,"program",{get:function(){return d},set:function(e){e!==d&&(d=e,h.useProgram(d.webGLProgram))}}),this.run=function(e,t){function n(){requestAnimationFrame(n),void 0!==e&&e(),void 0!==t&&t()}n()},this.clear=function(e,t,n,r){void 0!==t&&y.areEqual(t,_)===!1&&(_=t,h.clearColor(_.r,_.g,_.b,_.a)),void 0!==n&&n!==S&&(S=n,h.clearDepth(S)),void 0!==r&&r!==O&&(O=r,h.clearStencil(O)),void 0===e&&(e=k.DEFAULT_CLEAR_OPTIONS),h.clear(e)},this.drawPrimitives=function(e,t,n){h.drawArrays(e,t,n)},this.drawIndexedPrimitives=function(e,t,n,r){void 0===r&&(r=0),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,e.webGLBuffer),h.drawElements(t,n,h.UNSIGNED_SHORT,r)},this.getAttributeLocation=function(e,t){return h.getAttribLocation(e.webGLProgram,t)},this.getUniformLocation=function(e,t){return h.getUniformLocation(e.webGLProgram,t)},this.setAttribute=function(e,t){h.bindBuffer(h.ARRAY_BUFFER,t.webGLBuffer),h.vertexAttribPointer(e,t.size,h.FLOAT,!1,0,0),h.enableVertexAttribArray(e)},this.setSampler=function(e,t,n){void 0===n&&(n=k.DEFAULT_TEXTURE_UNIT),h.activeTexture(h.TEXTURE0+n),h.bindTexture(h.TEXTURE_2D,t.webGLTexture),h.uniform1i(e,n)},this.setVector2DUniform=function(e,t){h.uniform2fv(e,t)},this.setVector3DUniform=function(e,t){h.uniform3fv(e,t)},this.setVector4DUniform=function(e,t){h.uniform4fv(e,t)},this.setMatrix4x4Uniform=function(e,t){h.uniformMatrix4fv(e,!1,t)}}function Y(){}function q(e,t){this.width=e,this.height=t}function Z(e,t,n){this.width=e,this.height=t,this.depth=n}function K(){}function J(e,t,n,r,i,o,a,c){this.texture=t,J.createVertexPositions(a,n,r),void 0===i||z.areEqual(i,J.DEFAULT_SOURCE_RECT)===!0?this.flushingOptions=K.VERTEX_POSITIONS:(this.flushingOptions=K.VERTEX_POSITIONS|K.VERTEX_TEXTURE_COORDINATES,J.createVertexTextureCoordinates(c,i)),void 0===o?this.color=J.DEFAULT_COLOR:this.color=new Float32Array(o.toArray())}function Q(){this.clearsDbAfterDrawing=!0}function $(e,t){function n(){u={position:[],textureCoordinates:[]},f=e.loader.createVertexBuffer(),l={position:[],textureCoordinates:[]},f.loadData(J.DEFAULT_VERTEX_TEXTURE_COORDINATES,J.TEXTURE_COORDINATE_SIZE)}function r(){h=e.loader.setUpProgram($.VERTEX_SHADER_SOURCE,$.FRAGMENT_SHADER_SOURCE),E={vertexPosition:e.getAttributeLocation(h,"vertexPosition"),vertexTextureCoordinates:e.getAttributeLocation(h,"vertexTextureCoordinates")},d={shared:{canvasClientSize:e.getUniformLocation(h,"canvasClientSize")},unique:{color:e.getUniformLocation(h,"color"),sampler:e.getUniformLocation(h,"sampler")}},_=new Float32Array([void 0,void 0])}function i(){e.program=h,(e.canvas.clientWidth!==_[0]||e.canvas.clientHeight!==_[1])&&(_[0]=e.canvas.clientWidth,_[1]=e.canvas.clientHeight,e.setVector2DUniform(d.shared.canvasClientSize,_));for(var t,n,r,i=null,o=0;o<s.length;o++){var a=s[o];i=u.position[o],e.setAttribute(E.vertexPosition,i);var c=(a.flushingOptions&K.VERTEX_TEXTURE_COORDINATES)===K.VERTEX_TEXTURE_COORDINATES?!1:!0;i=c===!1?u.textureCoordinates[o]:f,(void 0===t||a.color[0]!=t[0]||a.color[1]!=t[1]||a.color[2]!=t[2]||a.color[3]!=t[3])&&(e.setVector4DUniform(d.unique.color,a.color),t=a.color),c!==n&&(e.setAttribute(E.vertexTextureCoordinates,i),n=c),r!==a.texture&&(e.setSampler(d.unique.sampler,a.texture),r=a.texture),e.drawPrimitives(x.TRIANGLE_STRIP,0,4)}}function o(){s=[],t.clearsDbAfterDrawing===!1&&(O=!0)}var a,c,s,u,f,l,h,E,d,_,S,O;try{a=this,void 0===t&&(t=new Q),c=e.gl,s=[],n(),r(),S=!1,O=!0}catch(T){throw console.log("gorilla.graphicsLibrary.SpriteBatch: "+T),T}Object.defineProperty(a,"renderer",{get:function(){return e}}),Object.defineProperty(a,"isBegun",{get:function(){return S}}),this.begin=function(){if(S=!0,l.position.length!=u.position.length||l.textureCoordinates.length!=u.textureCoordinates.length)throw"An invalid-length exception raised."},this.drawSprite=function(n,r,i,o,c,f){if(t.clearsDbAfterDrawing!==!1||O!==!1){if(S===!1)throw"A begin-not-called-before-drawing exception raised.";if(P.isDepthOutOfRange(i.z)!==!0){var h,E,d,_,T=s.length;l.position.length-1<T?(h=new Float32Array(J.POSITION_SIZE*J.VERTEX_COUNT),l.position.push(h),d=e.loader.createVertexBuffer(),u.position.push(d)):(h=l.position[T],d=u.position[T]),l.textureCoordinates.length-1<T?(E=new Float32Array(J.TEXTURE_COORDINATE_SIZE*J.VERTEX_COUNT),l.textureCoordinates.push(E),_=e.loader.createVertexBuffer(),u.textureCoordinates.push(_)):(E=l.textureCoordinates[T],_=u.textureCoordinates[T]);var g=new J(a,n,i,o,c,f,h,E);d.loadData(h,J.POSITION_SIZE),(g.flushingOptions&K.VERTEX_TEXTURE_COORDINATES)===K.VERTEX_TEXTURE_COORDINATES&&_.loadData(E,J.TEXTURE_COORDINATE_SIZE),s.push(g)}}},this.end=function(){if(S===!1)throw"A begin-not-called-before-drawing exception raised.";0<s.length&&((t.clearsDbAfterDrawing===!0||t.clearsDbAfterDrawing===!1&&O===!0)&&t.clearsDbAfterDrawing===!1&&(O=!1),i(),t.clearsDbAfterDrawing===!0&&o()),S=!1}}function ee(){}function te(){}function ne(){}function re(){}function ie(){}function oe(){}function ae(e,t){this.isMoved=e,this.isResized=t}function ce(){}function se(e){var t;try{t=this}catch(n){throw console.log("gorilla.graphicsLibrary.World2DState: ",n),n}Object.defineProperty(t,"world",{get:function(){return e}})}function ue(e){se.call(this,e)}function fe(e,t,n,r,i,o){se.call(this,e);var a,c,s;try{a=this,Object.defineProperty(a,"screenPosition",{get:function(){return t}}),s=e.size,Object.defineProperty(a,"oldSize",{get:function(){return s}}),Object.defineProperty(a,"newSize",{get:function(){return n}}),Object.defineProperty(a,"updatingCallback",{get:function(){return i}}),Object.defineProperty(a,"finishingCallback",{get:function(){return o}}),c=new S(d.EASE_OUT,r,!1),c.start(),Object.defineProperty(a,"sineEase",{get:function(){return c}})}catch(u){throw console.log("gorilla.graphicsLibrary.World2DStateZoomingAtScreenPosition: ",u),u}}function le(){this.backgroundColor=A.DEFAULT_BACKGROUND_COLOR,this.zoomDuration=250,this.zoomScaleFactor=2,this.hitLineSegmentScreenThicknessTimes=5,this.viewMargin=125}function he(e,n){function r(){var t=new q(e.canvas.clientWidth,e.canvas.clientHeight);if(q.areEqual(t,y)!==!0){y=t;var n=1/d;E=q.multiplySizeByScalar(t,n),S=!0,c(new ae(!1,!0))}}function i(){null!==_&&a(),_=[];for(var e=ce.NEAREST_ITEMS-ce.FARTHEST_ITEMS+1,t=0;e>t;t++)_.push([])}function a(){if(null!=_){for(var e=0;e<_.length;e++){for(var t=_[e],n=0;n<t.length;n++){var r=t[n];null!==r&&r.dispose()}_[e]=null}_=null}}function c(e){for(var t=0;t<_.length;t++)for(var n=_[t],r=0;r<n.length;r++){var i=n[r];i.invalidateBounds()}}var s,u,f,l,h,E,d,_,S,O,T,g,y;try{s=this,void 0===n&&(n=new le),u=new ue(s),f=new $(e),l=new L(e),h=new o(0,0),d=1,i(),y=new q(0,0),r(),S=!1,O=0,T=0,g=null}catch(A){throw console.log("gorilla.graphicsLibrary.World2D: "+A),A}Object.defineProperty(s,"renderer",{get:function(){return e}}),Object.defineProperty(s,"style",{get:function(){return n},set:function(e){le.areEqual(e,n)!==!0&&(n=e)}}),Object.defineProperty(s,"state",{get:function(){return u},set:function(e){e!==u&&(u=e)}}),Object.defineProperty(s,"spriteBatch",{get:function(){return f}}),Object.defineProperty(s,"lineSegmentBatch",{get:function(){return l}}),Object.defineProperty(s,"centerPosition",{get:function(){return h}}),Object.defineProperty(s,"size",{get:function(){return E}}),Object.defineProperty(s,"worldToScreenScaleFactor",{get:function(){return d}}),Object.defineProperty(s,"drawnImageCount",{get:function(){return O},set:function(e){O=e}}),Object.defineProperty(s,"drawnLineSegmentCount",{get:function(){return T},set:function(e){T=e}}),Object.defineProperty(s,"lastDrawnItem",{get:function(){return g},set:function(e){g=e}}),this.addItem=function(e,t){if(null===t)throw"An argument-null exception raised.";var n=e;if(oe.isIndexValid(_.length,n)===!1)throw"An index-out-of-range exception raised.";if(ie.contains(_[n],t)===!0)throw"A world-layer-item-already-exists exception raised.";_[n].push(t),S=!0},this.removeItem=function(e){if(null===e)throw"An argument-null exception raised.";for(var t=!1,n=0;n<_.length;n++){var r=_[n];if(ie.contains(r,e)===!0){t=!0;var i=ie.remove(r,e);if(i===!1)return!1}}return t===!1?!1:(S=!0,!0)},this.update=function(){if(u.update(),S===!0){for(var e=0;e<_.length;e++)for(var t=_[e],n=0;n<t.length;n++)t[n].update();S=!1}},this.draw=function(){r(),O=0,T=0,e.clear(p.COLOR_BUFFER,n.backgroundColor);for(var t=0;t<_.length;t++)for(var i=_[t],o=0;o<i.length;o++)i[o].draw();this.endSpriteBatch(),this.endLineSegmentBatch(),g=null},this.move=function(e){if(0!==e.x||0!==e.y){var t=1/d,n=o.multiplyVectorByScalar(e,t);h=o.addVectors(h,n),S=!0,c(new ae(!0,!1))}},this.zoomAt=function(e,t,r,i){if(0!==t){var o=0>t?q.multiplySizeByScalar(E,n.zoomScaleFactor):q.multiplySizeByScalar(E,1/n.zoomScaleFactor);this.state=new fe(this,e,o,n.zoomDuration,r,i)}},this.resize=function(){r()},this.invalidateItems=function(){S=!0},this.setBounds=function(e,n){var r;e===h?r=!1:(h=e,r=!0);var i;if(n===E)i=!1;else{var o=E.width/E.height,a=n.width/n.height;d*=t.areEqual(o,a)===!0?E.width/n.width:a>=o?E.jeight/n.jeight:E.width/n.width,E=n,i=!0}S=!0,c(new ae(r,i))},this.drawsItem=function(e){return e.isVisible===!1||e.isOutOfBounds===!0?!1:!0},this.endSpriteBatch=function(){if(f.isBegun!==!1){var t=e.gl;t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),f.end()}},this.endLineSegmentBatch=function(){if(l.isBegun!==!1){var t=e.gl;t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),l.end()}},this.convertPositionFromScreenToWorldSpace=function(e){var t=new o(h.x-.5*E.width,h.y-.5*E.height),n=1/d;return new o(t.x+e.x*n,t.y+e.y*n)},this.convertPositionFromWorldToScreenSpace=function(e){var t=new o(h.x-.5*E.width,h.y-.5*E.height);return new o((e.x-t.x)*d,(e.y-t.y)*d)},this.convertLengthFromScreenToWorldSpace=function(e){return e/d},this.convertLengthFromWorldToScreenSpace=function(e){return e*d}}function Ee(){this.boundsScreenSize=!1,this.minScreenSize=new q(0,0),this.maxScreenSize=new q(Number.MAX_VALUE,Number.MAX_VALUE)}function de(e){var t,n,r,i,o,a,c;try{t=this,n=!0,r=!0,i=!1,o=!1,c=!0}catch(s){throw console.log("gorilla.graphicsLibrary.World2DItem: "+s),s}Object.defineProperty(t,"world",{get:function(){return e}}),Object.defineProperty(t,"isEnabled",{get:function(){return n},set:function(t){t!==n&&(n=t,n===!0&&e.invalidateItems())}}),Object.defineProperty(t,"isVisible",{get:function(){return r},set:function(e){e!==r&&(r=e)}}),Object.defineProperty(t,"isSelected",{get:function(){return i},set:function(e){e!==i&&(i=e)}}),Object.defineProperty(t,"isOutOfBounds",{get:function(){return c===!0&&(t.checkIfOutOfBounds(),c=!1),o},set:function(e){e!==o&&(o=e)}}),Object.defineProperty(t,"tag",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(t,"hasToCheckBounds",{get:function(){return c},set:function(e){c=e}})}function _e(){this.boundsScreenThickness=!1,this.minScreenThickness=0,this.maxScreenThickness=Number.MAX_VALUE}function Se(e,t,n,r,i){de.call(this,e);var a,c,s,u,f;try{if(a=this,0>r)throw"An invalid-length exception raised.";Object.defineProperty(a,"startPosition",{get:function(){return t},set:function(n){o.areEqual(n,t)!==!0&&(t=n,c=e.convertPositionFromWorldToScreenSpace(t),a.invalidateBounds())}}),Object.defineProperty(a,"finishPosition",{get:function(){return n},set:function(t){o.areEqual(t,n)!==!0&&(n=t,s=e.convertPositionFromWorldToScreenSpace(n),a.invalidateBounds())}}),Object.defineProperty(a,"startScreenPosition",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(a,"finishScreenPosition",{get:function(){return s},set:function(e){s=e}}),Object.defineProperty(a,"thickness",{get:function(){return r},set:function(e){e!==r&&(r=e,update())}}),Object.defineProperty(a,"screenThickness",{get:function(){return u},set:function(e){u=e}}),Object.defineProperty(a,"color",{get:function(){return i},set:function(e){i=e}}),f=new _e,Object.defineProperty(a,"style",{get:function(){return f},set:function(e){_e.areEqual(e,f)!==!0&&(f=e,update())}}),this.update()}catch(l){throw console.log("gorilla.graphicsLibrary.World2DLineSegment: "+l),l}}function Oe(e,t,n,r,i,a){de.call(this,e);var c,s,u,f;try{if(c=this,null===t)throw"An argument-null exception raised.";Object.defineProperty(c,"texture",{get:function(){return t},set:function(e){t=e}}),Object.defineProperty(c,"centerPosition",{get:function(){return n},set:function(t){o.areEqual(t,n)!==!0&&(n=t,s=e.convertPositionFromWorldToScreenSpace(n),c.invalidateBounds())}}),Object.defineProperty(c,"size",{get:function(){return r},set:function(t){q.areEqual(t,r)!==!0&&(r=t,u=q.multiplySizeByScalar(r,e.worldToScreenScaleFactor),c.invalidateBounds())}}),Object.defineProperty(c,"centerScreenPosition",{get:function(){return s},set:function(e){s=e}}),Object.defineProperty(c,"screenSize",{get:function(){return u},set:function(e){u=e}}),Object.defineProperty(c,"sourceRect",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(c,"color",{get:function(){return a},set:function(e){a=e}}),f=new Ee,Object.defineProperty(c,"style",{get:function(){return f},set:function(e){Ee.areEqual(e,f)!==!0&&(f=e,update())}});var l=r;r=0,this.size=l,this.update()}catch(h){throw console.log("gorilla.graphicsLibrary.World2DImage: "+h),h}}function Te(){}function ge(){}function pe(){var e,t,n,r,i,o;try{e=this,t=pe.FRAME_COUNT_TO_AVERAGE,n=[],r=0,i=0,o=0;for(var a=0;a<pe.FRAME_COUNT_TO_AVERAGE;a++)n[a]=1}catch(c){throw console.log("gorilla.graphicsLibrary.Fps: "+c),c}Object.defineProperty(e,"average",{get:function(){return o}}),this.update=function(){var e=(new Date).getTime(),a=.001*(e-i);i=e,t+=a-n[r],n[r]=a,r++,r===pe.FRAME_COUNT_TO_AVERAGE&&(r=0),o=Math.floor(1/(t/pe.FRAME_COUNT_TO_AVERAGE)+.5)}}function ye(){}function Ae(){}function Pe(){}t.PI=3.141592653589793,t.PI_OVER_TWO=1.5707963267948966,t.PI_OVER_FOUR=.7853981633974483,t.TWO_PI=6.283185307179586,t.PI_OVER_ONE_EIGHTY=.0174532925199432,t.ONE_EIGHTY_OVER_PI=57.29577951308232,t.RADIANS_OF_FORTY_FIVE_DEGREES=t.PI_OVER_FOUR,t.RADIANS_OF_NINETY_DEGREES=t.PI_OVER_TWO,t.RADIANS_OF_ONE_EIGHTY_DEGREES=t.PI,t.RADIANS_OF_THREE_SIXTY_DEGREES=t.TWO_PI,t.EPSILON=1e-5,t.toRadians=function(e){if("number"!=typeof e)throw"typeof(degrees) !== 'number'";return t.PI_OVER_ONE_EIGHTY*e},t.toDegrees=function(e){if("number"!=typeof e)throw"typeof(degrees) !== 'number'";return t.ONE_EIGHTY_OVER_PI*e},t.isZero=function(e){if("number"!=typeof e)throw"typeof(s) !== 'number'";return e<=-t.EPSILON||t.EPSILON<=e?!1:!0},t.areEqual=function(e,n){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof n)throw"typeof(s2) !== 'number'";var r=e-n;return r<=-t.EPSILON||t.EPSILON<=r?!1:!0},t.isScalar1LessThanScalar2=function(e,n){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof n)throw"typeof(s2) !== 'number'";return e-n<=-t.EPSILON?!0:!1},t.isScalar1LessThanOrEqualToScalar2=function(e,n){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof n)throw"typeof(s2) !== 'number'";return e-n<t.EPSILON?!0:!1},t.isScalar1GreaterThanScalar2=function(e,n){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof n)throw"typeof(s2) !== 'number'";return t.EPSILON<=e-n?!0:!1},t.isScalar1GreaterThanOrEqualToScalar2=function(e,n){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof n)throw"typeof(s2) !== 'number'";return-t.EPSILON<e-n?!0:!1},t.isPowerOfTwo=function(e){if("number"!=typeof e)throw"typeof(s) !== 'number'";return 0!==e&&0===(e&e-1)?!0:!1},n.X=0,n.Y=1,n.Z=2,r.prototype={clone:function(){return r.fromArray(this.elements)}},Object.defineProperty(r.prototype,"s11",{get:function(){return this.db[0]}}),Object.defineProperty(r.prototype,"s12",{get:function(){return this.db[4]}}),Object.defineProperty(r.prototype,"s13",{get:function(){return this.db[8]}}),Object.defineProperty(r.prototype,"s14",{get:function(){return this.db[12]}}),Object.defineProperty(r.prototype,"s21",{get:function(){return this.db[1]}}),Object.defineProperty(r.prototype,"s22",{get:function(){return this.db[5]}}),Object.defineProperty(r.prototype,"s23",{get:function(){return this.db[9]}}),Object.defineProperty(r.prototype,"s24",{get:function(){return this.db[13]}}),Object.defineProperty(r.prototype,"s31",{get:function(){return this.db[2]}}),Object.defineProperty(r.prototype,"s32",{get:function(){return this.db[6]}}),Object.defineProperty(r.prototype,"s33",{get:function(){return this.db[10]}}),Object.defineProperty(r.prototype,"s34",{get:function(){return this.db[14]}}),Object.defineProperty(r.prototype,"s41",{get:function(){return this.db[3]}}),Object.defineProperty(r.prototype,"s42",{get:function(){return this.db[7]}}),Object.defineProperty(r.prototype,"s43",{get:function(){return this.db[11]}}),Object.defineProperty(r.prototype,"s44",{
get:function(){return this.db[15]}}),r.ELEMENT_COUNT=16,r.fromArray=function(e){return new r(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},r.createIdentityMatrix=function(){return new r(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},r.createViewMatrix=function(e,t,n){var i,o,a,s;s=c.negateVector(t),a=c.calculateUnitVectorOf(s),s=c.calculateCrossProductOf(n,a),i=c.calculateUnitVectorOf(s),o=c.calculateCrossProductOf(a,i);var u=i.x,f=o.x,l=a.x,h=0,E=i.y,d=o.y,_=a.y,S=0,O=i.z,T=o.z,g=a.z,p=0,y=-c.calculateDotProductOf(i,e),A=-c.calculateDotProductOf(o,e),P=-c.calculateDotProductOf(a,e),w=1;return new r(u,E,O,y,f,d,T,A,l,_,g,P,h,S,p,w)},r.createProjectionMatrix=function(e,t,n,i){void 0===e&&(e=f.FIELD_OF_VIEW_Y),void 0===n&&(n=f.DEFAULT_DISTANCE_TO_NEAR_PLANE),void 0===i&&(i=f.DEFAULT_DISTANCE_TO_FAR_PLANE);var o,a;a=1/Math.tan(e/2),o=a/t;var c=[];return c[0]=o,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=a,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=i/(n-i),c[11]=-1,c[12]=0,c[13]=0,c[14]=n*i/(n-i),c[15]=0,r.fromArray(c)},r.createScaleMatrix=function(e){return new r(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},r.createRotationMatrix=function(e,t){var i=Math.cos(t),o=Math.sin(t);switch(e){case n.X:return new r(1,0,0,0,0,i,-o,0,0,o,i,0,0,0,0,1);case n.Y:return new r(i,0,o,0,0,1,0,0,-o,0,i,0,0,0,0,1);case n.Z:return new r(i,-o,0,0,o,i,0,0,0,0,1,0,0,0,0,1);default:console.log("A not-supported exception raised.")}},r.createTranslationMatrix=function(e){return new r(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1)},r.multiplyMatrices=function(e,t){var n=e.db,i=t.db,o=[],a=n[0],c=n[4],s=n[8],u=n[12],f=n[1],l=n[5],h=n[9],E=n[13],d=n[2],_=n[6],S=n[10],O=n[14],T=n[3],g=n[7],p=n[11],y=n[15],A=i[0],P=i[4],w=i[8],m=i[12],R=i[1],b=i[5],v=i[9],x=i[13],L=i[2],I=i[6],D=i[10],N=i[14],C=i[3],U=i[7],F=i[11],z=i[15];return o[0]=a*A+c*R+s*L+u*C,o[4]=a*P+c*b+s*I+u*U,o[8]=a*w+c*v+s*D+u*F,o[12]=a*m+c*x+s*N+u*z,o[1]=f*A+l*R+h*L+E*C,o[5]=f*P+l*b+h*I+E*U,o[9]=f*w+l*v+h*D+E*F,o[13]=f*m+l*x+h*N+E*z,o[2]=d*A+_*R+S*L+O*C,o[6]=d*P+_*b+S*I+O*U,o[10]=d*w+_*v+S*D+O*F,o[14]=d*m+_*x+S*N+O*z,o[3]=T*A+g*R+p*L+y*C,o[7]=T*P+g*b+p*I+y*U,o[11]=T*w+g*v+p*D+y*F,o[15]=T*m+g*x+p*N+y*z,r.fromArray(o)},r.transposeMatrix=function(e){return new r(e.s11,e.s21,e.s31,e.s41,e.s12,e.s22,e.s32,e.s42,e.s13,e.s23,e.s33,e.s43,e.s14,e.s24,e.s34,e.s44)},r.invertMatrix=function(e){var t=e.s11,n=e.s12,i=e.s13,o=e.s14,a=e.s21,c=e.s22,s=e.s23,u=e.s24,f=e.s31,l=e.s32,h=e.s33,E=e.s34,d=e.s41,_=e.s42,S=e.s43,O=e.s44,T=s*E*_-u*h*_+u*l*S-c*E*S-s*l*O+c*h*O,g=o*h*_-i*E*_-o*l*S+n*E*S+i*l*O-n*h*O,p=i*u*_-o*s*_+o*c*S-n*u*S-i*c*O+n*s*O,y=o*s*l-i*u*l-o*c*h+n*u*h+i*c*E-n*s*E,A=t*T+a*g+f*p+d*y;if(0===A)throw"Can't invert matrix cuz determinant is 0";return A=1/A,r.fromArray([T*A,(u*h*d-s*E*d-u*f*S+a*E*S+s*f*O-a*h*O)*A,(c*E*d-u*l*d+u*f*_-a*E*_-c*f*O+a*l*O)*A,(s*l*d-c*h*d-s*f*_+a*h*_+c*f*S-a*l*S)*A,g*A,(i*E*d-o*h*d+o*f*S-t*E*S-i*f*O+t*h*O)*A,(o*l*d-n*E*d-o*f*_+t*E*_+n*f*O-t*l*O)*A,(n*h*d-i*l*d+i*f*_-t*h*_-n*f*S+t*l*S)*A,p*A,(o*s*d-i*u*d-o*a*S+t*u*S+i*a*O-t*s*O)*A,(n*u*d-o*c*d+o*a*_-t*u*_-n*a*O+t*c*O)*A,(i*c*d-n*s*d-i*a*_+t*s*_+n*a*S-t*c*S)*A,y*A,(i*u*f-o*s*f+o*a*h-t*u*h-i*a*E+t*s*E)*A,(o*c*f-n*u*f-o*a*l+t*u*l+n*a*E-t*c*E)*A,(n*s*f-i*c*f+i*a*l-t*s*l-n*a*h+t*c*h)*A])},r.areEqual=function(e,t){if(e instanceof r==!1||t instanceof r==!1)return!1;for(var n=e.db,i=t.db,o=0;o<r.ELEMENT_COUNT;o++)if(n[o]!==i[o])return!1;return!0},i.prototype={toMatrix4x4:function(){var e=this.x,t=this.y,n=this.z,i=this.w,o=e*e,a=t*t,c=n*n,s=e*t,u=n*i,f=n*e,l=t*i,h=t*n,E=e*i,d=[1-2*(a+c),2*(s+u),2*(f-l),0,2*(s-u),1-2*(c+o),2*(h+E),0,2*(f+l),2*(h-E),1-2*(a+o),0,0,0,0,1];return r.fromArray(d)},clone:function(){return new i(this.x,this.y,this.z,this.w)}},i.ELEMENT_COUNT=4,i.fromAxisAngle=function(e,t){e=c.calculateUnitVectorOf(e);var n=.5*t,r=Math.sin(n),o=Math.cos(n);return new i(e.x*r,e.y*r,e.z*r,o)},i.fromArray=function(e){return new i(e[0],e[1],e[2],e[3])},i.createIdentityQuaternion=function(){return new i(0,0,0,1)},i.calculateUnitQuaternionOf=function(e){var n=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w);if(n<t.EPSILON)return new i(0,0,0,0);var r=1/n;return new i(e.x*r,e.y*r,e.z*r,e.w*r)},i.areEqual=function(e,t){return e instanceof i==!1||t instanceof i==!1?!1:e.x!==t.x||e.y!==t.y||e.z!==t.z||e.w!==t.w?!1:!0},o.prototype={toArray:function(){return[this.x,this.y]},clone:function(){return new o(this.x,this.y)}},o.ELEMENT_COUNT=2,o.fromArray=function(e){return new o(e[0],e[1])},o.calculateUnitVectorOf=function(e){var n=Math.sqrt(e.x*e.x+e.y*e.y);if(n<t.EPSILON)return new o(0,0);var r=1/n;return new o(e.x*r,e.y*r)},o.negateVector=function(e){return new o(-e.x,-e.y)},o.addVectors=function(e,t){return new o(e.x+t.x,e.y+t.y)},o.subtractVectors=function(e,t){return new o(e.x-t.x,e.y-t.y)},o.multiplyVectorByScalar=function(e,t){return new o(e.x*t,e.y*t)},o.calculateLengthOf=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},o.calculateLengthSquaredOf=function(e){return e.x*e.x+e.y*e.y},o.calculateDotProductOf=function(e,t){return e.x*t.x+e.y*t.y},o.calculatePerpendicularVectorOf=function(e){return new o(-e.y,e.x)},o.calculatePerpendicularDotProductOf=function(e,t){return-e.y*t.x+e.x*t.y},o.areEqual=function(e,t){return e instanceof o==!1||t instanceof o==!1?!1:e.x!==t.x||e.y!==t.y?!1:!0},a.prototype={toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new a(this.x,this.y,this.z,this.w)}},Object.defineProperty(a.prototype,"xyz",{get:function(){return new c(this.x,this.y,this.z)}}),a.ELEMENT_COUNT=4,a.fromArray=function(e){return new a(e[0],e[1],e[2],e[3])},a.calculateUnitVectorOf=function(e){var n=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w);if(n<t.EPSILON)return new a(0,0,0,0);var r=1/n;return new a(e.x*r,e.y*r,e.z*r,e.w*r)},a.addVectors=function(e,t){return new a(e.x+t.x,e.y+t.y,e.z+t.z,e.w+t.w)},a.subtractVectors=function(e,t){return new a(e.x-t.x,e.y-t.y,e.z-t.z,e.w-t.w)},a.multiplyVectorByScalar=function(e,t){return new a(e.x*t,e.y*t,e.z*t,e.w*t)},a.calculateLengthOf=function(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w)},a.calculateLengthSquaredOf=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},a.transform=function(e,t){return new a(t.s11*e.x+t.s12*e.y+t.s13*e.z+t.s14*e.w,t.s21*e.x+t.s22*e.y+t.s23*e.z+t.s24*e.w,t.s31*e.x+t.s32*e.y+t.s33*e.z+t.s34*e.w,t.s41*e.x+t.s42*e.y+t.s43*e.z+t.s44*e.w)},a.areEqual=function(e,t){return e instanceof a==!1||t instanceof a==!1?!1:e.x!==t.x||e.y!==t.y||e.z!==t.z||e.w!==t.w?!1:!0},c.prototype={toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new c(this.x,this.y,this.z)}},Object.defineProperty(c.prototype,"xy",{get:function(){return new o(this.x,this.y)}}),c.ELEMENT_COUNT=3,c.fromArray=function(e){return new c(e[0],e[1],e[2])},c.calculateUnitVectorOf=function(e){var n=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);if(n<t.EPSILON)return new c(0,0,0);var r=1/n;return new c(e.x*r,e.y*r,e.z*r)},c.negateVector=function(e){return new c(-e.x,-e.y,-e.z)},c.addVectors=function(e,t){return new c(e.x+t.x,e.y+t.y,e.z+t.z)},c.subtractVectors=function(e,t){return new c(e.x-t.x,e.y-t.y,e.z-t.z)},c.multiplyVectorByScalar=function(e,t){return new c(e.x*t,e.y*t,e.z*t)},c.calculateLengthOf=function(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)},c.calculateLengthSquaredOf=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},c.calculateDotProductOf=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},c.calculateCrossProductOf=function(e,t){return new c(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z,e.x*t.y-e.y*t.x)},c.transformPoint=function(e,t){var n=new a(e.x,e.y,e.z,1),r=a.transform(n,t),i=1/r.w;return new c(r.x*i,r.y*i,r.z*i)},c.transformVector=function(e,t){var n=new a(e.x,e.y,e.z,0),r=a.transform(n,t);return new c(r.x,r.y,r.z)},c.transform=function(e,t){var n=t.X+t.X,r=t.Y+t.Y,i=t.Z+t.Z,o=t.W*n,a=t.W*r,s=t.W*i,u=t.X*n,f=t.X*r,l=t.X*i,h=t.Y*r,E=t.Y*i,d=t.Z*i,_=1-h-d,S=f-s,O=l+a,T=f+s,g=1-u-d,p=E-o,y=l-a,A=E+o,P=1-u-h;return new c(e.X*_+e.Y*S+e.Z*O,e.X*T+e.Y*g+e.Z*p,e.X*y+e.Y*A+e.Z*P)},c.areEqual=function(e,t){return e instanceof c==!1||t instanceof c==!1?!1:e.x!==t.x||e.y!==t.y||e.z!==t.z?!1:!0},s.X_AXIS=new c(1,0,0),s.Y_AXIS=new c(0,1,0),s.Z_AXIS=new c(0,0,1),f.prototype={zoom:function(e){var t=c.multiplyVectorByScalar(c.calculateUnitVectorOf(this.facingDirection),e);this.position=c.addVectors(this.position,t),this.invalidateViewMatrix()}},f.DEFAULT_FACING_DIRECTION=c.negateVector(s.Z_AXIS),f.DEFAULT_UP_DIRECTION=s.Y_AXIS,f.FIELD_OF_VIEW_Y=t.PI_OVER_FOUR,f.MIN_DISTANCE_TO_NEAR_PLANE=10,f.MAX_DISTANCE_TO_FAR_PLANE=1e6,f.DEFAULT_DISTANCE_TO_NEAR_PLANE=f.MIN_DISTANCE_TO_NEAR_PLANE,f.DEFAULT_DISTANCE_TO_FAR_PLANE=1e5,l.prototype={update:function(){}},h.inherit=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n},h.inherit(E,l),d.EASE_IN=0,d.EASE_OUT=1,d.EASE_IN_OUT=2,h.inherit(O,l),O.prototype.update=function(){var e=this.sineEase,t=e.isFinished,n=e.ratioOfCurrentToTotalSineOfAngleOffset;void 0!==this.updatingCallback&&this.updatingCallback(e.ratioOfCurrentToTotalTimeOffset);var r=this.distance*n;this.camera.baseZoom(r-this.zoomedDistance),this.zoomedDistance=r,t===!0&&(void 0!==this.finishingCallback&&this.finishingCallback(),this.camera.state=new E(this.camera))},h.inherit(T,f),T.DEFAULT_ZOOM_DURATION=250,g.fromDisplayToDrawSpace=function(e,t){return{x:t.x/e.clientWidth*e.width,y:t.y/e.clientHeight*e.height}},g.fromDrawToDisplaySpace=function(e,t){return{x:t.x/e.width*e.clientWidth,y:t.y/e.height*e.clientHeight}},p.COLOR_BUFFER=16384,p.DEPTH_BUFFER=256,p.STENCIL_BUFFER=1024,y.prototype={toArray:function(){return[this.r,this.g,this.b,this.a]}},y.areEqual=function(e,t){return e instanceof y==!1||t instanceof y==!1?!1:e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a?!1:!0},A.DEFAULT_BACKGROUND=new y(32/255,32/255,32/255,1),A.BLACK=new y(0,0,0,1),A.WHITE=new y(1,1,1,1),A.TRANSPARENT=new y(1,1,1,0),A.SKY_BLUE=new y(135/255,206/255,235/255,1),A.CADET_BLUE=new y(95/255,158/255,160/255,1),A.PINK=new y(1,192/255,203/255,1),A.PHOTOSHOP_DARK_RED=new y(157/255,10/255,14/255,1),A.PHOTOSHOP_PASTEL_RED_ORANGE=new y(255,173/255,129/255,1),A.PHOTOSHOP_DARK_RED_ORANGE=new y(255,65/255,13/255,1),A.PHOTOSHOP_PASTEL_YELLOW_ORANGE=new y(253/255,198/255,137/255,1),A.PHOTOSHOP_DARK_YELLOW_ORANGE=new y(163/255,97/255,9/255,1),A.PHOTOSHOP_PASTEL_YELLOW=new y(1,247/255,.6,1),A.PHOTOSHOP_DARK_YELLOW=new y(171/255,160/255,0,1),A.PHOTOSHOP_PASTEL_PEA_GREEN=new y(196/255,223/255,155/255,1),A.PHOTOSHOP_DARK_PEA_GREEN=new y(89/255,133/255,39/255,1),A.PHOTOSHOP_PASTEL_YELLOW_GREEN=new y(162/255,211/255,156/255,1),A.PHOTOSHOP_DARK_YELLOW_GREEN=new y(25/255,122/255,48/255,1),A.PHOTOSHOP_PASTEL_GREEN=new y(130/255,202/255,156/255,1),A.PHOTOSHOP_DARK_GREEN=new y(0,114/255,54/255,1),A.PHOTOSHOP_PASTEL_GREEN_CYAN=new y(122/255,.8,200/255,1),A.PHOTOSHOP_DARK_GREEN_CYAN=new y(0,115/255,106/255,1),A.PHOTOSHOP_PASTEL_CYAN=new y(109/255,207/255,246/255,1),A.PHOTOSHOP_DARK_CYAN=new y(0,118/255,163/255,1),A.PHOTOSHOP_PASTEL_CYAN_BLUE=new y(125/255,167/255,216/255,1),A.PHOTOSHOP_DARK_CYAN_BLUE=new y(0,74/255,128/255,1),A.PHOTOSHOP_PASTEL_BLUE=new y(131/255,147/255,202/255,1),A.PHOTOSHOP_DARK_BLUE=new y(0,52/255,113/255,1),A.PHOTOSHOP_PASTEL_BLUE_VIOLET=new y(135/255,129/255,189/255,1),A.PHOTOSHOP_DARK_BLUE_VIOLET=new y(27/255,20/255,100/255,1),A.PHOTOSHOP_PASTEL_VIOLET=new y(161/255,134/255,190/255,1),A.PHOTOSHOP_DARK_VIOLET=new y(68/255,14/255,98/255,1),A.PHOTOSHOP_PASTEL_VIOLET_MAGENTA=new y(188/255,140/255,191/255,1),A.PHOTOSHOP_DARK_VIOLET_MAGENTA=new y(98/255,4/255,96/255,1),A.PHOTOSHOP_PASTEL_MAGENTA=new y(244/255,154/255,193/255,1),A.PHOTOSHOP_DARK_MAGENTA=new y(158/255,0,93/255,1),A.PHOTOSHOP_PASTEL_MAGENTA_RED=new y(245/255,152/255,157/255,1),A.PHOTOSHOP_DARK_MAGENTA_RED=new y(157/255,0,57/255,1),A.PHOTOSHOP_PALE_COOL_BROWN=new y(199/255,178/255,.6,1),A.PHOTOSHOP_DARK_COOL_BROWN=new y(83/255,71/255,65/255,1),A.PHOTOSHOP_PALE_WARM_BROWN=new y(198/255,156/255,109/255,1),A.PHOTOSHOP_DARK_WARM_BROWN=new y(117/255,76/255,36/255,1),A.OSX_SOLID_KELP=new y(89/255,136/255,123/255,1),P.NEAR_CLIP_PLANE=0,P.FAR_CLIP_PLANE=1,P.isDepthOutOfRange=function(e){return t.isScalar1LessThanScalar2(e,P.NEAR_CLIP_PLANE)===!0||t.isScalar1LessThanScalar2(P.FAR_CLIP_PLANE,e)===!0?!0:!1},w.prototype={loadData:function(e){var t=this.bufferLoader.loader.renderer.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.webGLBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}},m.OBJECT_ON_LEFT_SIDE_OF_LINE=0,m.OBJECT_ON_RIGHT_SIDE_OF_LINE=1,m.OBJECT_INTERSECTING_OR_ON_LINE=2,R.lineIntersectsPoint=function(e,n,r){var i=(n.x-e.x)*(r.y-e.y)-(n.y-e.y)*(r.x-e.x);return t.EPSILON<=i?m.OBJECT_ON_LEFT_SIDE_OF_LINE:i<=-t.EPSILON?m.OBJECT_ON_RIGHT_SIDE_OF_LINE:m.OBJECT_INTERSECTING_OR_ON_LINE},b.VERTEX_COUNT=4,b.POSITION_SIZE=3,b.COLOR_SIZE=4,b.INDEX_COUNT=6,b.DEFAULT_SCREEN_POSITION_DEPTH=P.NEAR_CLIP_PLANE,b.INDICES=[0,1,2,2,1,3],b.createVertexPositions=function(e,t,n,r){var i=t.xy,a=n.xy,c=o.calculatePerpendicularVectorOf(o.subtractVectors(a,i));c=o.calculateUnitVectorOf(c);var s=.5*r;c=o.multiplyVectorByScalar(c,s);var u=o.subtractVectors(a,c),f=o.addVectors(a,c),l=o.subtractVectors(i,c),h=o.addVectors(i,c);e[0]=u.x,e[1]=u.y,e[2]=n.z,e[3]=f.x,e[4]=f.y,e[5]=n.z,e[6]=l.x,e[7]=l.y,e[8]=t.z,e[9]=h.x,e[10]=h.y,e[11]=t.z},b.createVertexColors=function(e,t){e[0]=t.r,e[1]=t.g,e[2]=t.b,e[3]=t.a,e[4]=t.r,e[5]=t.g,e[6]=t.b,e[7]=t.a,e[8]=t.r,e[9]=t.g,e[10]=t.b,e[11]=t.a,e[12]=t.r,e[13]=t.g,e[14]=t.b,e[15]=t.a},x.LINE_LIST=1,x.LINE_STRIP=3,x.TRIANGLE_LIST=4,x.TRIANGLE_STRIP=5,L.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","attribute vec4 vertexColor;","uniform vec2 canvasClientSize;","varying vec4 _color;","void main() {","gl_Position = vec4 (","-1.0 + 2.0 * (vertexPosition.xy / canvasClientSize.xy),","vertexPosition.z,","1.0",");","_color = vertexColor;","}"].join("\n"),L.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 _color;","void main() {","gl_FragColor = _color;","}"].join("\n"),I.lineSegmentIntersectsBounds=function(e,t,n,r){var i=.5*r.width,a=.5*r.height,c=o.addVectors(n,new o(-i,-a)),s=o.addVectors(n,new o(-i,a)),u=o.addVectors(n,new o(i,a)),f=o.addVectors(n,new o(i,-a)),l=R.lineIntersectsPoint(e,t,c),h=R.lineIntersectsPoint(e,t,s),E=R.lineIntersectsPoint(e,t,u),d=R.lineIntersectsPoint(e,t,f);return l===m.OBJECT_ON_LEFT_SIDE_OF_LINE&&l===h&&l===E&&l===d?!1:l===m.OBJECT_ON_RIGHT_SIDE_OF_LINE&&l===h&&l===E&&l===d?!1:e.x<s.x&&t.x<s.x?!1:f.x<e.x&&f.x<t.x?!1:e.y<f.y&&t.y<f.y?!1:s.y<e.y&&s.y<t.y?!1:!0},D.MIN_X=-1,D.MAX_X=1,D.MIN_Y=-1,D.MAX_Y=1,D.MIN_Z=-1,D.MAX_Z=1,N.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","attribute vec4 vertexColor;","uniform mat4 transform;","varying vec4 _color;","void main() {","gl_Position = transform * vec4(vertexPosition, 1.0);","_color = vertexColor;","}"].join("\n"),N.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 _color;","void main() {","gl_FragColor = _color;","}"].join("\n"),C.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","uniform mat4 transform;","void main() {","gl_Position = transform * vec4(vertexPosition, 1.0);","}"].join("\n"),C.FRAGMENT_SHADER_SOURCE=["precision mediump float;","void main() {","gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","}"].join("\n"),U.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","attribute vec2 vertexTextureCoordinates;","uniform mat4 transform;","varying vec2 _textureCoordinates;","void main() {","gl_Position = transform * vec4(vertexPosition, 1.0);","_textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),U.FRAGMENT_SHADER_SOURCE=["precision mediump float;","uniform sampler2D sampler;","varying vec2 _textureCoordinates;","void main() {","gl_FragColor = texture2D(sampler, _textureCoordinates);","}"].join("\n"),Object.defineProperty(z.prototype,"right",{get:function(){return this.left+this.width}}),Object.defineProperty(z.prototype,"top",{get:function(){return this.bottom+this.height}}),Object.defineProperty(z.prototype,"center",{get:function(){return new o(this.left+.5*this.width,this.bottom+.5*this.height)}}),Object.defineProperty(z.prototype,"size",{get:function(){return new o(this.width,this.height)}}),z.areEqual=function(e,t){return e instanceof z==!1||t instanceof z==!1?!1:e.left!==t.left||e.bottom!==t.bottom||e.width!==t.width||e.height!==t.height?!1:!0},M.prototype={loadData:function(e,t){var n=this.bufferLoader.loader.renderer.gl;this.size=t,n.bindBuffer(n.ARRAY_BUFFER,this.webGLBuffer),n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW)}},H.VERTEX_SHADER=0,H.FRAGMENT_SHADER=1,k.CANVAS_WIDTH=1024,k.CANVAS_HEIGHT=1024,k.DEFAULT_CLEAR_OPTIONS=p.COLOR_BUFFER|p.DEPTH_BUFFER,k.DEFAULT_CLEAR_COLOR=A.DEFAULT_BACKGROUND,k.DEFAULT_CLEAR_DEPTH=1,k.DEFAULT_CLEAR_STENCIL=0,k.DEFAULT_TEXTURE_UNIT=0,Y.toClipSpace=function(e,t){return new a(D.MIN_X+t.x/e.clientWidth*(D.MAX_X-D.MIN_X),D.MIN_Y+t.y/e.clientHeight*(D.MAX_Y-D.MIN_Y),D.MIN_Z+t.z*(D.MAX_Z-D.MIN_Z),1)},q.addSizes=function(e,t){return new q(e.width+t.width,e.height+t.height)},q.subtractSizes=function(e,t){return new q(e.width-t.width,e.height-t.height)},q.multiplySizeByScalar=function(e,t){return new q(e.width*t,e.height*t)},q.areEqual=function(e,t){return e instanceof q==!1||t instanceof q==!1?!1:e.width!==t.width||e.height!==t.height?!1:!0},K.VERTEX_POSITIONS=1,K.VERTEX_TEXTURE_COORDINATES=2,J.VERTEX_COUNT=4,J.POSITION_SIZE=3,J.COLOR_SIZE=4,J.TEXTURE_COORDINATE_SIZE=2,J.DEFAULT_SCREEN_POSITION_DEPTH=P.NEAR_CLIP_PLANE,J.DEFAULT_COLOR=new Float32Array(A.WHITE.toArray()),J.DEFAULT_SOURCE_RECT=new z(0,0,1,1),J.DEFAULT_VERTEX_TEXTURE_COORDINATES=new Float32Array([1,0,1,1,0,0,0,1]),J.createVertexPositions=function(e,t,n){var r=.5*n.width,i=.5*n.height;e[0]=t.x+r,e[1]=t.y-i,e[2]=t.z,e[3]=t.x+r,e[4]=t.y+i,e[5]=t.z,e[6]=t.x-r,e[7]=t.y-i,e[8]=t.z,e[9]=t.x-r,e[10]=t.y+i,e[11]=t.z},J.createVertexTextureCoordinates=function(e,t){e[0]=t.right,e[1]=t.bottom,e[2]=t.right,e[3]=t.top,e[4]=t.left,e[5]=t.bottom,e[6]=t.left,e[7]=t.top},$.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","attribute vec2 vertexTextureCoordinates;","uniform vec2 canvasClientSize;","varying vec2 _textureCoordinates;","void main() {","gl_Position = vec4 (","-1.0 + 2.0 * (vertexPosition.xy / canvasClientSize.xy),","vertexPosition.z,","1.0",");","_textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),$.FRAGMENT_SHADER_SOURCE=["precision mediump float;","uniform vec4 color;","uniform sampler2D sampler;","varying vec2 _textureCoordinates;","void main() {","gl_FragColor = color * texture2D(sampler, _textureCoordinates);","}"].join("\n"),ee.toUV=function(e,t){return{u:e,v:1-t}},ee.toST=function(e,t){return{s:e,t:1-t}},te.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec4 vertexPosition;","attribute vec4 vertexColor;","varying vec4 _color;","void main() {","gl_Position = vertexPosition;","_color = vertexColor;","}"].join("\n"),te.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 _color;","void main() {","gl_FragColor = _color;","}"].join("\n"),ne.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec4 vertexPosition;","attribute vec4 vertexColor;","attribute vec2 vertexTextureCoordinates;","varying vec4 _color;","varying vec2 _textureCoordinates;","void main() {","gl_Position = vertexPosition;","_color = vertexColor;","_textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),ne.FRAGMENT_SHADER_SOURCE=["precision mediump float;","uniform sampler2D sampler;","varying vec4 _color;","varying vec2 _textureCoordinates;","void main() {","gl_FragColor = _color * texture2D(sampler, _textureCoordinates);","}"].join("\n"),re.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec4 vertexPosition;","attribute vec2 vertexTextureCoordinates;","varying vec2 _textureCoordinates;","void main() {","gl_Position = vertexPosition;","_textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),re.FRAGMENT_SHADER_SOURCE=["precision mediump float;","uniform sampler2D sampler;","varying vec2 _textureCoordinates;","void main() {","gl_FragColor = texture2D(sampler, _textureCoordinates);","}"].join("\n"),ie.contains=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},ie.remove=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return e.splice(n,1),!0;return!1},oe.isIndexValid=function(e,t){return 0>t||t>e-1?!1:!0},ce.BACKGROUND=0,ce.RESERVED_ITEMS_BETWEEN_BACKGROUND_AND_FARTHEST_LINE_SEGMENTS=1,ce.LINE_SEGMENTS_BELOW_FAR_IMAGES=2,ce.FAR_IMAGES=3,ce.LINE_SEGMENTS_BELOW_MIDDLE_IMAGES=4,ce.MIDDLE_IMAGES=5,ce.LINE_SEGMENTS_ABOVE_MIDDLE_IMAGES=6,ce.NEAR_IMAGES=7,ce.LINE_SEGMENTS_ABOVE_NEAR_IMAGES=8,ce.RESERVED_ITEMS_BETWEEN_NEAREST_LINE_SEGMENTS_AND_TEXT=9,ce.TEXT=10,ce.RESERVED_ITEMS_BETWEEN_TEXT_AND_UI=11,ce.UI=12,ce.NEAREST_RESERVED_ITEMS=13,ce.FARTHEST_ITEMS=ce.BACKGROUND,ce.NEAREST_ITEMS=ce.NEAREST_RESERVED_ITEMS,se.prototype={update:function(){}},h.inherit(ue,se),h.inherit(fe,se),fe.prototype.update=function(){var e=this.sineEase.isFinished,t=this.sineEase.ratioOfCurrentToTotalSineOfAngleOffset;void 0!==this.updateCallback&&this.updatingCallback(_sineEase.ratioOfCurrentToTotalTimeOffset);var n=e===!1?q.addSizes(this.oldSize,q.multiplySizeByScalar(q.subtractSizes(this.newSize,this.oldSize),t)):this.newSize,r=this.world.centerPosition,i=this.world.convertPositionFromScreenToWorldSpace(this.screenPosition);this.world.setBounds(r,n);var a=o.subtractVectors(this.world.convertPositionFromScreenToWorldSpace(this.screenPosition),i);r=o.subtractVectors(r,a),this.world.setBounds(r,n),e===!0&&(void 0!==this.finishingCallback&&this.finishingCallback(),this.world.state=new ue(this.world))},le.areEqual=function(e,t){return e instanceof le==!1||t instanceof le==!1?!1:y.areEqual(e.backgroundColor,t.backgroundColor)===!1||e.zoomDuration!==t.zoomDuration||e.zoomScaleFactor!==t.zoomScaleFactor||e.hitLineSegmentScreenThicknessTimes!==t.hitLineSegmentScreenThicknessTimes||e.viewMargin!==t.viewMargin?!1:!0},he.DEFAULT_LINE_SEGMENT_LAYER_INDEX=ce.LINE_SEGMENTS_BELOW_FAR_IMAGES,he.DEFAULT_IMAGE_LAYER_INDEX=ce.MIDDLE_IMAGES,Ee.areEqual=function(e,t){return e instanceof Ee==!1||t instanceof Ee==!1?!1:e.boundsScreenSize!==t.boundsScreenSize||q.areEqual(e.minScreenSize,t.minScreenSize)===!1||q.areEqual(e.maxScreenSize,t.maxScreenSize)===!1?!1:!0},de.prototype={update:function(){},draw:function(){},invalidateBounds:function(){this.hasToCheckBounds=!0},checkIfOutOfBounds:function(){}},_e.areEqual=function(e,t){return e instanceof _e==!1||t instanceof _e==!1?!1:e.boundsScreenThickness!==t.boundsScreenThickness||e.minScreenThickness!==t.minScreenThickness||e.maxScreenThickness!==t.maxScreenThickness?!1:!0},h.inherit(Se,de),Se.prototype.update=function(){this.isEnabled!==!1&&(this.startScreenPosition=this.world.convertPositionFromWorldToScreenSpace(this.startPosition),this.finishScreenPosition=this.world.convertPositionFromWorldToScreenSpace(this.finishPosition),this.screenThickness=this.thickness*this.world.worldToScreenScaleFactor,this.boundScreenThickness())},Se.prototype.draw=function(){var e=this.world;e.drawsItem(this)!==!1&&(null===e.lastDrawnItem?e.lineSegmentBatch.begin():e.lastDrawnItem instanceof Oe==!0?(e.spriteBatch.IsBegun===!0&&e.endSpriteBatch(),e.lineSegmentBatch.begin()):e.lastDrawnItem instanceof Se==!0&&e.lineSegmentBatch.isBegun===!1&&(console.log("An invalid-operation exception raised."),e.lineSegmentBatch.begin()),e.lineSegmentBatch.drawLineSegment(new c(this.startScreenPosition.x,this.startScreenPosition.y,b.DEFAULT_SCREEN_POSITION_DEPTH),new c(this.finishScreenPosition.x,this.finishScreenPosition.y,b.DEFAULT_SCREEN_POSITION_DEPTH),this.screenThickness,this.color),e.lastDrawnItem=this,e.drawnLineSegmentCount++)},Se.prototype.boundScreenThickness=function(){var e=this.style;if(e.boundsScreenThickness!==!1){if(e.minScreenThickness<0||e.maxScreenThickness<0)throw"An invalid-operation exception raised.";this.screenThickness<e.minScreenThickness?this.screenThickness=e.minScreenThickness:e.maxScreenThickness<this.screenThickness&&(this.screenThickness=e.maxScreenThickness)}},Se.prototype.checkIfOutOfBounds=function(){var e=this.world.centerPosition,t=this.world.size;I.lineSegmentIntersectsBounds(this.startPosition,this.finishPosition,e,t)===!0?this.isOutOfBounds=!1:this.isOutOfBounds=!0},h.inherit(Oe,de),Oe.prototype.update=function(){this.isEnabled!==!1&&(this.centerScreenPosition=this.world.convertPositionFromWorldToScreenSpace(this.centerPosition),this.screenSize=q.multiplySizeByScalar(this.size,this.world.worldToScreenScaleFactor),this.boundScreenSize())},Oe.prototype.draw=function(){var e=this.world;e.drawsItem(this)!==!1&&(null===e.lastDrawnItem?this.beginSpriteBatch():e.lastDrawnItem instanceof Se==!0?(e.lineSegmentBatch.isBegun===!0&&e.endLineSegmentBatch(),this.beginSpriteBatch()):e.lastDrawnItem instanceof Oe==!0&&e.spriteBatch.isBegun===!1&&(console.log("An invalid-operation exception raised."),this.beginSpriteBatch()),e.spriteBatch.drawSprite(this.texture,this.flushingOptions,new c(this.centerScreenPosition.x,this.centerScreenPosition.y,J.DEFAULT_SCREEN_POSITION_DEPTH),this.screenSize,this.sourceRect,this.color),e.lastDrawnItem=this,e.drawnImageCount++)},Oe.prototype.boundScreenSize=function(){var e=this.style;if(e.boundsScreenSize!==!1){if(e.maxScreenSize.width<e.minScreenSize.width||e.maxScreenSize.height<e.minScreenSize.height)throw new"An invalid-operation exception raised.";this.screenSize.width<e.minScreenSize.width&&(this.screenSize.width=e.minScreenSize.width),this.screenSize.height<e.minScreenSize.height&&(this.screenSize.height=e.minScreenSize.height),e.maxScreenSize.width<this.screenSize.width&&(this.screenSize.width=e.maxScreenSize.width),e.maxScreenSize.height<this.screenSize.height&&(this.screenSize.height=e.maxScreenSize.height)}},Oe.prototype.checkIfOutOfBounds=function(){var e=this.world,t=e.centerPosition,n=e.size;.5*this.size.width+.5*n.width<Math.abs(this.centerPosition.x-t.x)||.5*this.size.height+.5*n.height<Math.abs(this.centerPosition.y-t.y)?this.isOutOfBounds=!0:this.isOutOfBounds=!1},Oe.prototype.beginSpriteBatch=function(){this.world.spriteBatch.begin()},Te.ITEM1_PRECEDES_ITEM2=-1,Te.ITEMS_IN_SAME_POSITION=0,Te.ITEM1_FOLLOWS_ITEM2=1,ge.displayMessageOf=function(e){alert(e)},pe.FRAME_COUNT_TO_AVERAGE=16,ye.LEFT=0,ye.MIDDLE=1,ye.RIGHT=2,Ae.next=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor((t-e)*Math.random())+e},e.Camera=f,e.CameraState=l,e.CameraStateStill=E,e.CameraStateZooming=O,e.SmoothCamera=T,e.CanvasCoordinateHelper=g,e.ClearOptions=p,e.Color=y,e.Colors=A,e.DepthBufferValues=P,e.IndexBuffer=w,e.Line2DHelper=R,e.Line2DIntersectionResult=m,e.LineSegment2D=b,e.LineSegment2DBatch=L,e.LineSegment2DBatchStyle=v,e.LineSegment2DHelper=I,e.Ndc=D,e.PositionColor=N,e.PositionOnly=C,e.PositionTextureCoordinates=U,e.PrimitiveType=x,e.Program=F,e.Rect=z,e.Renderer=k,e.RendererStyle=W,e.ScreenCoordinateHelper=Y,e.ShaderType=H,e.Size2D=q,e.Size3D=Z,e.Sprite=J,e.SpriteBatch=$,e.SpriteBatchStyle=Q,e.SpriteFlushingOptions=K,e.Texture2D=j,e.TextureCoordinateHelper=ee,e.TransformedPositionColor=te,e.TransformedPositionColorTextureCoordinates=ne,e.TransformedPositionTextureCoordinates=re,e.VertexBuffer=M,e.World2D=he,e.World2DBoundsChangedEvent=ae,e.World2DImage=Oe,e.World2DImageStyle=Ee,e.World2DItem=de,e.World2DLineSegment=Se,e.World2DLineSegmentStyle=_e,e.World2DLayerName=ce,e.World2DState=se,e.World2DStateNormal=ue,e.World2DStateZoomingAtScreenPosition=fe,e.World2DStyle=le,e.ArrayHelper=ie,e.ComparisonResults=Te,e.ExceptionHelper=ge,e.Fps=pe,e.IndexHelper=oe,e.JSHelper=h,e.MouseButton=ye,e.RandomHelper=Ae,e.BufferLoader=B,e.Loader=X,e.ProgramLoader=V,e.TextureLoader=G,e.AxisGroup=s,e.MathHelper=t,e.Vector2D=o,e.Vector3D=c,e.Vector4D=a,e.Matrix4x4=r,e.CartesianAxis=n,e.Plane=Pe,e.Quaternion=i,e.ViewFrustum=u,e.EaseMode=d,e.SineEase=S,e.Stopwatch=_}(this.gorilla.graphicsLibrary=this.gorilla.graphicsLibrary||{});
