this.gorilla=this.gorilla||{},function(e){"use strict";function r(){var e=gorilla.graphicsLibrary;this.lineSegmentColor=new e.Color(0,0,0,.125),this.lineSegmentThicknesss=5}function n(e,n){var t,o,i;try{t=this,o=!1,i=[]}catch(a){throw console.log("gorilla.linkAnalysis.AxisGroup: "+a),a}Object.defineProperty(t,"canvas",{get:function(){return e}}),Object.defineProperty(t,"style",{get:function(){return n},set:function(e){r.areEqual(e,n)!==!0&&(n=e)}})}function t(){this.boundsLinkScreenThicknesses=!0,this.minLinkScreenThickness=1.5,this.maxLinkScreenThickness=30}function o(){this.vertexSpacing=o.DEFAULT_VERTEX_SPACING}function i(e,r){this.vertexIndex=e,this.value=r}function a(e){function r(){g=[];for(var e=0;e<y.length;e++)g.push(new i(e,0));for(var e=0;e<E.length;e++){var r=E[e],n=g[r.sourceVertexIndex];n.value++,g[r.sourceVertexIndex]=n,n=g[r.destinationVertexIndex],n.value++,g[r.destinationVertexIndex]=n}g.sort(function(e,r){return e.value<r.value?d.ComparisonResults.ITEM1_FOLLOWS_ITEM2:r.value<e.value?d.ComparisonResults.ITEM1_PRECEDES_ITEM2:d.ComparisonResults.ITEMS_IN_SAME_POSITION});for(var e=0;e<g.length;e++){var r=g[e];if(0===r.value){g.splice(e,g.length-e);break}}}function n(){p=[],f=[];for(var e=0;e<g.length;e++){var r=g[e];r.value<=0&&console.log("vertexDegree.value <= 0 occurs, but it's not supposed to."),p.push(r.vertexIndex)}for(var e=0;e<y.length;e++)d.ArrayHelper.contains(p,e)===!1&&f.push(e)}function t(){if(v=[],0!==p.length)if(1===p.length)v.push(new d.Vector2D(0,0));else for(var r,n,t,o,i=d.MathHelper.RADIANS_OF_THREE_SIXTY_DEGREES,a=i/p.length,l=.5*a,s=.5*e.vertexSpacing/Math.sin(l),c=0;c<p.length;c++)r=new d.Vector3D(0,s,0),t=new d.Quaternion.fromAxisAngle(new d.Vector3D(0,0,-1),a*c),o=t.toMatrix4x4(),n=d.Vector3D.transformPoint(r,o),v.push(n.xy)}function l(){var e;e=p.length<16?4:p.length<32?8:16;for(var r=[],n=0;e>n;n++)r.push([]);for(var t=Math.floor(p.length/r.length),o=p.length%r.length,i=[],n=0;n<r.length;n++)i.push(t);for(var n=0;o>n;n++)i[n]++;for(var a=0,n=0;n<r.length;n++)for(var l=r[n],s=0;s<i[n];s++)l.push(a),a++;a!==p.length&&console.log("An error-checking-failed exception raised.");var c=t;return 0!==o&&c++,{groups:r,levelCount:c}}function s(e,r,n){if(0!==e.length){e.length-1<r&&(r=0);var t=e[r];n.push(t),e.splice(r,1)}}function c(r,n){var t;t=0===p.length?new d.Vector2D(0,0):new d.Vector2D(r+e.vertexSpacing,n);for(var o=0,i=0;i<f.length;i++){var l=f[i],s=y[l];s.position=d.Vector2D.addVectors(t,new d.Vector2D(a.DEFAULT_UNEDGED_VERTEX_SPACING*o,0)),y[l]=s,o++}}function u(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)if(r!==n&&e[r]===e[n])throw"An invalid-operation exception raised."}var h,g,p,f,v,y,E,d=gorilla.graphicsLibrary;try{h=this,void 0===e&&(h=new o)}catch(L){throw console.log("gorilla.linkAnalysis.CircularLayout: "+L),L}Object.defineProperty(h,"style",{get:function(){return e},set:function(r){o.areEqual(r,e)!==!0&&(e=r)}}),this.perform=function(e,o){if(0!==e.length){y=e,E=o,r(),n(),t();var i=Number.MIN_VALUE,a=Number.MIN_VALUE;if(p.length<=3)for(var h=0;h<g.length;h++){var f=g[h];f.value<=0&&concole.log("vertexDegree.value <= 0 occurs, but it's not supposed to.");var L=f.vertexIndex,x=y[L];x.position=v[h],i<x.position.x&&(i=x.position.x),a<x.position.y&&(a=x.position.y),y[L]=x}else{for(var S=l(),D=[],A=!0,h=0;h<S.levelCount;h++){if(0===h)for(var I=0;I<S.groups.length;I++){var N=S.groups[I],C=0,T=N[C];D.push(T),N.splice(C,1)}else{var C=d.RandomHelper.next(0,S.groups[0].length);if(A===!0)for(var I=0;I<S.groups.length;I++){var N=S.groups[I];s(N,C,D)}else for(var I=S.groups.length-1;I>=0;I--){var N=S.groups[I];s(N,C,D)}}A=!A}u(D);for(var h=0;h<g.length;h++){var f=g[h];f.value<=0&&concole.log("vertexDegree.value <= 0 occurs, but it's not supposed to.");var L=f.vertexIndex,T=D[h],x=y[L];x.position=v[T],i<x.position.x&&(i=x.position.x),a<x.position.y&&(a=x.position.y),y[L]=x}}c(i,a)}}}function l(e){var r;try{r=this}catch(n){throw console.log("gorilla.linkAnalysis.GraphLayoutState: ",n),n}Object.defineProperty(r,"layout",{get:function(){return e}})}function s(e){l.call(this,e)}function c(e,r){this.sourceVertexIndex=e,this.destinationVertexIndex=r}function u(e){this.position=e}function h(e){function r(e,r){n();for(var t=0;t<e.length;t++){var o=new u(e[t].centerPosition.clone());l.push(o)}for(var t=0;t<r.length;t++){var i=r[t],a=new c(i.sourceGraphVertexIndex,i.destinationGraphVertexIndex);h.push(a)}}function n(){h=[],l=[]}var t,o,i,l,h,g=gorilla.graphicsLibrary;try{t=this,o=new s(t),l=[],h=[]}catch(p){throw console.log("gorilla.linkAnalysis.Layout: "+p),p}Object.defineProperty(t,"chart",{get:function(){return e}}),Object.defineProperty(t,"state",{get:function(){return o},set:function(e){e!==o&&(o=e)}}),Object.defineProperty(t,"graphVertexCount",{get:function(){return l.length}}),this.startPerformingCircularlayout=function(e,n,t,o){void 0===i?i=new a(e):i.style=e,r(n,t),i.perform(l,h);for(var s=0;s<l.length;s++){var c=l[s];c.position=g.Vector2D.addVectors(o,c.position)}},this.getGraphVertexAt=function(e){if(g.IndexHelper.isIndexValid(l,e)===!1)throw"An argument-out-of-range exception raised.";return l[e]}}function g(e,r){var n,o;try{n=this,void 0===r&&(r=new t)}catch(i){throw console.log("gorilla.linkAnalysis.CircularLayout: "+i),i}Object.defineProperty(n,"renderer",{get:function(){return e}}),Object.defineProperty(n,"style",{get:function(){return r},set:function(e){t.areEqual(e,r)!==!0&&(r=e)}}),Object.defineProperty(n,"layout",{get:function(){return void 0===o&&(o=new h(n)),o}})}function p(e,r,n,t){var o=gorilla.graphicsLibrary;o.World2DImage.call(e.world,r,n,t);var i;try{i=this}catch(a){throw console.log("gorilla.linkAnalysis.ChartImage: ",a),a}}function f(){}r.areEqual=function(e,n){return e instanceof r==!1||n instanceof r==!1?!1:gorilla.graphicsLibrary.Color.areEqual(e.lineSegmentColor,n.lineSegmentColor)===!1||e.lineSegmentThicknesss!==n.lineSegmentThicknesss?!1:!0},t.areEqual=function(e,r){return e instanceof t==!1||r instanceof t==!1?!1:e.boundsLinkScreenThicknesses!==r.boundsLinkScreenThicknesses||e.minLinkScreenThickness!==r.minLinkScreenThickness||e.maxLinkScreenThickness!==r.maxLinkScreenThickness?!1:!0},o.areEqual=function(e,r){return e instanceof o==!1||r instanceof o==!1?!1:e.vertexSpacing!==r.vertexSpacing?!1:!0},o.DEFAULT_VERTEX_SPACING=150,a.DEFAULT_UNEDGED_VERTEX_SPACING=o.DEFAULT_VERTEX_SPACING,l.prototype={update:function(){}},gorilla.graphicsLibrary.JSHelper.inherit(s,l),gorilla.graphicsLibrary.JSHelper.inherit(p,gorilla.graphicsLibrary.World2DImage),p.prototype.draw=function(){},f.BACKGROUND=gorilla.graphicsLibrary.World2DLayerName.BACKGROUND,f.FILLED_BOXES=gorilla.graphicsLibrary.World2DLayerName.BACKGROUND+1,f.THEME_LINES=gorilla.graphicsLibrary.World2DLayerName.BACKGROUND+2,f.LINKS=gorilla.graphicsLibrary.World2DLayerName.BACKGROUND+3,f.CORNERS=gorilla.graphicsLibrary.World2DLayerName.BACKGROUND+4,f.UNFILLED_BOXES=gorilla.graphicsLibrary.World2DLayerName.BACKGROUND+5,f.ENDS=gorilla.graphicsLibrary.World2DLayerName.BACKGROUND+6,f.LEGENDS=gorilla.graphicsLibrary.World2DLayerName.BACKGROUND+7,f.FIRST_ITEM=f.BACKGROUND,f.LAST_ITEM=f.LEGENDS,f.FARTHEST_ITEM=f.BACKGROUND,f.NEAREST_ITEM=f.LEGENDS,e.AxisGroup=n,e.AxisGroupStyle=r,e.Chart=g,e.ChartImage=p,e.ChartLayerName=f,e.ChartStyle=t,e.CircularLayout=a,e.CircularLayoutStyle=o,e.CircularLayoutVertexDegree=i,e.GraphEdge=c,e.GraphLayoutState=l,e.GraphLayoutStateNormal=s,e.GraphVertex=u}(this.gorilla.linkAnalysis=this.gorilla.linkAnalysis||{});
