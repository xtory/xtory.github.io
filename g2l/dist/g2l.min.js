!function(e){"use strict";function t(){}function n(){}function r(){}function i(){}function o(){}function c(){}function u(e){var t;try{t=e.createBuffer()}catch(n){throw console.log("IndexBuffer: "+n),n}Object.defineProperty(this,"gl",{get:function(){return e}}),Object.defineProperty(this,"webGLBuffer",{get:function(){return t}})}function a(){}function s(e){var t;try{t=e.createProgram()}catch(n){throw console.log("Program: "+n),n}Object.defineProperty(this,"gl",{get:function(){return e}}),Object.defineProperty(this,"webGLProgram",{get:function(){return t}})}function f(){}function E(e){var t,n,r;try{t=e.createTexture()}catch(i){throw console.log("IndexBuffer: "+i),i}Object.defineProperty(this,"gl",{get:function(){return e}}),Object.defineProperty(this,"webGLTexture",{get:function(){return t}}),Object.defineProperty(this,"width",{get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"height",{get:function(){return r},set:function(e){r=e}})}function _(e){var t,n;try{t=e.createBuffer()}catch(r){throw console.log("VertexBuffer: "+r),r}Object.defineProperty(this,"gl",{get:function(){return e}}),Object.defineProperty(this,"webGLBuffer",{get:function(){return t}}),Object.defineProperty(this,"size",{get:function(){return n},set:function(e){n=e}})}function O(e){function t(e,t){var n;if(e===f.VERTEX_SHADER)n=i.createShader(i.VERTEX_SHADER);else{if(e!==f.FRAGMENT_SHADER)return null;n=i.createShader(i.FRAGMENT_SHADER)}if(i.shaderSource(n,t),i.compileShader(n),i.getShaderParameter(n,i.COMPILE_STATUS)===!1){var r=i.getShaderInfoLog(n);throw i.deleteShader(n),"An error occurred compiling the shaders: "+r}return n}function n(e){var t=document.getElementById(e);if(null===t)return null;for(var n="",r=t.firstChild;null!==r;)r.nodeType===Node.TEXT_NODE&&(n+=r.textContent),r=r.nextSibling;var o;if("x-shader/x-vertex"===t.type)o=i.createShader(i.VERTEX_SHADER);else{if("x-shader/x-fragment"!==t.type)return null;o=i.createShader(i.FRAGMENT_SHADER)}if(i.shaderSource(o,n),i.compileShader(o),i.getShaderParameter(o,i.COMPILE_STATUS)===!1){var c=i.getShaderInfoLog(o);throw i.deleteShader(o),"An error occurred compiling the shaders: "+c}return o}function r(e,t){var n=new s(i),r=n.webGLProgram;if(i.attachShader(r,e),i.attachShader(r,t),i.linkProgram(r),i.getProgramParameter(r,i.LINK_STATUS)===!1){var o=i.getProgramInfoLog(r);throw i.deleteProgram(r),"Unable to initialize the (shader) program: "+o}return n}var i=e.graphicsManager.webGLContext;Object.defineProperty(this,"xcene",{get:function(){return e}}),this.createVertexBuffer=function(){return new _(i)},this.createIndexBuffer=function(){return new u(i)},this.setUpProgram=function(e,n){var i=t(f.VERTEX_SHADER,e),o=t(f.FRAGMENT_SHADER,n);return r(i,o)},this.setUpProgramFromHtmlElements=function(e,t){var i=n(f.VERTEX_SHADER,e),o=n(f.FRAGMENT_SHADER,t);return r(i,o)},this.loadTexture2D=function(e){function t(e,t){i.bindTexture(i.TEXTURE_2D,t.webGLTexture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e),a.isPowerOfTwo(e.width)===!0&&a.isPowerOfTwo(e.height)===!0?(i.generateMipmap(i.TEXTURE_2D),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR)):i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null),t.width=e.width,t.height=e.height}var n=new Image,r=new E(i);return n.addEventListener("load",function(){t(n,r)}),n.src=e,r}}function l(){}function T(e,t,n,r,i,o,c,u,a,s,f,E,_,O,l,T){this.elements=[e,i,a,_,t,o,s,O,n,c,f,l,r,u,E,T],Object.defineProperty(this,"s11",{get:function(){return this.elements[0]}}),Object.defineProperty(this,"s12",{get:function(){return this.elements[4]}}),Object.defineProperty(this,"s13",{get:function(){return this.elements[8]}}),Object.defineProperty(this,"s14",{get:function(){return this.elements[12]}}),Object.defineProperty(this,"s21",{get:function(){return this.elements[1]}}),Object.defineProperty(this,"s22",{get:function(){return this.elements[5]}}),Object.defineProperty(this,"s23",{get:function(){return this.elements[9]}}),Object.defineProperty(this,"s24",{get:function(){return this.elements[13]}}),Object.defineProperty(this,"s31",{get:function(){return this.elements[2]}}),Object.defineProperty(this,"s32",{get:function(){return this.elements[6]}}),Object.defineProperty(this,"s33",{get:function(){return this.elements[10]}}),Object.defineProperty(this,"s34",{get:function(){return this.elements[14]}}),Object.defineProperty(this,"s41",{get:function(){return this.elements[3]}}),Object.defineProperty(this,"s42",{get:function(){return this.elements[7]}}),Object.defineProperty(this,"s43",{get:function(){return this.elements[11]}}),Object.defineProperty(this,"s44",{get:function(){return this.elements[15]}})}function A(e,t,n,r){this.x=e,this.y=t,this.z=n,this.w=r}function h(e,t){this.x=e,this.y=t}function P(e,t,n,r){this.x=e,this.y=t,this.z=n,this.w=r}function d(e,t,n){this.x=e,this.y=t,this.z=n}function R(){}function y(){}function g(e,t,n,r,i,o){function c(){l!==!1&&(f=T.createViewMatrix(t,n,r),h=!0,l=!1)}function u(){var e=s.clientWidth/s.clientHeight;(A!==!1||a.areEqual(e,P)!==!0)&&(P=e,E=T.createProjectionMatrix(g.FIELD_OF_VIEW_Y,P,i,o),h=!0,A=!1)}var s,f,E,_,O,l,A,h,P;try{void 0===t&&(t=new d(0,0,1e4)),void 0===n&&(n=g.DEFAULT_FACING_DIRECTION),void 0===r&&(r=g.DEFAULT_UP_DIRECTION),void 0===i&&(i=g.DEFAULT_DISTANCE_TO_NEAR_PLANE),void 0===o&&(o=g.DEFAULT_DISTANCE_TO_FAR_PLANE),i<g.MIN_DISTANCE_TO_NEAR_PLANE&&(i=g.MIN_DISTANCE_TO_NEAR_PLANE),g.MAX_DISTANCE_TO_FAR_PLANE<o&&(o=g.MAX_DISTANCE_TO_FAR_PLANE),s=e.graphicsManager.canvas,O=new y,Object.defineProperty(this,"position",{get:function(){return t}}),Object.defineProperty(this,"facingDirection",{get:function(){return n}}),Object.defineProperty(this,"upDirection",{get:function(){return r}}),Object.defineProperty(this,"distanceToNearPlane",{get:function(){return i}}),Object.defineProperty(this,"distanceToFarPlane",{get:function(){return o}}),Object.defineProperty(this,"viewFrustum",{get:function(){return O}}),l=!0,A=!0,h=!0}catch(R){throw console.log("g2l.Camera: ",R),R}this.zoom=function(e){var r=d.multiplyVectorByScalar(d.calculateUnitVectorOf(n),e);t=d.addVectors(t,r),l=!0},this.getPosition=function(){return t},this.getFacingDirection=function(){return n},this.getUpDirection=function(){return r},this.getUpDirection=function(){return r},this.getDistanceToNearPlane=function(e){return i},this.getDistanceToFarPlane=function(e){return o},this.getProjectionMatrix=function(e){u(),e.elements=E.elements.slice()},this.getTransform=function(e){c(),u(),h===!0&&(_=T.multiplyMatrices(E,f)),e.elements=_.elements.slice(),h===!0&&(h=!1)}}function w(){}function p(){}function m(e,t,n,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r}function S(){}function x(){}function b(e){function t(){if(void 0!==e.settings&&void 0!==e.settings.canvas)s=e.settings.canvas;else{if(void 0===document.body)throw"document.body === undefined";s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),s.width=b.CANVAS_WIDTH,s.height=b.CANVAS_HEIGHT}}function n(){if(void 0===e.settings||e.settings.usesDefaultStyles!==!1){var t=s.style;t.width="100%",t.height="100%",t.display="block"}}function r(){if(f=s.getContext("webgl"),null===f){if(f=s.getContext("experimental-webgl"),null===f)throw alert("Unable to initialize WebGL. Your browser may not support it."),"A WebGL-not-supported exception raised.";console.log("Your browser supports WebGL. \n\nHowever, it indicates the support is experimental. That is, not all WebGL functionality may be supported, and content may not run as expected.")}f.depthRange(x.NEAR_CLIP_PLANE,x.FAR_CLIP_PLANE),_=b.DEFAULT_CLEAR_COLOR,O=b.DEFAULT_CLEAR_DEPTH,l=b.DEFAULT_CLEAR_STENCIL,f.clearColor(_.r,_.g,_.b,_.a),f.clearDepth(O),f.clearStencil(l),i(),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!0)}function i(){o(),c(),u(),a()}function o(){f.disable(f.BLEND)}function c(){f.enable(f.DEPTH_TEST),f.depthFunc(f.LEQUAL),f.disable(f.STENCIL_TEST)}function u(){}function a(){f.enable(f.CULL_FACE),f.cullFace(f.BACK)}var s,f,E,_,O,l;try{t(),n(),r()}catch(A){throw console.log("GraphicsManager: "+A),A}Object.defineProperty(this,"xcene",{get:function(){return e}}),Object.defineProperty(this,"canvas",{get:function(){return s}}),Object.defineProperty(this,"webGLContext",{get:function(){return f}}),Object.defineProperty(this,"program",{get:function(){return E},set:function(e){e!==E&&(E=e,f.useProgram(E.webGLProgram))}}),this.clear=function(e,t,n,r){void 0!==t&&m.areEqual(t,_)===!1&&(_=t,f.clearColor(_.r,_.g,_.b,_.a)),void 0!==n&&n!==O&&(O=n,f.clearDepth(O)),void 0!==r&&r!==l&&(l=r,f.clearStencil(l)),void 0===e&&(e=b.DEFAULT_CLEAR_OPTIONS),f.clear(e)},this.drawPrimitives=function(e,t,n){f.drawArrays(e,t,n)},this.drawIndexedPrimitives=function(e,t,n,r){void 0===r&&(r=0),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,e.webGLBuffer),f.drawElements(t,n,f.UNSIGNED_SHORT,r)},this.getAttributeLocation=function(e,t){return f.getAttribLocation(e.webGLProgram,t)},this.getUniformLocation=function(e,t){return f.getUniformLocation(e.webGLProgram,t)},this.setAttribute=function(e,t){f.bindBuffer(f.ARRAY_BUFFER,t.webGLBuffer),f.vertexAttribPointer(e,t.size,f.FLOAT,!1,0,0),f.enableVertexAttribArray(e)},this.setSampler=function(e,t,n){void 0===n&&(n=b.DEFAULT_TEXTURE_UNIT),f.activeTexture(f.TEXTURE0+n),f.bindTexture(f.TEXTURE_2D,t.webGLTexture),this.setUniform(e,n)},this.setUniform=function(e,t){t instanceof T==!0?f.uniformMatrix4fv(e,!1,new Float32Array(t.elements)):f.uniform1i(e,t)}}function L(){}function N(){}function v(){}function D(){}function I(){}function C(){}function U(){}function F(e){function t(){void 0===window.requestAnimationFrame&&(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}())}function n(){}try{Object.defineProperty(this,"settings",{get:function(){return e}});var r,i;r=new b(this),Object.defineProperty(this,"graphicsManager",{get:function(){return r}}),i=new O(this),Object.defineProperty(this,"assetManager",{get:function(){return i}}),t(),n()}catch(o){throw console.error("g2l.Xcene: "+o),o}this.run=function(e,t){function n(){requestAnimationFrame(n),void 0!==e&&e(),void 0!==t&&t()}n()}}function H(){}function M(){var e,t,n,r;try{e=M.FRAME_COUNT_TO_AVERAGE,t=[],n=0,r=0;for(var i=0;i<M.FRAME_COUNT_TO_AVERAGE;i++)t[i]=1}catch(o){throw console.log("GraphicsManager: "+o),o}Object.defineProperty(this,"average",{get:function(){return r}}),this.update=function(i){var o=.001*i;e+=o-t[n],t[n]=o,n++,n===M.FRAME_COUNT_TO_AVERAGE&&(n=0),r=Math.floor(1/(e/M.FRAME_COUNT_TO_AVERAGE)+.5)}}function z(){function e(){return(new Date).getTime()}var t=0,n=0;Object.defineProperty(this,"isRunning",{get:function(){return 0!==t?!0:!1}}),Object.defineProperty(this,"elapsedMilliseconds",{get:function(){return n+(this.isRunning===!0)?e()-t:0}}),this.start=function(){t=this.isRunning===!0?t:e()},this.stop=function(){n=this.isRunning===!0?n+(e()-t):n,t=0},this.reset=function(){t=0,n=0}}function j(e,t,n){var r,i,o;switch(e){case H.EASE_IN:r=-a.PI_OVER_TWO,i=0;break;case H.EASE_OUT:r=0,i=a.PI_OVER_TWO;break;case H.EASE_IN_OUT:r=-a.PI_OVER_TWO,i=a.PI_OVER_TWO;break;default:throw"A not-supported exception raised."}o=new z,Object.defineProperty(this,"easeMode",{get:function(){return e}}),Object.defineProperty(this,"duration",{get:function(){return t}}),Object.defineProperty(this,"sineOfStartAngle",{get:function(){return Math.sin(r)}}),Object.defineProperty(this,"sineOfCurrentAngle",{get:function(){var e=i-r;return Math.sin(r+e*this.ratioOfCurrentToTotalTimeOffset)}}),Object.defineProperty(this,"sineOfFinishAngle",{get:function(){return Math.sin(i)}}),Object.defineProperty(this,"ratioOfCurrentToTotalTimeOffset",{get:function(){if(n===!1)return this.isFinished===!0?1:o.elapsedMilliseconds/t;var e=o.elapsedMilliseconds%t;return e/t}}),Object.defineProperty(this,"ratioOfCurrentToTotalSineOfAngleOffset",{get:function(){var e=this.sineOfCurrentAngle-this.sineOfStartAngle,t=this.sineOfFinishAngle-this.sineOfStartAngle;return e/t}}),Object.defineProperty(this,"isRunning",{get:function(){return o.isRunning}}),Object.defineProperty(this,"isFinished",{get:function(){if(n===!0)return!1;var e=t<=o.elapsedMilliseconds?!0:!1;return e===!0&&o.stop(),e}}),this.start=function(){o.isRunning!==!0&&o.start()},this.pause=function(){o.isRunning!==!1&&o.stop()},this.resume=function(){o.isRunning!==!0&&o.start()},this.stop=function(){o.reset()}}t.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","attribute vec4 vertexColor;","uniform mat4 transform;","varying vec4 color;","void main() {","gl_Position = transform * vec4(vertexPosition, 1.0);","color = vertexColor;","}"].join("\n"),t.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 color;","void main() {","gl_FragColor = color;","}"].join("\n"),Object.freeze(t),n.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","uniform mat4 transform;","void main() {","gl_Position = transform * vec4(vertexPosition, 1.0);","}"].join("\n"),n.FRAGMENT_SHADER_SOURCE=["precision mediump float;","void main() {","gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","}"].join("\n"),Object.freeze(n),r.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","attribute vec2 vertexTextureCoordinates;","uniform mat4 transform;","varying vec2 textureCoordinates;","void main() {","gl_Position = transform * vec4(vertexPosition, 1.0);","textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),r.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec2 textureCoordinates;","uniform sampler2D sampler;","void main() {","gl_FragColor = texture2D(sampler, textureCoordinates);","}"].join("\n"),Object.freeze(r),i.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec4 vertexPosition;","attribute vec4 vertexColor;","varying vec4 color;","void main() {","gl_Position = vertexPosition;","color = vertexColor;","}"].join("\n"),i.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 color;","void main() {","gl_FragColor = color;","}"].join("\n"),Object.freeze(i),o.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec4 vertexPosition;","attribute vec4 vertexColor;","attribute vec2 vertexTextureCoordinates;","varying vec4 color;","varying vec2 textureCoordinates;","void main() {","gl_Position = vertexPosition;","color = vertexColor;","textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),o.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 color;","varying vec2 textureCoordinates;","uniform sampler2D sampler;","void main() {","gl_FragColor = color * texture2D(sampler, textureCoordinates);","}"].join("\n"),Object.freeze(o),c.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec4 vertexPosition;","attribute vec2 vertexTextureCoordinates;","varying vec2 textureCoordinates;","void main() {","gl_Position = vertexPosition;","textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),c.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec2 textureCoordinates;","uniform sampler2D sampler;","void main() {","gl_FragColor = texture2D(sampler, textureCoordinates);","}"].join("\n"),Object.freeze(c),u.prototype={setItems:function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.webGLBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),t.STATIC_DRAW)}},Object.defineProperty(u.prototype,"items",{set:function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,buffer.webGLBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(items),t.STATIC_DRAW)}}),Object.freeze(u),a.PI=3.141592653589793,a.PI_OVER_TWO=1.5707963267948966,a.PI_OVER_FOUR=.7853981633974483,a.TWO_PI=6.283185307179586,a.PI_OVER_ONE_EIGHTY=.0174532925199432,a.ONE_EIGHTY_OVER_PI=57.29577951308232,a.RADIANS_OF_FORTY_FIVE_DEGREES=a.PI_OVER_FOUR,a.RADIANS_OF_NINETY_DEGREES=a.PI_OVER_TWO,a.RADIANS_OF_ONE_EIGHTY_DEGREES=a.PI,a.RADIANS_OF_THREE_SIXTY_DEGREES=a.TWO_PI,a.EPSILON=1e-5,a.toRadians=function(e){if("number"!=typeof e)throw"typeof(degrees) !== 'number'";return a.PI_OVER_ONE_EIGHTY*e},a.toDegrees=function(e){if("number"!=typeof e)throw"typeof(degrees) !== 'number'";return a.ONE_EIGHTY_OVER_PI*e},a.isZero=function(e){if("number"!=typeof e)throw"typeof(s) !== 'number'";return e<=-a.EPSILON||a.EPSILON<=e?!1:!0},a.areEqual=function(e,t){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof t)throw"typeof(s2) !== 'number'";var n=e-t;return n<=-a.EPSILON||a.EPSILON<=n?!1:!0},a.isScalar1LessThanScalar2=function(e,t){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof t)throw"typeof(s2) !== 'number'";return e-t<=-a.EPSILON?!0:!1},a.isScalar1LessThanOrEqualToScalar2=function(e,t){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof t)throw"typeof(s2) !== 'number'";return e-t<a.EPSILON?!0:!1},a.isScalar1GreaterThanScalar2=function(e,t){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof t)throw"typeof(s2) !== 'number'";return a.EPSILON<=e-t?!0:!1},a.isScalar1GreaterThanOrEqualToScalar2=function(e,t){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof t)throw"typeof(s2) !== 'number'";return-a.EPSILON<e-t?!0:!1},a.isPowerOfTwo=function(e){if("number"!=typeof e)throw"typeof(s) !== 'number'";return 0!==e&&0===(e&e-1)?!0:!1},Object.freeze(a),Object.freeze(s),f.VERTEX_SHADER=0,f.FRAGMENT_SHADER=1,Object.freeze(f),Object.freeze(E),_.prototype={setItems:function(e,t){var n=this.gl;this.size=t,n.bindBuffer(n.ARRAY_BUFFER,this.webGLBuffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array(e),n.STATIC_DRAW)}},Object.freeze(_),Object.freeze(O),l.X=0,l.Y=1,l.Z=2,Object.freeze(l),T.ELEMENT_COUNT=16,T.fromArray=function(e){return new T(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},T.createIdentityMatrix=function(){return new T(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},T.createViewMatrix=function(e,t,n){var r,i,o,c;c=d.negateVector(t),o=d.calculateUnitVectorOf(c),c=d.calculateCrossProductOf(n,o),r=d.calculateUnitVectorOf(c),i=d.calculateCrossProductOf(o,r);var u=r.x,a=i.x,s=o.x,f=0,E=r.y,_=i.y,O=o.y,l=0,A=r.z,h=i.z,P=o.z,R=0,y=-d.calculateDotProductOf(r,e),g=-d.calculateDotProductOf(i,e),w=-d.calculateDotProductOf(o,e),p=1;return new T(u,E,A,y,a,_,h,g,s,O,P,w,f,l,R,p)},T.createProjectionMatrix=function(e,t,n,r){void 0===e&&(e=g.FIELD_OF_VIEW_Y),void 0===n&&(n=g.DEFAULT_DISTANCE_TO_NEAR_PLANE),void 0===r&&(r=g.DEFAULT_DISTANCE_TO_FAR_PLANE);var i,o;o=1/Math.tan(e/2),i=o/t;var c=[];return c[0]=i,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=o,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=r/(n-r),c[11]=-1,c[12]=0,c[13]=0,c[14]=n*r/(n-r),c[15]=0,T.fromArray(c)},T.createScaleMatrix=function(e){return new T(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},T.createRotationMatrix=function(e,t){var n=Math.cos(t),r=Math.sin(t);switch(e){case l.X:return new T(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1);case l.Y:return new T(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1);case l.Z:return new T(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1);default:console.log("A not-supported exception raised.")}},T.createTranslationMatrix=function(e){return new T(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1)},T.multiplyMatrices=function(e,t){var n=e.elements,r=t.elements,i=[],o=n[0],c=n[4],u=n[8],a=n[12],s=n[1],f=n[5],E=n[9],_=n[13],O=n[2],l=n[6],A=n[10],h=n[14],P=n[3],d=n[7],R=n[11],y=n[15],g=r[0],w=r[4],p=r[8],m=r[12],S=r[1],x=r[5],b=r[9],L=r[13],N=r[2],v=r[6],D=r[10],I=r[14],C=r[3],U=r[7],F=r[11],H=r[15];return i[0]=o*g+c*S+u*N+a*C,i[4]=o*w+c*x+u*v+a*U,i[8]=o*p+c*b+u*D+a*F,i[12]=o*m+c*L+u*I+a*H,i[1]=s*g+f*S+E*N+_*C,i[5]=s*w+f*x+E*v+_*U,i[9]=s*p+f*b+E*D+_*F,i[13]=s*m+f*L+E*I+_*H,i[2]=O*g+l*S+A*N+h*C,i[6]=O*w+l*x+A*v+h*U,i[10]=O*p+l*b+A*D+h*F,i[14]=O*m+l*L+A*I+h*H,i[3]=P*g+d*S+R*N+y*C,i[7]=P*w+d*x+R*v+y*U,i[11]=P*p+d*b+R*D+y*F,i[15]=P*m+d*L+R*I+y*H,T.fromArray(i)},T.transposeMatrix=function(e){return new T(e.s11,e.s21,e.s31,e.s41,e.s12,e.s22,e.s32,e.s42,e.s13,e.s23,e.s33,e.s43,e.s14,e.s24,e.s34,e.s44)},T.invertMatrix=function(e){var t=e.s11,n=e.s12,r=e.s13,i=e.s14,o=e.s21,c=e.s22,u=e.s23,a=e.s24,s=e.s31,f=e.s32,E=e.s33,_=e.s34,O=e.s41,l=e.s42,A=e.s43,h=e.s44,P=u*_*l-a*E*l+a*f*A-c*_*A-u*f*h+c*E*h,d=i*E*l-r*_*l-i*f*A+n*_*A+r*f*h-n*E*h,R=r*a*l-i*u*l+i*c*A-n*a*A-r*c*h+n*u*h,y=i*u*f-r*a*f-i*c*E+n*a*E+r*c*_-n*u*_,g=t*P+o*d+s*R+O*y;if(0===g)throw"Can't invert matrix cuz determinant is 0";return g=1/g,T.fromArray([P*g,(a*E*O-u*_*O-a*s*A+o*_*A+u*s*h-o*E*h)*g,(c*_*O-a*f*O+a*s*l-o*_*l-c*s*h+o*f*h)*g,(u*f*O-c*E*O-u*s*l+o*E*l+c*s*A-o*f*A)*g,d*g,(r*_*O-i*E*O+i*s*A-t*_*A-r*s*h+t*E*h)*g,(i*f*O-n*_*O-i*s*l+t*_*l+n*s*h-t*f*h)*g,(n*E*O-r*f*O+r*s*l-t*E*l-n*s*A+t*f*A)*g,R*g,(i*u*O-r*a*O-i*o*A+t*a*A+r*o*h-t*u*h)*g,(n*a*O-i*c*O+i*o*l-t*a*l-n*o*h+t*c*h)*g,(r*c*O-n*u*O-r*o*l+t*u*l+n*o*A-t*c*A)*g,y*g,(r*a*s-i*u*s+i*o*E-t*a*E-r*o*_+t*u*_)*g,(i*c*s-n*a*s-i*o*f+t*a*f+n*o*_-t*c*_)*g,(n*u*s-r*c*s+r*o*f-t*u*f-n*o*E+t*c*E)*g])},T.areEqual=function(e,t){if(e instanceof T==!1||t instanceof T==!1)return!1;for(var n=e.elements,r=t.elements,i=0;i<T.ELEMENT_COUNT;i++)if(n[i]!==r[i])return!1;return!0},Object.freeze(T),A.prototype={toMatrix4x4:function(){var e=this.x,t=this.y,n=this.z,r=this.w,i=e*e,o=t*t,c=n*n,u=e*t,a=n*r,s=n*e,f=t*r,E=t*n,_=e*r,O=[1-2*(o+c),2*(u+a),2*(s-f),0,2*(u-a),1-2*(c+i),2*(E+_),0,2*(s+f),2*(E-_),1-2*(o+i),0,0,0,0,1];return T.fromArray(O)}},A.ELEMENT_COUNT=4,A.fromAxisAngle=function(e,t){e=d.calculateUnitVectorOf(e);var n=.5*t,r=Math.sin(n),i=Math.cos(n);return new A(e.x*r,e.y*r,e.z*r,i)},A.fromArray=function(e){return new A(e[0],e[1],e[2],e[3])},A.createIdentityQuaternion=function(){return new A(0,0,0,1)},A.calculateUnitQuaternionOf=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w);if(t<a.EPSILON)return new A(0,0,0,0);var n=1/t;return new A(e.x*n,e.y*n,e.z*n,e.w*n)},A.areEqual=function(e,t){return e instanceof A==!1||t instanceof A==!1?!1:e.x!==t.x||e.y!==t.y||e.z!==t.z||e.w!==t.w?!1:!0},Object.freeze(A),h.prototype={toArray:function(){return[this.x,this.y]}},h.ELEMENT_COUNT=2,h.fromArray=function(e){return new h(e[0],e[1])},h.calculateUnitVectorOf=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y);if(t<a.EPSILON)return new h(0,0);var n=1/t;return new h(e.x*n,e.y*n)},h.negateVector=function(e){return new h(-e.x,-e.y)},h.addVectors=function(e,t){return new h(e.x+t.x,e.y+t.y)},h.subtractVectors=function(e,t){return new h(e.x-t.x,e.y-t.y)},h.multiplyVectorByScalar=function(e,t){return new h(e.x*t,e.y*t)},h.calculateLengthOf=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},h.calculateLengthSquaredOf=function(e){return e.x*e.x+e.y*e.y},h.calculateDotProductOf=function(e,t){return e.x*t.x+e.y*t.y},h.calculatePerpendicularVectorOf=function(e){return new h(-e.y,e.x)},h.calculatePerpendicularDotProductOf=function(e,t){return-e.y*t.x+e.x*t.y},h.areEqual=function(e,t){return e instanceof h==!1||t instanceof h==!1?!1:e.x!==t.x||e.y!==t.y?!1:!0},Object.freeze(h),P.prototype={toArray:function(){return[this.x,this.y,this.z,this.w]}},Object.defineProperty(P.prototype,"xyz",{get:function(){return new d(this.x,this.y,this.z)}}),P.ELEMENT_COUNT=4,P.fromArray=function(e){return new P(e[0],e[1],e[2],e[3])},P.calculateUnitVectorOf=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w);if(t<a.EPSILON)return new P(0,0,0,0);var n=1/t;return new P(e.x*n,e.y*n,e.z*n,e.w*n)},P.addVectors=function(e,t){return new P(e.x+t.x,e.y+t.y,e.z+t.z,e.w+t.w)},P.subtractVectors=function(e,t){return new P(e.x-t.x,e.y-t.y,e.z-t.z,e.w-t.w)},P.multiplyVectorByScalar=function(e,t){return new P(e.x*t,e.y*t,e.z*t,e.w*t)},P.calculateLengthOf=function(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w)},P.calculateLengthSquaredOf=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},P.transform=function(e,t){return new P(e.s11*t.x+e.s12*t.y+e.s13*t.z+e.s14*t.w,e.s21*t.x+e.s22*t.y+e.s23*t.z+e.s24*t.w,e.s31*t.x+e.s32*t.y+e.s33*t.z+e.s34*t.w,e.s41*t.x+e.s42*t.y+e.s43*t.z+e.s44*t.w)},P.areEqual=function(e,t){return e instanceof P==!1||t instanceof P==!1?!1:e.x!==t.x||e.y!==t.y||e.z!==t.z||e.w!==t.w?!1:!0},Object.freeze(P),d.prototype={toArray:function(){return[this.x,this.y,this.z]}},Object.defineProperty(d.prototype,"xy",{get:function(){return new h(this.x,this.y)}}),d.ELEMENT_COUNT=3,d.fromArray=function(e){return new d(e[0],e[1],e[2])},d.calculateUnitVectorOf=function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);if(t<a.EPSILON)return new d(0,0,0);var n=1/t;return new d(e.x*n,e.y*n,e.z*n)},d.negateVector=function(e){return new d(-e.x,-e.y,-e.z)},d.addVectors=function(e,t){return new d(e.x+t.x,e.y+t.y,e.z+t.z)},d.subtractVectors=function(e,t){return new d(e.x-t.x,e.y-t.y,e.z-t.z)},d.multiplyVectorByScalar=function(e,t){return new d(e.x*t,e.y*t,e.z*t)},d.calculateLengthOf=function(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)},d.calculateLengthSquaredOf=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},d.calculateDotProductOf=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},d.calculateCrossProductOf=function(e,t){return new d(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z,e.x*t.y-e.y*t.x)},d.transformPoint=function(e,t){var n=new P(t.x,t.y,t.z,1),r=P.Transform(e,n),i=1/r.w;return new d(r.x*i,r.y*i,r.z*i)},d.transformVector=function(e,t){var n=new P(t.x,t.y,t.z,0);return t=P.Transform(e,n),new d(t.x,t.y,t.z)},d.transform=function(e,t){var n=t.X+t.X,r=t.Y+t.Y,i=t.Z+t.Z,o=t.W*n,c=t.W*r,u=t.W*i,a=t.X*n,s=t.X*r,f=t.X*i,E=t.Y*r,_=t.Y*i,O=t.Z*i,l=1-E-O,T=s-u,A=f+c,h=s+u,P=1-a-O,R=_-o,y=f-c,g=_+o,w=1-a-E;return new d(e.X*l+e.Y*T+e.Z*A,e.X*h+e.Y*P+e.Z*R,e.X*y+e.Y*g+e.Z*w)},d.areEqual=function(e,t){return e instanceof d==!1||t instanceof d==!1?!1:e.x!==t.x||e.y!==t.y||e.z!==t.z?!1:!0},Object.freeze(d),R.X_AXIS=new d(1,0,0),R.Y_AXIS=new d(0,1,0),R.Z_AXIS=new d(0,0,1),Object.freeze(R),Object.freeze(y),g.DEFAULT_FACING_DIRECTION=d.negateVector(R.Z_AXIS),g.DEFAULT_UP_DIRECTION=R.Y_AXIS,g.FIELD_OF_VIEW_Y=a.PI_OVER_FOUR,g.MIN_DISTANCE_TO_NEAR_PLANE=10,g.MAX_DISTANCE_TO_FAR_PLANE=1e6,g.DEFAULT_DISTANCE_TO_NEAR_PLANE=g.MIN_DISTANCE_TO_NEAR_PLANE,g.DEFAULT_DISTANCE_TO_FAR_PLANE=1e5,Object.freeze(g),w.fromDisplayToDrawSpace=function(e,t){return{x:t.x/e.clientWidth*e.width,y:t.y/e.clientHeight*e.height}},w.fromDrawToDisplaySpace=function(e,t){return{x:t.x/e.width*e.clientWidth,y:t.y/e.height*e.clientHeight}},Object.freeze(w),p.COLOR_BUFFER=16384,p.DEPTH_BUFFER=256,p.STENCIL_BUFFER=1024,Object.freeze(p),m.prototype={toArray:function(){return[this.r,this.g,this.b,this.a]}},m.areEqual=function(e,t){return e instanceof m==!1||t instanceof m==!1?!1:e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a?!1:!0},Object.freeze(m),S.DEFAULT_BACKGROUND=new m(32/255,32/255,32/255,1),S.BLACK=new m(0,0,0,1),S.WHITE=new m(1,1,1,1),S.TRANSPARENT=new m(1,1,1,0),S.SKY_BLUE=new m(135/255,206/255,235/255,1),S.CADET_BLUE=new m(95/255,158/255,160/255,1),S.PINK=new m(1,192/255,203/255,1),S.PHOTOSHOP_DARK_RED=new m(157/255,10/255,14/255,1),S.PHOTOSHOP_PASTEL_RED_ORANGE=new m(255,173/255,129/255,1),S.PHOTOSHOP_DARK_RED_ORANGE=new m(255,65/255,13/255,1),S.PHOTOSHOP_PASTEL_YELLOW_ORANGE=new m(253/255,198/255,137/255,1),S.PHOTOSHOP_DARK_YELLOW_ORANGE=new m(163/255,97/255,9/255,1),S.PHOTOSHOP_PASTEL_YELLOW=new m(1,247/255,.6,1),S.PHOTOSHOP_DARK_YELLOW=new m(171/255,160/255,0,1),S.PHOTOSHOP_PASTEL_PEA_GREEN=new m(196/255,223/255,155/255,1),S.PHOTOSHOP_DARK_PEA_GREEN=new m(89/255,133/255,39/255,1),S.PHOTOSHOP_PASTEL_YELLOW_GREEN=new m(162/255,211/255,156/255,1),S.PHOTOSHOP_DARK_YELLOW_GREEN=new m(25/255,122/255,48/255,1),S.PHOTOSHOP_PASTEL_GREEN=new m(130/255,202/255,156/255,1),S.PHOTOSHOP_DARK_GREEN=new m(0,114/255,54/255,1),S.PHOTOSHOP_PASTEL_GREEN_CYAN=new m(122/255,.8,200/255,1),S.PHOTOSHOP_DARK_GREEN_CYAN=new m(0,115/255,106/255,1),S.PHOTOSHOP_PASTEL_CYAN=new m(109/255,207/255,246/255,1),S.PHOTOSHOP_DARK_CYAN=new m(0,118/255,163/255,1),S.PHOTOSHOP_PASTEL_CYAN_BLUE=new m(125/255,167/255,216/255,1),S.PHOTOSHOP_DARK_CYAN_BLUE=new m(0,74/255,128/255,1),S.PHOTOSHOP_PASTEL_BLUE=new m(131/255,147/255,202/255,1),S.PHOTOSHOP_DARK_BLUE=new m(0,52/255,113/255,1),S.PHOTOSHOP_PASTEL_BLUE_VIOLET=new m(135/255,129/255,189/255,1),S.PHOTOSHOP_DARK_BLUE_VIOLET=new m(27/255,20/255,100/255,1),S.PHOTOSHOP_PASTEL_VIOLET=new m(161/255,134/255,190/255,1),S.PHOTOSHOP_DARK_VIOLET=new m(68/255,14/255,98/255,1),S.PHOTOSHOP_PASTEL_VIOLET_MAGENTA=new m(188/255,140/255,191/255,1),S.PHOTOSHOP_DARK_VIOLET_MAGENTA=new m(98/255,4/255,96/255,1),S.PHOTOSHOP_PASTEL_MAGENTA=new m(244/255,154/255,193/255,1),S.PHOTOSHOP_DARK_MAGENTA=new m(158/255,0,93/255,1),S.PHOTOSHOP_PASTEL_MAGENTA_RED=new m(245/255,152/255,157/255,1),S.PHOTOSHOP_DARK_MAGENTA_RED=new m(157/255,0,57/255,1),S.PHOTOSHOP_PALE_COOL_BROWN=new m(199/255,178/255,.6,1),S.PHOTOSHOP_DARK_COOL_BROWN=new m(83/255,71/255,65/255,1),S.PHOTOSHOP_PALE_WARM_BROWN=new m(198/255,156/255,109/255,1),S.PHOTOSHOP_DARK_WARM_BROWN=new m(117/255,76/255,36/255,1),S.OSX_SOLID_KELP=new m(89/255,136/255,123/255,1),Object.freeze(S),x.NEAR_CLIP_PLANE=0,x.FAR_CLIP_PLANE=1,Object.freeze(x),b.CANVAS_WIDTH=1024,b.CANVAS_HEIGHT=1024,b.DEFAULT_CLEAR_OPTIONS=p.COLOR_BUFFER|p.DEPTH_BUFFER,b.DEFAULT_CLEAR_COLOR=S.DEFAULT_BACKGROUND,b.DEFAULT_CLEAR_DEPTH=1,b.DEFAULT_CLEAR_STENCIL=0,b.DEFAULT_TEXTURE_UNIT=0,Object.freeze(b),L.MIN_X=-1,L.MAX_X=1,L.MIN_Y=-1,L.MAX_Y=1,L.MIN_Z=-1,L.MAX_Z=1,Object.freeze(L),N.LINE_LIST=1,N.LINE_STRIP=3,N.TRIANGLE_LIST=4,N.TRIANGLE_STRIP=5,Object.freeze(N),v.toClipSpace=function(e,t){return new P(L.MIN_X+t.x/e.clientWidth*(L.MAX_X-L.MIN_X),L.MIN_Y+t.y/e.clientHeight*(L.MAX_Y-L.MIN_Y),L.MIN_Z+t.z*(L.MAX_Z-L.MIN_Z),1)},Object.freeze(v),D.toUV=function(e,t){return{u:e,v:1-t}},D.toST=function(e,t){return{s:e,t:1-t}},Object.freeze(D),I.displayMessageOf=function(e){alert(e)},Object.freeze(I),C.LEFT=0,C.MIDDLE=1,C.RIGHT=2,Object.freeze(C),Object.freeze(U),Object.freeze(F),H.EASE_IN=0,H.EASE_OUT=1,H.EASE_IN_OUT=2,Object.freeze(H),M.FRAME_COUNT_TO_AVERAGE=16,Object.freeze(M),Object.freeze(z),Object.freeze(j),e.PositionColor=t,e.PositionOnly=n,e.PositionTextureCoordinates=r,e.TransformedPositionColor=i,e.TransformedPositionColorTextureCoordinates=o,e.TransformedPositionTextureCoordinates=c,e.AssetManager=O,e.Camera=g,e.CanvasCoordinateHelper=w,e.ClearOptions=p,e.Color=m,e.Colors=S,e.DepthBufferValues=x,e.GraphicsManager=b,e.IndexBuffer=u,e.NormalizedDeviceCoordinates=L,e.PrimitiveType=N,e.ScreenCoordinateHelper=v,e.ShaderType=f,e.Texture2D=E,e.TextureCoordinateHelper=D,e.VertexBuffer=_,e.ExceptionHelper=I,e.MouseButton=C,e.AxisGroup=R,e.MathHelper=a,e.Vector2D=h,e.Vector3D=d,e.Vector4D=P,e.Matrix4x4=T,e.CartesianAxis=l,e.Plane=U,e.Quaternion=A,e.ViewFrustum=y,e.Xcene=F,e.EaseMode=H,e.Fps=M,e.SineEase=j,e.Stopwatch=z}(this.GorillaGL=this.GorillaGL||{});
