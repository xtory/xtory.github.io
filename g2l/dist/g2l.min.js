!function(e){"use strict";function t(){}function r(){}function n(e,t,r,o,i,a,c,u,E,s,f,_,O,T,l,d){this.db=new Float32Array(n.ELEMENT_COUNT),this.db[0]=e,this.db[4]=t,this.db[8]=r,this.db[12]=o,this.db[1]=i,this.db[5]=a,this.db[9]=c,this.db[13]=u,this.db[2]=E,this.db[6]=s,this.db[10]=f,this.db[14]=_,this.db[3]=O,this.db[7]=T,this.db[11]=l,this.db[15]=d}function o(e,t,r,n){this.x=e,this.y=t,this.z=r,this.w=n}function i(e,t){this.x=e,this.y=t}function a(e,t,r,n){this.x=e,this.y=t,this.z=r,this.w=n}function c(e,t,r){this.x=e,this.y=t,this.z=r}function u(){}function E(){}function s(e,r,o,i,a,u){function f(){h!==!1&&(l=n.createViewMatrix(r,o,i),p=!0,h=!1)}function _(){var e=T.clientWidth/T.clientHeight;(S!==!1||t.areEqual(e,g)!==!0)&&(g=e,d=n.createProjectionMatrix(s.FIELD_OF_VIEW_Y,g,a,u),p=!0,S=!1)}var O,T,l,d,A,R,h,S,p,g;try{O=this,void 0===r&&(r=new c(0,0,1e4)),void 0===o&&(o=s.DEFAULT_FACING_DIRECTION),void 0===i&&(i=s.DEFAULT_UP_DIRECTION),void 0===a&&(a=s.DEFAULT_DISTANCE_TO_NEAR_PLANE),void 0===u&&(u=s.DEFAULT_DISTANCE_TO_FAR_PLANE),a<s.MIN_DISTANCE_TO_NEAR_PLANE&&(a=s.MIN_DISTANCE_TO_NEAR_PLANE),s.MAX_DISTANCE_TO_FAR_PLANE<u&&(u=s.MAX_DISTANCE_TO_FAR_PLANE),T=e.canvas,R=new E,h=!0,S=!0,p=!0}catch(y){throw console.log("g2l.Camera: ",y),y}Object.defineProperty(O,"renderer",{get:function(){return e}}),Object.defineProperty(O,"position",{get:function(){return r},set:function(e){r=e}}),Object.defineProperty(O,"facingDirection",{get:function(){return o},set:function(e){o=e}}),Object.defineProperty(O,"upDirection",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(O,"distanceToNearPlane",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(O,"distanceToFarPlane",{get:function(){return u},set:function(e){u=e}}),Object.defineProperty(O,"viewFrustum",{get:function(){return R}}),this.invalidateViewMatrix=function(){h=!0},this.invalidateProjectionMatrix=function(){S=!0},this.getProjectionMatrix=function(e){_(),e.db=d.db.slice()},this.getTransform=function(e){f(),_(),p===!0&&(A=n.multiplyMatrices(d,l)),e.db=A.db.slice(),p===!0&&(p=!1)}}function f(e){this.camera=e}function _(){}function O(e){f.call(this,e)}function T(){}function l(){function e(){return(new Date).getTime()}var t,r,n;try{t=this,r=0,n=0}catch(o){throw console.log("g2l.Stopwatch: "+o),o}Object.defineProperty(t,"isRunning",{get:function(){return 0!==r?!0:!1}}),Object.defineProperty(t,"elapsedMilliseconds",{get:function(){return n+(t.isRunning===!0)?e()-r:0}}),this.start=function(){r=t.isRunning===!0?r:e()},this.stop=function(){n=t.isRunning===!0?n+(e()-r):n,r=0},this.reset=function(){r=0,n=0}}function d(e,r,n){var o,i,a,c;try{switch(o=this,e){case T.EASE_IN:i=-t.PI_OVER_TWO,a=0;break;case T.EASE_OUT:i=0,a=t.PI_OVER_TWO;break;case T.EASE_IN_OUT:i=-t.PI_OVER_TWO,a=t.PI_OVER_TWO;break;default:throw"A not-supported exception raised."}c=new l}catch(u){throw console.log("g2l.SineEase: "+u),u}Object.defineProperty(o,"easeMode",{get:function(){return e}}),Object.defineProperty(o,"duration",{get:function(){return r}}),Object.defineProperty(o,"sineOfStartAngle",{get:function(){return Math.sin(i)}}),Object.defineProperty(o,"sineOfCurrentAngle",{get:function(){var e=a-i;return Math.sin(i+e*o.ratioOfCurrentToTotalTimeOffset)}}),Object.defineProperty(o,"sineOfFinishAngle",{get:function(){return Math.sin(a)}}),Object.defineProperty(o,"ratioOfCurrentToTotalTimeOffset",{get:function(){if(n===!1)return o.isFinished===!0?1:c.elapsedMilliseconds/r;var e=c.elapsedMilliseconds%r;return e/r}}),Object.defineProperty(o,"ratioOfCurrentToTotalSineOfAngleOffset",{get:function(){var e=o.sineOfCurrentAngle-o.sineOfStartAngle,t=o.sineOfFinishAngle-o.sineOfStartAngle;return e/t}}),Object.defineProperty(o,"isRunning",{get:function(){return c.isRunning}}),Object.defineProperty(o,"isFinished",{get:function(){if(n===!0)return!1;var e=r<=c.elapsedMilliseconds?!0:!1;return e===!0&&c.stop(),e}}),this.start=function(){c.isRunning!==!0&&c.start()},this.pause=function(){c.isRunning!==!1&&c.stop()},this.resume=function(){c.isRunning!==!0&&c.start()},this.stop=function(){c.reset()}}function A(e,t,r,n,o){f.call(this,e);var i,a,c;try{i=this,c=0,a=new d(T.EASE_OUT,r,!1),a.start()}catch(u){throw console.log("g2l.CameraStateZooming: ",u),u}Object.defineProperty(i,"sineEase",{get:function(){return a}}),Object.defineProperty(i,"distance",{get:function(){return t}}),Object.defineProperty(i,"zoomedDistance",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(i,"updatingCallback",{get:function(){return n}}),Object.defineProperty(i,"finishingCallback",{get:function(){return o}})}function R(e,t,r,n,o,i){s.call(this,e,t,r,n,o,i);var a,c,u;try{a=this,c=new O(a),u=R.DEFAULT_ZOOM_DURATION}catch(E){throw console.log("g2l.SmoothCamera: ",E),E}Object.defineProperty(a,"state",{get:function(){return c},set:function(e){e!==c&&(c=e)}}),Object.defineProperty(a,"zoomingDuration",{get:function(){return u},set:function(e){u=e}}),this.update=function(){c.update()},this.zoom=function(e){c instanceof A!=!0&&(a.state=new A(a,e,u))},this.baseZoom=function(e){s.prototype.zoom.call(a,e)}}function h(){}function S(){}function p(e,t,r,n){void 0===n&&(n=1),this.r=e,this.g=t,this.b=r,this.a=n}function g(){}function y(){}function P(e){var t,r,n;try{t=this,r=e.loader.renderer.gl,n=r.createBuffer()}catch(o){throw console.log("g2l.IndexBuffer: "+o),o}Object.defineProperty(t,"bufferLoader",{get:function(){return e}}),Object.defineProperty(t,"webGLBuffer",{get:function(){return n}})}function x(e){var t,r,n,o;try{t=this,r=e.loader.renderer.gl,n=r.createBuffer()}catch(i){throw console.log("g2l.VertexBuffer: "+i),i}Object.defineProperty(t,"bufferLoader",{get:function(){return e}}),Object.defineProperty(t,"webGLBuffer",{get:function(){return n}}),Object.defineProperty(t,"size",{get:function(){return o},set:function(e){o=e}})}function C(e){var t,r;try{t=this,r=e.renderer.gl}catch(n){throw console.log("g2l.BufferLoader: "+n),n}Object.defineProperty(t,"loader",{get:function(){return e}}),this.createVertexBuffer=function(){return new x(t)},this.createIndexBuffer=function(){return new P(t)}}function L(e){var t,r,n;try{t=this,r=e.loader.renderer.gl,n=r.createProgram()}catch(o){throw console.log("g2l.Program: "+o),o}Object.defineProperty(t,"programLoader",{get:function(){return e}}),Object.defineProperty(t,"webGLProgram",{get:function(){return n}})}function b(){}function D(e){function t(e,t){var r;if(e===b.VERTEX_SHADER)r=i.createShader(i.VERTEX_SHADER);else{if(e!==b.FRAGMENT_SHADER)return null;r=i.createShader(i.FRAGMENT_SHADER)}if(i.shaderSource(r,t),i.compileShader(r),i.getShaderParameter(r,i.COMPILE_STATUS)===!1){var n=i.getShaderInfoLog(r);throw i.deleteShader(r),"An error occurred compiling the shaders: "+n}return r}function r(e){var t=document.getElementById(e);if(null===t)return null;for(var r="",n=t.firstChild;null!==n;)n.nodeType===Node.TEXT_NODE&&(r+=n.textContent),n=n.nextSibling;var o;if("x-shader/x-vertex"===t.type)o=i.createShader(i.VERTEX_SHADER);else{if("x-shader/x-fragment"!==t.type)return null;o=i.createShader(i.FRAGMENT_SHADER)}if(i.shaderSource(o,r),i.compileShader(o),i.getShaderParameter(o,i.COMPILE_STATUS)===!1){var a=i.getShaderInfoLog(o);throw i.deleteShader(o),"An error occurred compiling the shaders: "+a}return o}function n(e,t){var r=new L(o),n=r.webGLProgram;if(i.attachShader(n,e),i.attachShader(n,t),i.linkProgram(n),i.getProgramParameter(n,i.LINK_STATUS)===!1){var a=i.getProgramInfoLog(n);throw i.deleteProgram(n),"Unable to initialize the (shader) program: "+a}return r}var o,i;try{o=this,i=e.renderer.gl}catch(a){throw console.log("g2l.ProgramLoader: "+a),a}Object.defineProperty(o,"loader",{get:function(){return e}}),this.setUpProgram=function(e,r){var o=t(b.VERTEX_SHADER,e),i=t(b.FRAGMENT_SHADER,r);return n(o,i)},this.setUpProgramFromHtmlElements=function(e,t){var o=r(b.VERTEX_SHADER,e),i=r(b.FRAGMENT_SHADER,t);return n(o,i)}}function v(e){var t,r,n,o,i;try{t=this,r=e.loader.renderer.gl}catch(a){throw console.log("g2l.Texture2D: "+a),a}Object.defineProperty(t,"loader",{get:function(){return _loader}}),Object.defineProperty(t,"width",{get:function(){return n},set:function(e){n=e}}),Object.defineProperty(t,"height",{get:function(){return o},set:function(e){o=e}}),Object.defineProperty(t,"webGLTexture",{get:function(){return i},set:function(e){i=e}})}function I(e){function r(){return i.createTexture()}function n(e,r){i.bindTexture(i.TEXTURE_2D,r),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e),t.isPowerOfTwo(e.width)===!0&&t.isPowerOfTwo(e.height)===!0?(i.generateMipmap(i.TEXTURE_2D),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR)):i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null)}var o,i,a;try{o=this,i=e.renderer.gl,a={}}catch(c){throw console.log("g2l.TextureLoader: "+c),c}Object.defineProperty(o,"loader",{get:function(){return e}}),this.loadTexture2D=function(e){if(void 0===e)throw"An argument-undefined exception raised.";var t=a[e];if(void 0!==t)return t;var t=new v(o);a[e]=t;var i=new Image;return i.addEventListener("load",function(){var e=r();n(i,e),t.width=i.width,t.height=i.height,t.webGLTexture=e}),i.src=e,t}}function N(e){function t(){n=e.gl,Object.defineProperty(r,"renderer",{get:function(){return e}})}var r,n,o,i,a;try{r=this,t(),o=new C(r),i=new I(r),a=new D(r)}catch(c){throw console.log("g2l.Loader: "+c),c}this.createVertexBuffer=function(){return o.createVertexBuffer()},this.createIndexBuffer=function(){return o.createIndexBuffer()},this.setUpProgram=function(e,t){return a.setUpProgram(e,t)},this.setUpProgramFromHtmlElements=function(e,t){return a.setUpProgram(e,t)},this.loadTexture2D=function(e){return i.loadTexture2D(e)}}function w(e){function t(){if(void 0!==e&&void 0!==e.canvas)f=e.canvas;else{if(void 0===document.body)throw"document.body === undefined";f=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),f.width=w.CANVAS_WIDTH,f.height=w.CANVAS_HEIGHT}}function r(){if(void 0===e||e.usesDefaultStyles!==!1){var t=f.style;t.width="100%",t.height="100%",t.display="block"}}function n(){if(_=f.getContext("webgl"),null===_){if(_=f.getContext("experimental-webgl"),null===_)throw alert("Unable to initialize WebGL. Your browser may not support it."),"A WebGL-not-supported exception raised.";console.log("Your browser supports WebGL. \n\nHowever, it indicates the support is experimental. That is, not all WebGL functionality may be supported, and content may not run as expected.")}_.depthRange(y.NEAR_CLIP_PLANE,y.FAR_CLIP_PLANE),l=w.DEFAULT_CLEAR_COLOR,d=w.DEFAULT_CLEAR_DEPTH,A=w.DEFAULT_CLEAR_STENCIL,_.clearColor(l.r,l.g,l.b,l.a),_.clearDepth(d),_.clearStencil(A),o(),_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,!0)}function o(){i(),a(),c(),u()}function i(){_.disable(_.BLEND)}function a(){_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL),_.disable(_.STENCIL_TEST)}function c(){}function u(){_.enable(_.CULL_FACE),_.cullFace(_.BACK)}function E(){void 0===window.requestAnimationFrame&&(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}())}var s,f,_,O,T,l,d,A;try{s=this,t(),r(),n(),E()}catch(R){throw console.log("g2l.Renderer: "+R),R}Object.defineProperty(s,"canvas",{get:function(){return f}}),Object.defineProperty(s,"gl",{get:function(){return _}}),Object.defineProperty(s,"loader",{get:function(){return void 0===O&&(O=new N(s)),O}}),Object.defineProperty(s,"program",{get:function(){return T},set:function(e){e!==T&&(T=e,_.useProgram(T.webGLProgram))}}),this.run=function(e,t){function r(){requestAnimationFrame(r),void 0!==e&&e(),void 0!==t&&t()}r()},this.clear=function(e,t,r,n){void 0!==t&&p.areEqual(t,l)===!1&&(l=t,_.clearColor(l.r,l.g,l.b,l.a)),void 0!==r&&r!==d&&(d=r,_.clearDepth(d)),void 0!==n&&n!==A&&(A=n,_.clearStencil(A)),void 0===e&&(e=w.DEFAULT_CLEAR_OPTIONS),_.clear(e)},this.drawPrimitives=function(e,t,r){_.drawArrays(e,t,r)},this.drawIndexedPrimitives=function(e,t,r,n){void 0===n&&(n=0),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,e.webGLBuffer),_.drawElements(t,r,_.UNSIGNED_SHORT,n)},this.getAttributeLocation=function(e,t){return _.getAttribLocation(e.webGLProgram,t)},this.getUniformLocation=function(e,t){return _.getUniformLocation(e.webGLProgram,t)},this.setAttribute=function(e,t){_.bindBuffer(_.ARRAY_BUFFER,t.webGLBuffer),_.vertexAttribPointer(e,t.size,_.FLOAT,!1,0,0),_.enableVertexAttribArray(e)},this.setSampler=function(e,t,r){void 0===r&&(r=w.DEFAULT_TEXTURE_UNIT),_.activeTexture(_.TEXTURE0+r),_.bindTexture(_.TEXTURE_2D,t.webGLTexture),_.uniform1i(e,r)},this.setVector2DUniform=function(e,t){_.uniform2fv(e,t)},this.setVector3DUniform=function(e,t){_.uniform3fv(e,t)},this.setVector4DUniform=function(e,t){_.uniform4fv(e,t)},this.setMatrix4x4Uniform=function(e,t){_.uniformMatrix4fv(e,!1,t)}}function m(){}function U(){}function F(){}function V(){}function z(){}function X(e,t,r,n){this.left=e,this.bottom=t,this.width=r,this.height=n}function j(){}function M(e,t){this.width=e,this.height=t}function H(e,t,r){this.width=e,this.height=t,this.depth=r}function G(){}function B(e,t,r,n,o,i,a){if(void 0===r&&(r=B.DEFAULT_CREATION_OPTIONS),this.creationOptions=r,void 0===i&&(i=B.DEFAULT_VERTEX_COLOR),void 0===a&&(a=B.DEFAULT_SOURCE_TEXTURE_COORDINATE_RECT),this.texture=t,(r&G.VERTEX_POSITIONS)!==G.VERTEX_POSITIONS)throw"A sprite-creation exception raised.";this.vertexPositions=B.createVertexPositions(n,o),this.vertexColors=(r&G.VERTEX_COLORS)===G.VERTEX_COLORS?B.createVertexColors(i):null,this.vertexTextureCoordinates=(r&G.VERTEX_TEXTURE_COORDINATES)===G.VERTEX_TEXTURE_COORDINATES?B.createVertexTextureCoordinates(a):null}function W(e,t,r,n,o,i,a){if(void 0===r&&(r=W.DEFAULT_CREATION_OPTIONS),this.creationOptions=r,void 0===i&&(i=W.DEFAULT_VERTEX_COLOR),void 0===a&&(a=W.DEFAULT_SOURCE_TEXTURE_COORDINATE_RECT),this.texture=t,(r&G.VERTEX_POSITIONS)!==G.VERTEX_POSITIONS)throw"A sprite-creation exception raised.";this.vertexPositions=W.createVertexPositions2(n,o),this.vertexColors=(r&G.VERTEX_COLORS)===G.VERTEX_COLORS?W.createVertexColors2(i):W.DEFAULT_VERTEX_COLORS2,this.vertexTextureCoordinates=(r&G.VERTEX_TEXTURE_COORDINATES)===G.VERTEX_TEXTURE_COORDINATES?W.createVertexTextureCoordinates2(a):W.DEFAULT_VERTEX_TEXTURE_COORDINATES2}function Y(e,t){function r(){T={position:[],color:[],textureCoordinates:[]},A={color:e.loader.createVertexBuffer(),textureCoordinates:e.loader.createVertexBuffer()},A.color.loadData(B.DEFAULT_VERTEX_COLORS,B.COLOR_SIZE),A.textureCoordinates.loadData(B.DEFAULT_VERTEX_TEXTURE_COORDINATES,B.TEXTURE_COORDINATE_SIZE)}function n(){f=e.loader.setUpProgram(Y.VERTEX_SHADER_SOURCE,Y.FRAGMENT_SHADER_SOURCE),_={vertexPosition:e.getAttributeLocation(f,"vertexPosition"),vertexColor:e.getAttributeLocation(f,"vertexColor"),vertexTextureCoordinates:e.getAttributeLocation(f,"vertexTextureCoordinates")},O={canvasClientSize:e.getUniformLocation(f,"canvasClientSize"),sampler:e.getUniformLocation(f,"sampler")}}function o(){e.program=f,e.setVector2DUniform(O.canvasClientSize,new Float32Array([e.canvas.clientWidth,e.canvas.clientHeight]));for(var t=null,r=null,n=0;n<u.length;n++){var o=u[n];t=T.position[n],e.setAttribute(_.vertexPosition,t),t=(o.creationOptions&G.VERTEX_COLORS)===G.VERTEX_COLORS?T.color[n]:A.color,e.setAttribute(_.vertexColor,t),t=(o.creationOptions&G.VERTEX_TEXTURE_COORDINATES)===G.VERTEX_TEXTURE_COORDINATES?T.textureCoordinates[n]:A.textureCoordinates,e.setAttribute(_.vertexTextureCoordinates,t),r!==o.texture&&(e.setSampler(O.sampler,o.texture),r=o.texture),e.drawPrimitives(z.TRIANGLE_STRIP,0,4)}}function i(){u=[],l===!1&&(s=!0)}var a,c,u,E,s,f,_,O,T,l,d,A;try{a=this,c=e.gl,void 0!==t&&(l=t.clearsDbAfterDrawing,d=t.areDbFrequentlyChanged),void 0===l&&(l=Y.DEFAULT_OF_IF_CLEARS_DB_AFTER_DRAWING),void 0===d&&(d=Y.DEFAULT_OF_IF_DB_FREQUENTLY_CHANGED),u=[],r(),n(),E=!1,s=!0}catch(R){throw console.log("g2l.SpriteBatch: "+R),R}Object.defineProperty(a,"renderer",{get:function(){return e}}),this.begin=function(){E=!0},this.drawSprite=function(t,r,n,o,i,c){if(l!==!1||s!==!1){if(E===!1)throw"A begin-not-called-before-drawing exception raised.";if(y.isDepthOutOfRange(n.z)!==!0){var f,_=new B(a,t,r,n,o,i,c),O=u.length;T.position.length-1<O?(f=e.loader.createVertexBuffer(),T.position.push(f)):f=T.position[O],f.loadData(_.vertexPositions,B.POSITION_SIZE),T.color.length-1<O?(f=e.loader.createVertexBuffer(),T.color.push(f)):f=T.color[O],(_.creationOptions&G.VERTEX_COLORS)===G.VERTEX_COLORS&&f.loadData(_.vertexColors,B.COLOR_SIZE),T.textureCoordinates.length-1<O?(f=e.loader.createVertexBuffer(),T.textureCoordinates.push(f)):f=T.textureCoordinates[O],(_.creationOptions&G.VERTEX_TEXTURE_COORDINATES)===G.VERTEX_TEXTURE_COORDINATES&&f.loadData(_.vertexTextureCoordinates,B.TEXTURE_COORDINATE_SIZE),u.push(_)}}},this.end=function(){if(E===!1)throw"A begin-not-called-before-drawing exception raised.";0<u.length&&((l===!0||l===!1&&s===!0)&&l===!1&&(s=!1),o(),l===!0&&i()),E=!1}}function Z(e,t){function r(){l=[],d=[],A={position:[],color:[],textureCoordinates:[]},R=[],p={color:e.loader.createVertexBuffer(),textureCoordinates:e.loader.createVertexBuffer()},p.color.loadData(W.DEFAULT_VERTEX_COLORS,W.COLOR_SIZE),p.textureCoordinates.loadData(W.DEFAULT_VERTEX_TEXTURE_COORDINATES,W.TEXTURE_COORDINATE_SIZE),g=e.loader.createIndexBuffer(),g.loadData(W.DEFAULT_INDICES),P=[],x=[],C=[],L=[]}function n(){_=e.loader.setUpProgram(Z.VERTEX_SHADER_SOURCE,Z.FRAGMENT_SHADER_SOURCE),O={vertexPosition:e.getAttributeLocation(_,"vertexPosition"),vertexColor:e.getAttributeLocation(_,"vertexColor"),vertexTextureCoordinates:e.getAttributeLocation(_,"vertexTextureCoordinates")},T={canvasClientSize:e.getUniformLocation(_,"canvasClientSize"),sampler:e.getUniformLocation(_,"sampler")}}function o(){var t,r;l.push(b),D=l.length-1;var n=P.length/(W.POSITION_SIZE*W.VERTEX_COUNT);d.push(n),A.position.length-1<D?(t=e.loader.createVertexBuffer(),A.position.push(t)):t=A.position[D],t.loadData(new Float32Array(P),W.POSITION_SIZE),A.color.length-1<D?(t=e.loader.createVertexBuffer(),A.color.push(t)):t=A.color[D],t.loadData(new Float32Array(x),W.COLOR_SIZE),A.textureCoordinates.length-1<D?(t=e.loader.createVertexBuffer(),A.textureCoordinates.push(t)):t=A.textureCoordinates[D],t.loadData(new Float32Array(C),W.TEXTURE_COORDINATE_SIZE),R.length-1<D?(r=e.loader.createIndexBuffer(),R.push(r)):r=R[D],r.loadData(new Uint16Array(L)),P=[],x=[],C=[],L=[]}function i(){e.program=_,e.setVector2DUniform(T.canvasClientSize,new Float32Array([e.canvas.clientWidth,e.canvas.clientHeight]));for(var t=0;D>=t;t++)e.setSampler(T.sampler,l[t]),e.setAttribute(O.vertexPosition,A.position[t]),e.setAttribute(O.vertexColor,A.color[t]),e.setAttribute(O.vertexTextureCoordinates,A.textureCoordinates[t]),e.drawIndexedPrimitives(R[t],z.TRIANGLE_LIST,W.INDEX_COUNT*d[t])}function a(){E=[],h===!1&&(f=!0)}var c,u,E,s,f,_,O,T,l,d,A,R,h,S,p,g,P,x,C,L,b,D;try{c=this,u=e.gl,void 0!==t&&(h=t.clearsDbAfterDrawing,S=t.areDbFrequentlyChanged),void 0===h&&(h=Z.DEFAULT_OF_IF_CLEARS_DB_AFTER_DRAWING),void 0===S&&(S=Z.DEFAULT_OF_IF_DB_FREQUENTLY_CHANGED),E=[],r(),n(),s=!1,f=!0}catch(v){throw console.log("g2l.SpriteBatch2: "+v),v}Object.defineProperty(c,"renderer",{get:function(){return e}}),this.begin=function(){s=!0,b=null,D=-1},this.drawSprite=function(e,t,r,n,i,a){if(h!==!1||f!==!1){if(s===!1)throw"A begin-not-called-before-drawing exception raised.";if(y.isDepthOutOfRange(r.z)!==!0){null!==b&&b!==e&&o();var u=new W(c,e,t,r,n,i,a),_=P.length/(W.POSITION_SIZE*W.VERTEX_COUNT),O=W.VERTEX_COUNT*_;P=P.concat(u.vertexPositions),x=x.concat(u.vertexColors),C=C.concat(u.vertexTextureCoordinates),L=L.concat([O+0,O+1,O+2,O+2,O+1,O+3]),E.push(u),b=e}}},this.end=function(){if(s===!1)throw"A begin-not-called-before-drawing exception raised.";o(),0<E.length&&((h===!0||h===!1&&f===!0)&&h===!1&&(f=!1),i(),h===!0&&a()),l=[],d=[],s=!1}}function q(){}function K(){}function k(){}function Q(){}function J(){}function $(e,t){var r,n,o;try{r=this,n=1,o=!1}catch(i){throw console.log("g2l.World2D: "+i),i}Object.defineProperty(r,"renderer",{get:function(){return e}}),this.invalidateItems=function(){o=!0}}function ee(e){var t,r,n,o,i;try{t=this}catch(a){throw console.log("g2l.World2DItem: "+a),a}Object.defineProperty(t,"world",{get:function(){return e}}),Object.defineProperty(t,"isEnabled",{get:function(){return r},set:function(t){t!==r&&(r=t,r===!0&&e.invalidateItems())}}),Object.defineProperty(t,"isVisible",{get:function(){return n},set:function(e){e!==n&&(n=e)}}),Object.defineProperty(t,"isSelected",{get:function(){return o},set:function(e){e!==o&&(o=e)}}),Object.defineProperty(t,"isOutOfBound",{get:function(){return _hasToCheckBounds===!0&&(checkIfOutOfBounds(),_hasToCheckBounds=!1),_isOutOfBounds},set:function(e){e!==_isOutOfBounds&&(_isOutOfBounds=e)}}),Object.defineProperty(t,"tag",{get:function(){return i},set:function(e){i=e}})}function te(e,t,r,n){ee.call(this,e);var o;try{o=this}catch(a){throw console.log("g2l.World2DImage: "+a),a}Object.defineProperty(o,"texture",{get:function(){return t},set:function(e){t=e}}),Object.defineProperty(o,"centerPosition",{get:function(){return r},set:function(e){i.areEqual(e,r)!==!0&&(r=e,_centerScreenPosition=o.world.toScreenSpace(r),o.world.invalidateBounds())}})}function re(e){ee.call(this,e);var t;try{t=this}catch(r){throw console.log("g2l.World2DLineSegment: "+r),r}}function ne(){}function oe(){var e,t,r,n,o,i;try{e=this,t=oe.FRAME_COUNT_TO_AVERAGE,r=[],n=0,o=0,i=0;for(var a=0;a<oe.FRAME_COUNT_TO_AVERAGE;a++)r[a]=1}catch(c){throw console.log("g2l.Fps: "+c),c}Object.defineProperty(e,"average",{get:function(){return i}}),this.update=function(){var e=(new Date).getTime(),a=.001*(e-o);o=e,t+=a-r[n],r[n]=a,n++,n===oe.FRAME_COUNT_TO_AVERAGE&&(n=0),i=Math.floor(1/(t/oe.FRAME_COUNT_TO_AVERAGE)+.5)}}function ie(){}function ae(){}t.PI=3.141592653589793,t.PI_OVER_TWO=1.5707963267948966,t.PI_OVER_FOUR=.7853981633974483,t.TWO_PI=6.283185307179586,t.PI_OVER_ONE_EIGHTY=.0174532925199432,t.ONE_EIGHTY_OVER_PI=57.29577951308232,t.RADIANS_OF_FORTY_FIVE_DEGREES=t.PI_OVER_FOUR,t.RADIANS_OF_NINETY_DEGREES=t.PI_OVER_TWO,t.RADIANS_OF_ONE_EIGHTY_DEGREES=t.PI,t.RADIANS_OF_THREE_SIXTY_DEGREES=t.TWO_PI,t.EPSILON=1e-5,t.toRadians=function(e){if("number"!=typeof e)throw"typeof(degrees) !== 'number'";return t.PI_OVER_ONE_EIGHTY*e},t.toDegrees=function(e){if("number"!=typeof e)throw"typeof(degrees) !== 'number'";return t.ONE_EIGHTY_OVER_PI*e},t.isZero=function(e){if("number"!=typeof e)throw"typeof(s) !== 'number'";return e<=-t.EPSILON||t.EPSILON<=e?!1:!0},t.areEqual=function(e,r){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof r)throw"typeof(s2) !== 'number'";var n=e-r;return n<=-t.EPSILON||t.EPSILON<=n?!1:!0},t.isScalar1LessThanScalar2=function(e,r){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof r)throw"typeof(s2) !== 'number'";return e-r<=-t.EPSILON?!0:!1},t.isScalar1LessThanOrEqualToScalar2=function(e,r){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof r)throw"typeof(s2) !== 'number'";return e-r<t.EPSILON?!0:!1},t.isScalar1GreaterThanScalar2=function(e,r){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof r)throw"typeof(s2) !== 'number'";return t.EPSILON<=e-r?!0:!1},t.isScalar1GreaterThanOrEqualToScalar2=function(e,r){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof r)throw"typeof(s2) !== 'number'";return-t.EPSILON<e-r?!0:!1},t.isPowerOfTwo=function(e){if("number"!=typeof e)throw"typeof(s) !== 'number'";return 0!==e&&0===(e&e-1)?!0:!1},Object.freeze(t),r.X=0,r.Y=1,r.Z=2,Object.freeze(r),n.prototype={},Object.defineProperty(n.prototype,"s11",{get:function(){return this.db[0]}}),Object.defineProperty(n.prototype,"s12",{get:function(){return this.db[4]}}),Object.defineProperty(n.prototype,"s13",{get:function(){return this.db[8]}}),Object.defineProperty(n.prototype,"s14",{get:function(){return this.db[12]}}),Object.defineProperty(n.prototype,"s21",{get:function(){return this.db[1]}}),Object.defineProperty(n.prototype,"s22",{get:function(){return this.db[5]}}),Object.defineProperty(n.prototype,"s23",{get:function(){return this.db[9]}}),Object.defineProperty(n.prototype,"s24",{get:function(){return this.db[13]}}),Object.defineProperty(n.prototype,"s31",{get:function(){return this.db[2]}}),Object.defineProperty(n.prototype,"s32",{get:function(){return this.db[6]}}),Object.defineProperty(n.prototype,"s33",{get:function(){return this.db[10]}}),Object.defineProperty(n.prototype,"s34",{get:function(){return this.db[14]}}),Object.defineProperty(n.prototype,"s41",{get:function(){return this.db[3]}}),Object.defineProperty(n.prototype,"s42",{get:function(){return this.db[7]}}),Object.defineProperty(n.prototype,"s43",{get:function(){return this.db[11]}}),Object.defineProperty(n.prototype,"s44",{get:function(){return this.db[15]}}),n.ELEMENT_COUNT=16,n.fromArray=function(e){return new n(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},n.createIdentityMatrix=function(){return new n(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},n.createViewMatrix=function(e,t,r){var o,i,a,u;u=c.negateVector(t),a=c.calculateUnitVectorOf(u),u=c.calculateCrossProductOf(r,a),o=c.calculateUnitVectorOf(u),i=c.calculateCrossProductOf(a,o);var E=o.x,s=i.x,f=a.x,_=0,O=o.y,T=i.y,l=a.y,d=0,A=o.z,R=i.z,h=a.z,S=0,p=-c.calculateDotProductOf(o,e),g=-c.calculateDotProductOf(i,e),y=-c.calculateDotProductOf(a,e),P=1;return new n(E,O,A,p,s,T,R,g,f,l,h,y,_,d,S,P)},n.createProjectionMatrix=function(e,t,r,o){void 0===e&&(e=s.FIELD_OF_VIEW_Y),void 0===r&&(r=s.DEFAULT_DISTANCE_TO_NEAR_PLANE),void 0===o&&(o=s.DEFAULT_DISTANCE_TO_FAR_PLANE);var i,a;a=1/Math.tan(e/2),i=a/t;var c=[];return c[0]=i,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=a,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=o/(r-o),c[11]=-1,c[12]=0,c[13]=0,c[14]=r*o/(r-o),c[15]=0,n.fromArray(c)},n.createScaleMatrix=function(e){return new n(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},n.createRotationMatrix=function(e,t){var o=Math.cos(t),i=Math.sin(t);switch(e){case r.X:return new n(1,0,0,0,0,o,-i,0,0,i,o,0,0,0,0,1);case r.Y:return new n(o,0,i,0,0,1,0,0,-i,0,o,0,0,0,0,1);case r.Z:return new n(o,-i,0,0,i,o,0,0,0,0,1,0,0,0,0,1);default:console.log("A not-supported exception raised.")}},n.createTranslationMatrix=function(e){return new n(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1)},n.multiplyMatrices=function(e,t){var r=e.db,o=t.db,i=[],a=r[0],c=r[4],u=r[8],E=r[12],s=r[1],f=r[5],_=r[9],O=r[13],T=r[2],l=r[6],d=r[10],A=r[14],R=r[3],h=r[7],S=r[11],p=r[15],g=o[0],y=o[4],P=o[8],x=o[12],C=o[1],L=o[5],b=o[9],D=o[13],v=o[2],I=o[6],N=o[10],w=o[14],m=o[3],U=o[7],F=o[11],V=o[15];return i[0]=a*g+c*C+u*v+E*m,i[4]=a*y+c*L+u*I+E*U,i[8]=a*P+c*b+u*N+E*F,i[12]=a*x+c*D+u*w+E*V,i[1]=s*g+f*C+_*v+O*m,i[5]=s*y+f*L+_*I+O*U,i[9]=s*P+f*b+_*N+O*F,i[13]=s*x+f*D+_*w+O*V,i[2]=T*g+l*C+d*v+A*m,i[6]=T*y+l*L+d*I+A*U,i[10]=T*P+l*b+d*N+A*F,i[14]=T*x+l*D+d*w+A*V,i[3]=R*g+h*C+S*v+p*m,i[7]=R*y+h*L+S*I+p*U,i[11]=R*P+h*b+S*N+p*F,i[15]=R*x+h*D+S*w+p*V,n.fromArray(i)},n.transposeMatrix=function(e){return new n(e.s11,e.s21,e.s31,e.s41,e.s12,e.s22,e.s32,e.s42,e.s13,e.s23,e.s33,e.s43,e.s14,e.s24,e.s34,e.s44)},n.invertMatrix=function(e){var t=e.s11,r=e.s12,o=e.s13,i=e.s14,a=e.s21,c=e.s22,u=e.s23,E=e.s24,s=e.s31,f=e.s32,_=e.s33,O=e.s34,T=e.s41,l=e.s42,d=e.s43,A=e.s44,R=u*O*l-E*_*l+E*f*d-c*O*d-u*f*A+c*_*A,h=i*_*l-o*O*l-i*f*d+r*O*d+o*f*A-r*_*A,S=o*E*l-i*u*l+i*c*d-r*E*d-o*c*A+r*u*A,p=i*u*f-o*E*f-i*c*_+r*E*_+o*c*O-r*u*O,g=t*R+a*h+s*S+T*p;if(0===g)throw"Can't invert matrix cuz determinant is 0";return g=1/g,n.fromArray([R*g,(E*_*T-u*O*T-E*s*d+a*O*d+u*s*A-a*_*A)*g,(c*O*T-E*f*T+E*s*l-a*O*l-c*s*A+a*f*A)*g,(u*f*T-c*_*T-u*s*l+a*_*l+c*s*d-a*f*d)*g,h*g,(o*O*T-i*_*T+i*s*d-t*O*d-o*s*A+t*_*A)*g,(i*f*T-r*O*T-i*s*l+t*O*l+r*s*A-t*f*A)*g,(r*_*T-o*f*T+o*s*l-t*_*l-r*s*d+t*f*d)*g,S*g,(i*u*T-o*E*T-i*a*d+t*E*d+o*a*A-t*u*A)*g,(r*E*T-i*c*T+i*a*l-t*E*l-r*a*A+t*c*A)*g,(o*c*T-r*u*T-o*a*l+t*u*l+r*a*d-t*c*d)*g,p*g,(o*E*s-i*u*s+i*a*_-t*E*_-o*a*O+t*u*O)*g,(i*c*s-r*E*s-i*a*f+t*E*f+r*a*O-t*c*O)*g,(r*u*s-o*c*s+o*a*f-t*u*f-r*a*_+t*c*_)*g])},n.areEqual=function(e,t){if(e instanceof n==!1||t instanceof n==!1)return!1;for(var r=e.db,o=t.db,i=0;i<n.ELEMENT_COUNT;i++)if(r[i]!==o[i])return!1;return!0},Object.freeze(n),o.prototype={toMatrix4x4:function(){var e=this.x,t=this.y,r=this.z,o=this.w,i=e*e,a=t*t,c=r*r,u=e*t,E=r*o,s=r*e,f=t*o,_=t*r,O=e*o,T=[1-2*(a+c),2*(u+E),2*(s-f),0,2*(u-E),1-2*(c+i),2*(_+O),0,2*(s+f),2*(_-O),1-2*(a+i),0,0,0,0,1];return n.fromArray(T)}},o.ELEMENT_COUNT=4,o.fromAxisAngle=function(e,t){e=c.calculateUnitVectorOf(e);var r=.5*t,n=Math.sin(r),i=Math.cos(r);return new o(e.x*n,e.y*n,e.z*n,i)},o.fromArray=function(e){return new o(e[0],e[1],e[2],e[3])},o.createIdentityQuaternion=function(){return new o(0,0,0,1)},o.calculateUnitQuaternionOf=function(e){var r=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w);if(r<t.EPSILON)return new o(0,0,0,0);var n=1/r;return new o(e.x*n,e.y*n,e.z*n,e.w*n)},o.areEqual=function(e,t){return e instanceof o==!1||t instanceof o==!1?!1:e.x!==t.x||e.y!==t.y||e.z!==t.z||e.w!==t.w?!1:!0},Object.freeze(o),i.prototype={toArray:function(){return[this.x,this.y]}},i.ELEMENT_COUNT=2,i.fromArray=function(e){return new i(e[0],e[1])},i.calculateUnitVectorOf=function(e){var r=Math.sqrt(e.x*e.x+e.y*e.y);if(r<t.EPSILON)return new i(0,0);var n=1/r;return new i(e.x*n,e.y*n)},i.negateVector=function(e){return new i(-e.x,-e.y)},i.addVectors=function(e,t){return new i(e.x+t.x,e.y+t.y)},i.subtractVectors=function(e,t){return new i(e.x-t.x,e.y-t.y)},i.multiplyVectorByScalar=function(e,t){return new i(e.x*t,e.y*t)},i.calculateLengthOf=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},i.calculateLengthSquaredOf=function(e){return e.x*e.x+e.y*e.y},i.calculateDotProductOf=function(e,t){return e.x*t.x+e.y*t.y},i.calculatePerpendicularVectorOf=function(e){return new i(-e.y,e.x)},i.calculatePerpendicularDotProductOf=function(e,t){return-e.y*t.x+e.x*t.y},i.areEqual=function(e,t){return e instanceof i==!1||t instanceof i==!1?!1:e.x!==t.x||e.y!==t.y?!1:!0},Object.freeze(i),a.prototype={toArray:function(){return[this.x,this.y,this.z,this.w]}},Object.defineProperty(a.prototype,"xyz",{get:function(){return new c(this.x,this.y,this.z)}}),a.ELEMENT_COUNT=4,a.fromArray=function(e){return new a(e[0],e[1],e[2],e[3])},a.calculateUnitVectorOf=function(e){var r=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w);if(r<t.EPSILON)return new a(0,0,0,0);var n=1/r;return new a(e.x*n,e.y*n,e.z*n,e.w*n)},a.addVectors=function(e,t){return new a(e.x+t.x,e.y+t.y,e.z+t.z,e.w+t.w)},a.subtractVectors=function(e,t){return new a(e.x-t.x,e.y-t.y,e.z-t.z,e.w-t.w)},a.multiplyVectorByScalar=function(e,t){return new a(e.x*t,e.y*t,e.z*t,e.w*t)},a.calculateLengthOf=function(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w)},a.calculateLengthSquaredOf=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},a.transform=function(e,t){return new a(e.s11*t.x+e.s12*t.y+e.s13*t.z+e.s14*t.w,e.s21*t.x+e.s22*t.y+e.s23*t.z+e.s24*t.w,e.s31*t.x+e.s32*t.y+e.s33*t.z+e.s34*t.w,e.s41*t.x+e.s42*t.y+e.s43*t.z+e.s44*t.w)},a.areEqual=function(e,t){return e instanceof a==!1||t instanceof a==!1?!1:e.x!==t.x||e.y!==t.y||e.z!==t.z||e.w!==t.w?!1:!0},Object.freeze(a),c.prototype={toArray:function(){return[this.x,this.y,this.z]}},Object.defineProperty(c.prototype,"xy",{get:function(){return new i(this.x,this.y)}}),c.ELEMENT_COUNT=3,c.fromArray=function(e){return new c(e[0],e[1],e[2])},c.calculateUnitVectorOf=function(e){var r=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);if(r<t.EPSILON)return new c(0,0,0);var n=1/r;return new c(e.x*n,e.y*n,e.z*n)},c.negateVector=function(e){return new c(-e.x,-e.y,-e.z)},c.addVectors=function(e,t){return new c(e.x+t.x,e.y+t.y,e.z+t.z)},c.subtractVectors=function(e,t){
return new c(e.x-t.x,e.y-t.y,e.z-t.z)},c.multiplyVectorByScalar=function(e,t){return new c(e.x*t,e.y*t,e.z*t)},c.calculateLengthOf=function(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)},c.calculateLengthSquaredOf=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},c.calculateDotProductOf=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},c.calculateCrossProductOf=function(e,t){return new c(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z,e.x*t.y-e.y*t.x)},c.transformPoint=function(e,t){var r=new a(t.x,t.y,t.z,1),n=a.Transform(e,r),o=1/n.w;return new c(n.x*o,n.y*o,n.z*o)},c.transformVector=function(e,t){var r=new a(t.x,t.y,t.z,0);return t=a.Transform(e,r),new c(t.x,t.y,t.z)},c.transform=function(e,t){var r=t.X+t.X,n=t.Y+t.Y,o=t.Z+t.Z,i=t.W*r,a=t.W*n,u=t.W*o,E=t.X*r,s=t.X*n,f=t.X*o,_=t.Y*n,O=t.Y*o,T=t.Z*o,l=1-_-T,d=s-u,A=f+a,R=s+u,h=1-E-T,S=O-i,p=f-a,g=O+i,y=1-E-_;return new c(e.X*l+e.Y*d+e.Z*A,e.X*R+e.Y*h+e.Z*S,e.X*p+e.Y*g+e.Z*y)},c.areEqual=function(e,t){return e instanceof c==!1||t instanceof c==!1?!1:e.x!==t.x||e.y!==t.y||e.z!==t.z?!1:!0},Object.freeze(c),u.X_AXIS=new c(1,0,0),u.Y_AXIS=new c(0,1,0),u.Z_AXIS=new c(0,0,1),Object.freeze(u),Object.freeze(E),s.prototype={zoom:function(e){var t=c.multiplyVectorByScalar(c.calculateUnitVectorOf(this.facingDirection),e);this.position=c.addVectors(this.position,t),this.invalidateViewMatrix()}},s.DEFAULT_FACING_DIRECTION=c.negateVector(u.Z_AXIS),s.DEFAULT_UP_DIRECTION=u.Y_AXIS,s.FIELD_OF_VIEW_Y=t.PI_OVER_FOUR,s.MIN_DISTANCE_TO_NEAR_PLANE=10,s.MAX_DISTANCE_TO_FAR_PLANE=1e6,s.DEFAULT_DISTANCE_TO_NEAR_PLANE=s.MIN_DISTANCE_TO_NEAR_PLANE,s.DEFAULT_DISTANCE_TO_FAR_PLANE=1e5,Object.freeze(s),f.prototype={update:function(){}},Object.freeze(f),_.inherit=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r},_.arrayContainsItem=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},_.arrayRemoveItem=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return e.splice(r,1),!0;return!1},Object.freeze(_),_.inherit(O,f),Object.freeze(O),T.EASE_IN=0,T.EASE_OUT=1,T.EASE_IN_OUT=2,Object.freeze(T),Object.freeze(l),Object.freeze(d),_.inherit(A,f),A.prototype.update=function(){var e=this.sineEase,t=e.isFinished,r=e.ratioOfCurrentToTotalSineOfAngleOffset;void 0!==this.updatingCallback&&this.updatingCallback(e.ratioOfCurrentToTotalTimeOffset);var n=this.distance*r;this.camera.baseZoom(n-this.zoomedDistance),this.zoomedDistance=n,t===!0&&(void 0!==this.finishingCallback&&this.finishingCallback(),this.camera.state=new O(this.camera))},Object.freeze(A),_.inherit(R,s),R.DEFAULT_ZOOM_DURATION=250,Object.freeze(R),h.fromDisplayToDrawSpace=function(e,t){return{x:t.x/e.clientWidth*e.width,y:t.y/e.clientHeight*e.height}},h.fromDrawToDisplaySpace=function(e,t){return{x:t.x/e.width*e.clientWidth,y:t.y/e.height*e.clientHeight}},Object.freeze(h),S.COLOR_BUFFER=16384,S.DEPTH_BUFFER=256,S.STENCIL_BUFFER=1024,Object.freeze(S),p.prototype={toArray:function(){return[this.r,this.g,this.b,this.a]}},p.areEqual=function(e,t){return e instanceof p==!1||t instanceof p==!1?!1:e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a?!1:!0},Object.freeze(p),g.DEFAULT_BACKGROUND=new p(32/255,32/255,32/255,1),g.BLACK=new p(0,0,0,1),g.WHITE=new p(1,1,1,1),g.TRANSPARENT=new p(1,1,1,0),g.SKY_BLUE=new p(135/255,206/255,235/255,1),g.CADET_BLUE=new p(95/255,158/255,160/255,1),g.PINK=new p(1,192/255,203/255,1),g.PHOTOSHOP_DARK_RED=new p(157/255,10/255,14/255,1),g.PHOTOSHOP_PASTEL_RED_ORANGE=new p(255,173/255,129/255,1),g.PHOTOSHOP_DARK_RED_ORANGE=new p(255,65/255,13/255,1),g.PHOTOSHOP_PASTEL_YELLOW_ORANGE=new p(253/255,198/255,137/255,1),g.PHOTOSHOP_DARK_YELLOW_ORANGE=new p(163/255,97/255,9/255,1),g.PHOTOSHOP_PASTEL_YELLOW=new p(1,247/255,.6,1),g.PHOTOSHOP_DARK_YELLOW=new p(171/255,160/255,0,1),g.PHOTOSHOP_PASTEL_PEA_GREEN=new p(196/255,223/255,155/255,1),g.PHOTOSHOP_DARK_PEA_GREEN=new p(89/255,133/255,39/255,1),g.PHOTOSHOP_PASTEL_YELLOW_GREEN=new p(162/255,211/255,156/255,1),g.PHOTOSHOP_DARK_YELLOW_GREEN=new p(25/255,122/255,48/255,1),g.PHOTOSHOP_PASTEL_GREEN=new p(130/255,202/255,156/255,1),g.PHOTOSHOP_DARK_GREEN=new p(0,114/255,54/255,1),g.PHOTOSHOP_PASTEL_GREEN_CYAN=new p(122/255,.8,200/255,1),g.PHOTOSHOP_DARK_GREEN_CYAN=new p(0,115/255,106/255,1),g.PHOTOSHOP_PASTEL_CYAN=new p(109/255,207/255,246/255,1),g.PHOTOSHOP_DARK_CYAN=new p(0,118/255,163/255,1),g.PHOTOSHOP_PASTEL_CYAN_BLUE=new p(125/255,167/255,216/255,1),g.PHOTOSHOP_DARK_CYAN_BLUE=new p(0,74/255,128/255,1),g.PHOTOSHOP_PASTEL_BLUE=new p(131/255,147/255,202/255,1),g.PHOTOSHOP_DARK_BLUE=new p(0,52/255,113/255,1),g.PHOTOSHOP_PASTEL_BLUE_VIOLET=new p(135/255,129/255,189/255,1),g.PHOTOSHOP_DARK_BLUE_VIOLET=new p(27/255,20/255,100/255,1),g.PHOTOSHOP_PASTEL_VIOLET=new p(161/255,134/255,190/255,1),g.PHOTOSHOP_DARK_VIOLET=new p(68/255,14/255,98/255,1),g.PHOTOSHOP_PASTEL_VIOLET_MAGENTA=new p(188/255,140/255,191/255,1),g.PHOTOSHOP_DARK_VIOLET_MAGENTA=new p(98/255,4/255,96/255,1),g.PHOTOSHOP_PASTEL_MAGENTA=new p(244/255,154/255,193/255,1),g.PHOTOSHOP_DARK_MAGENTA=new p(158/255,0,93/255,1),g.PHOTOSHOP_PASTEL_MAGENTA_RED=new p(245/255,152/255,157/255,1),g.PHOTOSHOP_DARK_MAGENTA_RED=new p(157/255,0,57/255,1),g.PHOTOSHOP_PALE_COOL_BROWN=new p(199/255,178/255,.6,1),g.PHOTOSHOP_DARK_COOL_BROWN=new p(83/255,71/255,65/255,1),g.PHOTOSHOP_PALE_WARM_BROWN=new p(198/255,156/255,109/255,1),g.PHOTOSHOP_DARK_WARM_BROWN=new p(117/255,76/255,36/255,1),g.OSX_SOLID_KELP=new p(89/255,136/255,123/255,1),Object.freeze(g),y.NEAR_CLIP_PLANE=0,y.FAR_CLIP_PLANE=1,y.isDepthOutOfRange=function(e){return t.isScalar1LessThanScalar2(e,y.NEAR_CLIP_PLANE)===!0||t.isScalar1LessThanScalar2(y.FAR_CLIP_PLANE,e)===!0?!0:!1},Object.freeze(y),P.prototype={loadData:function(e){var t=this.bufferLoader.loader.renderer.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.webGLBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}},Object.freeze(P),x.prototype={loadData:function(e,t){var r=this.bufferLoader.loader.renderer.gl;this.size=t,r.bindBuffer(r.ARRAY_BUFFER,this.webGLBuffer),r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW)}},Object.freeze(x),Object.freeze(C),Object.freeze(L),b.VERTEX_SHADER=0,b.FRAGMENT_SHADER=1,Object.freeze(b),Object.freeze(D),Object.freeze(v),Object.freeze(I),Object.freeze(N),w.CANVAS_WIDTH=1024,w.CANVAS_HEIGHT=1024,w.DEFAULT_CLEAR_OPTIONS=S.COLOR_BUFFER|S.DEPTH_BUFFER,w.DEFAULT_CLEAR_COLOR=g.DEFAULT_BACKGROUND,w.DEFAULT_CLEAR_DEPTH=1,w.DEFAULT_CLEAR_STENCIL=0,w.DEFAULT_TEXTURE_UNIT=0,Object.freeze(w),m.MIN_X=-1,m.MAX_X=1,m.MIN_Y=-1,m.MAX_Y=1,m.MIN_Z=-1,m.MAX_Z=1,Object.freeze(m),U.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","attribute vec4 vertexColor;","varying vec4 color;","uniform mat4 transform;","void main() {","gl_Position = transform * vec4(vertexPosition, 1.0);","color = vertexColor;","}"].join("\n"),U.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 color;","void main() {","gl_FragColor = color;","}"].join("\n"),Object.freeze(U),F.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","uniform mat4 transform;","void main() {","gl_Position = transform * vec4(vertexPosition, 1.0);","}"].join("\n"),F.FRAGMENT_SHADER_SOURCE=["precision mediump float;","void main() {","gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","}"].join("\n"),Object.freeze(F),V.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","attribute vec2 vertexTextureCoordinates;","varying vec2 textureCoordinates;","uniform mat4 transform;","void main() {","gl_Position = transform * vec4(vertexPosition, 1.0);","textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),V.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec2 textureCoordinates;","uniform sampler2D sampler;","void main() {","gl_FragColor = texture2D(sampler, textureCoordinates);","}"].join("\n"),Object.freeze(V),z.LINE_LIST=1,z.LINE_STRIP=3,z.TRIANGLE_LIST=4,z.TRIANGLE_STRIP=5,Object.freeze(z),X.prototype={},Object.defineProperty(X.prototype,"right",{get:function(){return this.left+this.width}}),Object.defineProperty(X.prototype,"top",{get:function(){return this.bottom+this.height}}),Object.defineProperty(X.prototype,"center",{get:function(){return new i(this.left+.5*this.width,this.bottom+.5*this.height)}}),Object.defineProperty(X.prototype,"size",{get:function(){return new i(this.width,this.height)}}),Object.freeze(X),j.toClipSpace=function(e,t){return new a(m.MIN_X+t.x/e.clientWidth*(m.MAX_X-m.MIN_X),m.MIN_Y+t.y/e.clientHeight*(m.MAX_Y-m.MIN_Y),m.MIN_Z+t.z*(m.MAX_Z-m.MIN_Z),1)},Object.freeze(j),Object.freeze(M),Object.freeze(H),G.VERTEX_POSITIONS=1,G.VERTEX_COLORS=2,G.VERTEX_TEXTURE_COORDINATES=4,Object.freeze(G),B.VERTEX_COUNT=4,B.POSITION_SIZE=3,B.COLOR_SIZE=4,B.TEXTURE_COORDINATE_SIZE=2,B.INDEX_COUNT=6,B.DEFAULT_CREATION_OPTIONS=G.VERTEX_POSITIONS,B.DEFAULT_VERTEX_COLOR=g.WHITE,B.DEFAULT_SOURCE_TEXTURE_COORDINATE_RECT=new X(0,0,1,1),B.DEFAULT_VERTEX_COLORS=new Float32Array([].concat(B.DEFAULT_VERTEX_COLOR.toArray(),B.DEFAULT_VERTEX_COLOR.toArray(),B.DEFAULT_VERTEX_COLOR.toArray(),B.DEFAULT_VERTEX_COLOR.toArray())),B.DEFAULT_VERTEX_COLORS2=[].concat(B.DEFAULT_VERTEX_COLOR.toArray(),B.DEFAULT_VERTEX_COLOR.toArray(),B.DEFAULT_VERTEX_COLOR.toArray(),B.DEFAULT_VERTEX_COLOR.toArray()),B.DEFAULT_VERTEX_TEXTURE_COORDINATES=new Float32Array([1,0,1,1,0,0,0,1]),B.DEFAULT_VERTEX_TEXTURE_COORDINATES2=[1,0,1,1,0,0,0,1],B.DEFAULT_INDICES=new Uint16Array([0,1,2,2,1,3]),B.createVertexPositions=function(e,t){var r=.5*t.width,n=.5*t.height;return new Float32Array([e.x+r,e.y-n,e.z,e.x+r,e.y+n,e.z,e.x-r,e.y-n,e.z,e.x-r,e.y+n,e.z])},B.createVertexColors=function(e){return new Float32Array([e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a])},B.createVertexTextureCoordinates=function(e){return new Float32Array([e.right,e.bottom,e.right,e.top,e.left,e.bottom,e.left,e.top])},Object.freeze(B),W.VERTEX_COUNT=4,W.POSITION_SIZE=3,W.COLOR_SIZE=4,W.TEXTURE_COORDINATE_SIZE=2,W.INDEX_COUNT=6,W.DEFAULT_CREATION_OPTIONS=G.VERTEX_POSITIONS,W.DEFAULT_VERTEX_COLOR=g.WHITE,W.DEFAULT_SOURCE_TEXTURE_COORDINATE_RECT=new X(0,0,1,1),W.DEFAULT_VERTEX_COLORS=new Float32Array([].concat(W.DEFAULT_VERTEX_COLOR.toArray(),W.DEFAULT_VERTEX_COLOR.toArray(),W.DEFAULT_VERTEX_COLOR.toArray(),W.DEFAULT_VERTEX_COLOR.toArray())),W.DEFAULT_VERTEX_COLORS2=[].concat(W.DEFAULT_VERTEX_COLOR.toArray(),W.DEFAULT_VERTEX_COLOR.toArray(),W.DEFAULT_VERTEX_COLOR.toArray(),W.DEFAULT_VERTEX_COLOR.toArray()),W.DEFAULT_VERTEX_TEXTURE_COORDINATES=new Float32Array([1,0,1,1,0,0,0,1]),W.DEFAULT_VERTEX_TEXTURE_COORDINATES2=[1,0,1,1,0,0,0,1],W.DEFAULT_INDICES=new Uint16Array([0,1,2,2,1,3]),W.createVertexPositions=function(e,t){var r=.5*t.width,n=.5*t.height;return new Float32Array([e.x+r,e.y-n,e.z,e.x+r,e.y+n,e.z,e.x-r,e.y-n,e.z,e.x-r,e.y+n,e.z])},W.createVertexPositions2=function(e,t){var r=.5*t.width,n=.5*t.height;return[e.x+r,e.y-n,e.z,e.x+r,e.y+n,e.z,e.x-r,e.y-n,e.z,e.x-r,e.y+n,e.z]},W.createVertexColors=function(e){return new Float32Array([e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a])},W.createVertexColors2=function(e){return[e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a]},W.createVertexTextureCoordinates=function(e){return new Float32Array([e.right,e.bottom,e.right,e.top,e.left,e.bottom,e.left,e.top])},W.createVertexTextureCoordinates2=function(e){return[e.right,e.bottom,e.right,e.top,e.left,e.bottom,e.left,e.top]},Object.freeze(W),Y.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","attribute vec4 vertexColor;","attribute vec2 vertexTextureCoordinates;","varying vec4 color;","varying vec2 textureCoordinates;","uniform vec2 canvasClientSize;","void main() {","gl_Position = vec4 (","-1.0 + 2.0 * (vertexPosition.x / canvasClientSize.x),","-1.0 + 2.0 * (vertexPosition.y / canvasClientSize.y),","vertexPosition.z,","1.0",");","color = vertexColor;","textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),Y.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 color;","varying vec2 textureCoordinates;","uniform sampler2D sampler;","void main() {","gl_FragColor = color * texture2D(sampler, textureCoordinates);","}"].join("\n"),Y.DEFAULT_OF_IF_CLEARS_DB_AFTER_DRAWING=!0,Y.DEFAULT_OF_IF_DB_FREQUENTLY_CHANGED=!0,Object.freeze(Y),Z.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","attribute vec4 vertexColor;","attribute vec2 vertexTextureCoordinates;","varying vec4 color;","varying vec2 textureCoordinates;","uniform vec2 canvasClientSize;","void main() {","gl_Position = vec4 (","-1.0 + 2.0 * (vertexPosition.x / canvasClientSize.x),","-1.0 + 2.0 * (vertexPosition.y / canvasClientSize.y),","vertexPosition.z,","1.0",");","color = vertexColor;","textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),Z.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 color;","varying vec2 textureCoordinates;","uniform sampler2D sampler;","void main() {","gl_FragColor = color * texture2D(sampler, textureCoordinates);","}"].join("\n"),Z.DEFAULT_OF_IF_CLEARS_DB_AFTER_DRAWING=!0,Z.DEFAULT_OF_IF_DB_FREQUENTLY_CHANGED=!0,Object.freeze(Z),q.toUV=function(e,t){return{u:e,v:1-t}},q.toST=function(e,t){return{s:e,t:1-t}},Object.freeze(q),K.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec4 vertexPosition;","attribute vec4 vertexColor;","varying vec4 color;","void main() {","gl_Position = vertexPosition;","color = vertexColor;","}"].join("\n"),K.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 color;","void main() {","gl_FragColor = color;","}"].join("\n"),Object.freeze(K),k.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec4 vertexPosition;","attribute vec4 vertexColor;","attribute vec2 vertexTextureCoordinates;","varying vec4 color;","varying vec2 textureCoordinates;","void main() {","gl_Position = vertexPosition;","color = vertexColor;","textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),k.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 color;","varying vec2 textureCoordinates;","uniform sampler2D sampler;","void main() {","gl_FragColor = color * texture2D(sampler, textureCoordinates);","}"].join("\n"),Object.freeze(k),Q.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec4 vertexPosition;","attribute vec2 vertexTextureCoordinates;","varying vec2 textureCoordinates;","void main() {","gl_Position = vertexPosition;","textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),Q.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec2 textureCoordinates;","uniform sampler2D sampler;","void main() {","gl_FragColor = texture2D(sampler, textureCoordinates);","}"].join("\n"),Object.freeze(Q),J.BACKGROUND=0,J.RESERVED_ITEMS_BETWEEN_BACKGROUND_AND_FARTHEST_LINE_SEGMENTS=1,J.LINE_SEGMENTS_BELOW_FAR_IMAGES=2,J.FAR_IMAGES=3,J.LINE_SEGMENTS_BELOW_MIDDLE_IMAGES=4,J.MIDDLE_IMAGES=5,J.LINE_SEGMENTS_ABOVE_MIDDLE_IMAGES=6,J.NEAR_IMAGES=7,J.LINE_SEGMENTS_ABOVE_NEAR_IMAGES=8,J.RESERVED_ITEMS_BETWEEN_NEAREST_LINE_SEGMENTS_AND_TEXT=9,J.TEXT=10,J.RESERVED_ITEMS_BETWEEN_TEXT_AND_UI=11,J.UI=12,J.NEAREST_RESERVED_ITEMS=13,J.FarthestItems=J.Background,J.NearestItems=J.NearestReservedItems,Object.freeze(J),$.DEFAULT_LINE_SEGMENT_LAYER_INDEX=J.LINE_SEGMENTS_BELOW_FAR_IMAGES,$.DEFAULT_IMAGE_LAYER_INDEX=J.MIDDLE_IMAGES,Object.freeze($),Object.freeze(ee),_.inherit(te,ee),Object.freeze(te),_.inherit(re,ee),Object.freeze(re),ne.displayMessageOf=function(e){alert(e)},Object.freeze(ne),oe.FRAME_COUNT_TO_AVERAGE=16,Object.freeze(oe),ie.LEFT=0,ie.MIDDLE=1,ie.RIGHT=2,Object.freeze(ie),Object.freeze(ae),e.Camera=s,e.CameraState=f,e.CameraStateStill=O,e.CameraStateZooming=A,e.SmoothCamera=R,e.CanvasCoordinateHelper=h,e.ClearOptions=S,e.Color=p,e.Colors=g,e.DepthBufferValues=y,e.Renderer=w,e.IndexBuffer=P,e.NormalizedDeviceCoordinates=m,e.PositionColor=U,e.PositionOnly=F,e.PositionTextureCoordinates=V,e.PrimitiveType=z,e.Program=L,e.Rect=X,e.ScreenCoordinateHelper=j,e.ShaderType=b,e.Size2D=M,e.Size3D=H,e.Sprite=B,e.Sprite2=W,e.SpriteBatch=Y,e.SpriteBatch2=Z,e.SpriteCreationOptions=G,e.Texture2D=v,e.TextureCoordinateHelper=q,e.TransformedPositionColor=K,e.TransformedPositionColorTextureCoordinates=k,e.TransformedPositionTextureCoordinates=Q,e.VertexBuffer=x,e.World2D=$,e.World2DImage=te,e.World2DItem=ee,e.World2DLineSegment=re,e.World2DLayerName=J,e.ExceptionHelper=ne,e.Fps=oe,e.JSHelper=_,e.MouseButton=ie,e.BufferLoader=C,e.Loader=N,e.ProgramLoader=D,e.TextureLoader=I,e.AxisGroup=u,e.MathHelper=t,e.Vector2D=i,e.Vector3D=c,e.Vector4D=a,e.Matrix4x4=n,e.CartesianAxis=r,e.Plane=ae,e.Quaternion=o,e.ViewFrustum=E,e.EaseMode=T,e.SineEase=d,e.Stopwatch=l}(this.GorillaGL=this.GorillaGL||{});
