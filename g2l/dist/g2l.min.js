!function(e){"use strict";function t(){}function r(){}function n(e,t,r,i,o,a,c,u,s,f,E,l,O,_,d,h){this.db=new Float32Array(n.ELEMENT_COUNT),this.db[0]=e,this.db[4]=t,this.db[8]=r,this.db[12]=i,this.db[1]=o,this.db[5]=a,this.db[9]=c,this.db[13]=u,this.db[2]=s,this.db[6]=f,this.db[10]=E,this.db[14]=l,this.db[3]=O,this.db[7]=_,this.db[11]=d,this.db[15]=h}function i(e,t,r,n){this.x=e,this.y=t,this.z=r,this.w=n}function o(e,t){this.x=e,this.y=t}function a(e,t,r,n){this.x=e,this.y=t,this.z=r,this.w=n}function c(e,t,r){this.x=e,this.y=t,this.z=r}function u(){}function s(){}function f(e,r,i,o,a,u){function E(){S!==!1&&(d=n.createViewMatrix(r,i,o),g=!0,S=!1)}function l(){var e=_.clientWidth/_.clientHeight;(R!==!1||t.areEqual(e,p)!==!0)&&(p=e,h=n.createProjectionMatrix(f.FIELD_OF_VIEW_Y,p,a,u),g=!0,R=!1)}var O,_,d,h,T,A,S,R,g,p;try{O=this,void 0===r&&(r=new c(0,0,1e4)),void 0===i&&(i=f.DEFAULT_FACING_DIRECTION),void 0===o&&(o=f.DEFAULT_UP_DIRECTION),void 0===a&&(a=f.DEFAULT_DISTANCE_TO_NEAR_PLANE),void 0===u&&(u=f.DEFAULT_DISTANCE_TO_FAR_PLANE),a<f.MIN_DISTANCE_TO_NEAR_PLANE&&(a=f.MIN_DISTANCE_TO_NEAR_PLANE),f.MAX_DISTANCE_TO_FAR_PLANE<u&&(u=f.MAX_DISTANCE_TO_FAR_PLANE),_=e.canvas,A=new s,S=!0,R=!0,g=!0}catch(y){throw console.log("g2l.Camera: ",y),y}Object.defineProperty(O,"renderer",{get:function(){return e}}),Object.defineProperty(O,"position",{get:function(){return r},set:function(e){r=e}}),Object.defineProperty(O,"facingDirection",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(O,"upDirection",{get:function(){return o},set:function(e){o=e}}),Object.defineProperty(O,"distanceToNearPlane",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(O,"distanceToFarPlane",{get:function(){return u},set:function(e){u=e}}),Object.defineProperty(O,"viewFrustum",{get:function(){return A}}),this.invalidateViewMatrix=function(){S=!0},this.invalidateProjectionMatrix=function(){R=!0},this.getProjectionMatrix=function(e){l(),e.db=h.db.slice()},this.getTransform=function(e){E(),l(),g===!0&&(T=n.multiplyMatrices(h,d)),e.db=T.db.slice(),g===!0&&(g=!1)}}function E(e){var t;try{t=this}catch(r){throw console.log("g2l.CameraState: ",r),r}Object.defineProperty(t,"camera",{get:function(){return e}})}function l(){}function O(e){E.call(this,e)}function _(){}function d(){function e(){return(new Date).getTime()}var t,r,n;try{t=this,r=0,n=0}catch(i){throw console.log("g2l.Stopwatch: "+i),i}Object.defineProperty(t,"isRunning",{get:function(){return 0!==r?!0:!1}}),Object.defineProperty(t,"elapsedMilliseconds",{get:function(){return n+(t.isRunning===!0)?e()-r:0}}),this.start=function(){r=t.isRunning===!0?r:e()},this.stop=function(){n=t.isRunning===!0?n+(e()-r):n,r=0},this.reset=function(){r=0,n=0}}function h(e,r,n){var i,o,a,c;try{switch(i=this,e){case _.EASE_IN:o=-t.PI_OVER_TWO,a=0;break;case _.EASE_OUT:o=0,a=t.PI_OVER_TWO;break;case _.EASE_IN_OUT:o=-t.PI_OVER_TWO,a=t.PI_OVER_TWO;break;default:throw"A not-supported exception raised."}c=new d}catch(u){throw console.log("g2l.SineEase: "+u),u}Object.defineProperty(i,"easeMode",{get:function(){return e}}),Object.defineProperty(i,"duration",{get:function(){return r}}),Object.defineProperty(i,"sineOfStartAngle",{get:function(){return Math.sin(o)}}),Object.defineProperty(i,"sineOfCurrentAngle",{get:function(){var e=a-o;return Math.sin(o+e*i.ratioOfCurrentToTotalTimeOffset)}}),Object.defineProperty(i,"sineOfFinishAngle",{get:function(){return Math.sin(a)}}),Object.defineProperty(i,"ratioOfCurrentToTotalTimeOffset",{get:function(){if(n===!1)return i.isFinished===!0?1:c.elapsedMilliseconds/r;var e=c.elapsedMilliseconds%r;return e/r}}),Object.defineProperty(i,"ratioOfCurrentToTotalSineOfAngleOffset",{get:function(){var e=i.sineOfCurrentAngle-i.sineOfStartAngle,t=i.sineOfFinishAngle-i.sineOfStartAngle;return e/t}}),Object.defineProperty(i,"isRunning",{get:function(){return c.isRunning}}),Object.defineProperty(i,"isFinished",{get:function(){if(n===!0)return!1;var e=r<=c.elapsedMilliseconds?!0:!1;return e===!0&&c.stop(),e}}),this.start=function(){c.isRunning!==!0&&c.start()},this.pause=function(){c.isRunning!==!1&&c.stop()},this.resume=function(){c.isRunning!==!0&&c.start()},this.stop=function(){c.reset()}}function T(e,t,r,n,i){E.call(this,e);var o,a,c;try{o=this,c=0,a=new h(_.EASE_OUT,r,!1),a.start()}catch(u){throw console.log("g2l.CameraStateZooming: ",u),u}Object.defineProperty(o,"sineEase",{get:function(){return a}}),Object.defineProperty(o,"distance",{get:function(){return t}}),Object.defineProperty(o,"zoomedDistance",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(o,"updatingCallback",{get:function(){return n}}),Object.defineProperty(o,"finishingCallback",{get:function(){return i}})}function A(e,t,r,n,i,o){f.call(this,e,t,r,n,i,o);var a,c,u;try{a=this,c=new O(a),u=A.DEFAULT_ZOOM_DURATION}catch(s){throw console.log("g2l.SmoothCamera: ",s),s}Object.defineProperty(a,"state",{get:function(){return c},set:function(e){e!==c&&(c=e)}}),Object.defineProperty(a,"zoomingDuration",{get:function(){return u},set:function(e){u=e}}),this.update=function(){c.update()},this.zoom=function(e){c instanceof T!=!0&&(a.state=new T(a,e,u))},this.baseZoom=function(e){f.prototype.zoom.call(a,e)}}function S(){}function R(){}function g(e,t,r,n){void 0===n&&(n=1),this.r=e,this.g=t,this.b=r,this.a=n}function p(){}function y(){}function P(e){var t,r,n;try{t=this,r=e.loader.renderer.gl,n=r.createBuffer()}catch(i){throw console.log("g2l.IndexBuffer: "+i),i}Object.defineProperty(t,"bufferLoader",{get:function(){return e}}),Object.defineProperty(t,"webGLBuffer",{get:function(){return n}})}function b(){}function x(){}function w(){}function C(){}function v(){}function L(e){var t,r,n;try{t=this,r=e.loader.renderer.gl,n=r.createProgram()}catch(i){throw console.log("g2l.Program: "+i),i}Object.defineProperty(t,"programLoader",{get:function(){return e}}),Object.defineProperty(t,"webGLProgram",{get:function(){return n}})}function D(e,t,r,n){this.left=e,this.bottom=t,this.width=r,this.height=n}function m(e){var t,r,n,i;try{t=this,r=e.loader.renderer.gl,n=r.createBuffer()}catch(o){throw console.log("g2l.VertexBuffer: "+o),o}Object.defineProperty(t,"bufferLoader",{get:function(){return e}}),Object.defineProperty(t,"webGLBuffer",{get:function(){return n}}),Object.defineProperty(t,"size",{get:function(){return i},set:function(e){i=e}})}function I(e){var t,r;try{t=this,r=e.renderer.gl}catch(n){throw console.log("g2l.BufferLoader: "+n),n}Object.defineProperty(t,"loader",{get:function(){return e}}),this.createVertexBuffer=function(){return new m(t)},this.createIndexBuffer=function(){return new P(t)}}function N(){}function U(e){function t(e,t){var r;if(e===N.VERTEX_SHADER)r=o.createShader(o.VERTEX_SHADER);else{if(e!==N.FRAGMENT_SHADER)return null;r=o.createShader(o.FRAGMENT_SHADER)}if(o.shaderSource(r,t),o.compileShader(r),o.getShaderParameter(r,o.COMPILE_STATUS)===!1){var n=o.getShaderInfoLog(r);throw o.deleteShader(r),"An error occurred compiling the shaders: "+n}return r}function r(e){var t=document.getElementById(e);if(null===t)return null;for(var r="",n=t.firstChild;null!==n;)n.nodeType===Node.TEXT_NODE&&(r+=n.textContent),n=n.nextSibling;var i;if("x-shader/x-vertex"===t.type)i=o.createShader(o.VERTEX_SHADER);else{if("x-shader/x-fragment"!==t.type)return null;i=o.createShader(o.FRAGMENT_SHADER)}if(o.shaderSource(i,r),o.compileShader(i),o.getShaderParameter(i,o.COMPILE_STATUS)===!1){var a=o.getShaderInfoLog(i);throw o.deleteShader(i),"An error occurred compiling the shaders: "+a}return i}function n(e,t){var r=new L(i),n=r.webGLProgram;if(o.attachShader(n,e),o.attachShader(n,t),o.linkProgram(n),o.getProgramParameter(n,o.LINK_STATUS)===!1){var a=o.getProgramInfoLog(n);throw o.deleteProgram(n),"Unable to initialize the (shader) program: "+a}return r}var i,o;try{i=this,o=e.renderer.gl}catch(a){throw console.log("g2l.ProgramLoader: "+a),a}Object.defineProperty(i,"loader",{get:function(){return e}}),this.setUpProgram=function(e,r){var i=t(N.VERTEX_SHADER,e),o=t(N.FRAGMENT_SHADER,r);return n(i,o)},this.setUpProgramFromHtmlElements=function(e,t){var i=r(N.VERTEX_SHADER,e),o=r(N.FRAGMENT_SHADER,t);return n(i,o)}}function F(e){var t,r,n,i,o;try{t=this,r=e.loader.renderer.gl}catch(a){throw console.log("g2l.Texture2D: "+a),a}Object.defineProperty(t,"loader",{get:function(){return _loader}}),Object.defineProperty(t,"width",{get:function(){return n},set:function(e){n=e}}),Object.defineProperty(t,"height",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(t,"webGLTexture",{get:function(){return o},set:function(e){o=e}})}function z(e){function r(){return o.createTexture()}function n(e,r){o.bindTexture(o.TEXTURE_2D,r),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,e),t.isPowerOfTwo(e.width)===!0&&t.isPowerOfTwo(e.height)===!0?(o.generateMipmap(o.TEXTURE_2D),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR_MIPMAP_LINEAR)):o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.bindTexture(o.TEXTURE_2D,null)}var i,o,a;try{i=this,o=e.renderer.gl,a={}}catch(c){throw console.log("g2l.TextureLoader: "+c),c}Object.defineProperty(i,"loader",{get:function(){return e}}),this.loadTexture2D=function(e){if(void 0===e)throw"An argument-undefined exception raised.";var t=a[e];if(void 0!==t)return t;var t=new F(i);a[e]=t;var o=new Image;return o.addEventListener("load",function(){try{var e=r();n(o,e),t.width=o.width,t.height=o.height,t.webGLTexture=e}catch(i){throw console.log("g2l.TextureLoader.loadTexture2D(): "+i),i}}),o.addEventListener("error",function(){console.log("g2l.TextureLoader.loadTexture2D() could not load image: "+e)}),o.src=e,t}}function V(e){function t(){n=e.gl,Object.defineProperty(r,"renderer",{get:function(){return e}})}var r,n,i,o,a;try{r=this,t(),i=new I(r),o=new z(r),a=new U(r)}catch(c){throw console.log("g2l.Loader: "+c),c}this.createVertexBuffer=function(){return i.createVertexBuffer()},this.createIndexBuffer=function(){return i.createIndexBuffer()},this.setUpProgram=function(e,t){return a.setUpProgram(e,t)},this.setUpProgramFromHtmlElements=function(e,t){return a.setUpProgram(e,t)},this.loadTexture2D=function(e){return o.loadTexture2D(e)}}function j(){this.canvas=null,this.usesDefaultStyles=!0}function X(e){function t(){if(null!==e.canvas)E=e.canvas;else{if(void 0===document.body)throw"document.body === undefined";E=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),E.width=X.CANVAS_WIDTH,E.height=X.CANVAS_HEIGHT}}function r(){if(e.usesDefaultStyles!==!1){var t=E.style;t.width="100%",t.height="100%",t.display="block"}}function n(){if(l=E.getContext("webgl"),null===l){if(l=E.getContext("experimental-webgl"),null===l)throw alert("Unable to initialize WebGL. Your browser may not support it."),"A WebGL-not-supported exception raised.";console.log("Your browser supports WebGL. \n\nHowever, it indicates the support is experimental. That is, not all WebGL functionality may be supported, and content may not run as expected.")}l.depthRange(y.NEAR_CLIP_PLANE,y.FAR_CLIP_PLANE),d=X.DEFAULT_CLEAR_COLOR,h=X.DEFAULT_CLEAR_DEPTH,T=X.DEFAULT_CLEAR_STENCIL,l.clearColor(d.r,d.g,d.b,d.a),l.clearDepth(h),l.clearStencil(T),i(),l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!0)}function i(){o(),a(),c(),u()}function o(){l.disable(l.BLEND)}function a(){l.enable(l.DEPTH_TEST),l.depthFunc(l.LEQUAL),l.disable(l.STENCIL_TEST)}function c(){}function u(){l.enable(l.CULL_FACE),l.cullFace(l.BACK)}function s(){void 0===window.requestAnimationFrame&&(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}())}var f,E,l,O,_,d,h,T;try{f=this,void 0===e&&(e=new j),t(),r(),n(),s()}catch(A){throw console.log("g2l.Renderer: "+A),A}Object.defineProperty(f,"canvas",{get:function(){return E}}),Object.defineProperty(f,"gl",{get:function(){return l}}),Object.defineProperty(f,"loader",{get:function(){return void 0===O&&(O=new V(f)),O}}),Object.defineProperty(f,"program",{get:function(){return _},set:function(e){e!==_&&(_=e,l.useProgram(_.webGLProgram))}}),this.run=function(e,t){function r(){requestAnimationFrame(r),void 0!==e&&e(),void 0!==t&&t()}r()},this.clear=function(e,t,r,n){void 0!==t&&g.areEqual(t,d)===!1&&(d=t,l.clearColor(d.r,d.g,d.b,d.a)),void 0!==r&&r!==h&&(h=r,l.clearDepth(h)),void 0!==n&&n!==T&&(T=n,l.clearStencil(T)),void 0===e&&(e=X.DEFAULT_CLEAR_OPTIONS),l.clear(e)},this.drawPrimitives=function(e,t,r){l.drawArrays(e,t,r)},this.drawIndexedPrimitives=function(e,t,r,n){void 0===n&&(n=0),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,e.webGLBuffer),l.drawElements(t,r,l.UNSIGNED_SHORT,n)},this.getAttributeLocation=function(e,t){return l.getAttribLocation(e.webGLProgram,t)},this.getUniformLocation=function(e,t){return l.getUniformLocation(e.webGLProgram,t)},this.setAttribute=function(e,t){l.bindBuffer(l.ARRAY_BUFFER,t.webGLBuffer),l.vertexAttribPointer(e,t.size,l.FLOAT,!1,0,0),l.enableVertexAttribArray(e)},this.setSampler=function(e,t,r){void 0===r&&(r=X.DEFAULT_TEXTURE_UNIT),l.activeTexture(l.TEXTURE0+r),l.bindTexture(l.TEXTURE_2D,t.webGLTexture),l.uniform1i(e,r)},this.setVector2DUniform=function(e,t){l.uniform2fv(e,t)},this.setVector3DUniform=function(e,t){l.uniform3fv(e,t)},this.setVector4DUniform=function(e,t){l.uniform4fv(e,t)},this.setMatrix4x4Uniform=function(e,t){l.uniformMatrix4fv(e,!1,t)}}function M(){}function H(e,t){this.width=e,this.height=t}function B(e,t,r){this.width=e,this.height=t,this.depth=r}function G(){}function W(e,t,r,n,i,o,a){if(void 0===r&&(r=W.DEFAULT_CREATION_OPTIONS),this.creationOptions=r,void 0===o&&(o=W.DEFAULT_VERTEX_COLOR),void 0===a&&(a=W.DEFAULT_SOURCE_TEXTURE_COORDINATE_RECT),this.texture=t,(r&G.VERTEX_POSITIONS)!==G.VERTEX_POSITIONS)throw"A sprite-creation exception raised.";this.vertexPositions=W.createVertexPositions(n,i),this.vertexColors=(r&G.VERTEX_COLORS)===G.VERTEX_COLORS?W.createVertexColors(o):null,this.vertexTextureCoordinates=(r&G.VERTEX_TEXTURE_COORDINATES)===G.VERTEX_TEXTURE_COORDINATES?W.createVertexTextureCoordinates(a):null}function Y(e,t,r,n,i,o,a){if(void 0===r&&(r=Y.DEFAULT_CREATION_OPTIONS),this.creationOptions=r,void 0===o&&(o=Y.DEFAULT_VERTEX_COLOR),void 0===a&&(a=Y.DEFAULT_SOURCE_TEXTURE_COORDINATE_RECT),this.texture=t,(r&G.VERTEX_POSITIONS)!==G.VERTEX_POSITIONS)throw"A sprite-creation exception raised.";this.vertexPositions=Y.createVertexPositions2(n,i),this.vertexColors=(r&G.VERTEX_COLORS)===G.VERTEX_COLORS?Y.createVertexColors2(o):Y.DEFAULT_VERTEX_COLORS2,this.vertexTextureCoordinates=(r&G.VERTEX_TEXTURE_COORDINATES)===G.VERTEX_TEXTURE_COORDINATES?Y.createVertexTextureCoordinates2(a):Y.DEFAULT_VERTEX_TEXTURE_COORDINATES2}function Z(e,t){function r(){_={position:[],color:[],textureCoordinates:[]},T={color:e.loader.createVertexBuffer(),textureCoordinates:e.loader.createVertexBuffer()},T.color.loadData(W.DEFAULT_VERTEX_COLORS,W.COLOR_SIZE),T.textureCoordinates.loadData(W.DEFAULT_VERTEX_TEXTURE_COORDINATES,W.TEXTURE_COORDINATE_SIZE)}function n(){E=e.loader.setUpProgram(Z.VERTEX_SHADER_SOURCE,Z.FRAGMENT_SHADER_SOURCE),l={vertexPosition:e.getAttributeLocation(E,"vertexPosition"),vertexColor:e.getAttributeLocation(E,"vertexColor"),vertexTextureCoordinates:e.getAttributeLocation(E,"vertexTextureCoordinates")},O={canvasClientSize:e.getUniformLocation(E,"canvasClientSize"),sampler:e.getUniformLocation(E,"sampler")}}function i(){e.program=E,e.setVector2DUniform(O.canvasClientSize,new Float32Array([e.canvas.clientWidth,e.canvas.clientHeight]));for(var t=null,r=null,n=0;n<u.length;n++){var i=u[n];t=_.position[n],e.setAttribute(l.vertexPosition,t),t=(i.creationOptions&G.VERTEX_COLORS)===G.VERTEX_COLORS?_.color[n]:T.color,e.setAttribute(l.vertexColor,t),t=(i.creationOptions&G.VERTEX_TEXTURE_COORDINATES)===G.VERTEX_TEXTURE_COORDINATES?_.textureCoordinates[n]:T.textureCoordinates,e.setAttribute(l.vertexTextureCoordinates,t),r!==i.texture&&(e.setSampler(O.sampler,i.texture),r=i.texture),e.drawPrimitives(v.TRIANGLE_STRIP,0,4)}}function o(){u=[],d===!1&&(f=!0)}var a,c,u,s,f,E,l,O,_,d,h,T;try{a=this,c=e.gl,void 0!==t&&(d=t.clearsDbAfterDrawing,h=t.areDbFrequentlyChanged),void 0===d&&(d=Z.DEFAULT_OF_IF_CLEARS_DB_AFTER_DRAWING),void 0===h&&(h=Z.DEFAULT_OF_IF_DB_FREQUENTLY_CHANGED),u=[],r(),n(),s=!1,f=!0}catch(A){throw console.log("g2l.SpriteBatch: "+A),A}Object.defineProperty(a,"renderer",{get:function(){return e}}),Object.defineProperty(a,"isBegun",{get:function(){return s}}),this.begin=function(){s=!0},this.drawSprite=function(t,r,n,i,o,c){if(d!==!1||f!==!1){if(s===!1)throw"A begin-not-called-before-drawing exception raised.";if(y.isDepthOutOfRange(n.z)!==!0){var E,l=new W(a,t,r,n,i,o,c),O=u.length;_.position.length-1<O?(E=e.loader.createVertexBuffer(),_.position.push(E)):E=_.position[O],E.loadData(l.vertexPositions,W.POSITION_SIZE),_.color.length-1<O?(E=e.loader.createVertexBuffer(),_.color.push(E)):E=_.color[O],(l.creationOptions&G.VERTEX_COLORS)===G.VERTEX_COLORS&&E.loadData(l.vertexColors,W.COLOR_SIZE),_.textureCoordinates.length-1<O?(E=e.loader.createVertexBuffer(),_.textureCoordinates.push(E)):E=_.textureCoordinates[O],(l.creationOptions&G.VERTEX_TEXTURE_COORDINATES)===G.VERTEX_TEXTURE_COORDINATES&&E.loadData(l.vertexTextureCoordinates,W.TEXTURE_COORDINATE_SIZE),u.push(l)}}},this.end=function(){if(s===!1)throw"A begin-not-called-before-drawing exception raised.";0<u.length&&((d===!0||d===!1&&f===!0)&&d===!1&&(f=!1),i(),d===!0&&o()),s=!1}}function q(e,t){function r(){d=[],h=[],T={position:[],color:[],textureCoordinates:[]},A=[],g={color:e.loader.createVertexBuffer(),textureCoordinates:e.loader.createVertexBuffer()},g.color.loadData(Y.DEFAULT_VERTEX_COLORS,Y.COLOR_SIZE),g.textureCoordinates.loadData(Y.DEFAULT_VERTEX_TEXTURE_COORDINATES,Y.TEXTURE_COORDINATE_SIZE),p=e.loader.createIndexBuffer(),p.loadData(Y.DEFAULT_INDICES),P=[],b=[],x=[],w=[]}function n(){l=e.loader.setUpProgram(q.VERTEX_SHADER_SOURCE,q.FRAGMENT_SHADER_SOURCE),O={vertexPosition:e.getAttributeLocation(l,"vertexPosition"),vertexColor:e.getAttributeLocation(l,"vertexColor"),vertexTextureCoordinates:e.getAttributeLocation(l,"vertexTextureCoordinates")},_={canvasClientSize:e.getUniformLocation(l,"canvasClientSize"),sampler:e.getUniformLocation(l,"sampler")}}function i(){var t,r;d.push(C),L=d.length-1;var n=P.length/(Y.POSITION_SIZE*Y.VERTEX_COUNT);h.push(n),T.position.length-1<L?(t=e.loader.createVertexBuffer(),T.position.push(t)):t=T.position[L],t.loadData(new Float32Array(P),Y.POSITION_SIZE),T.color.length-1<L?(t=e.loader.createVertexBuffer(),T.color.push(t)):t=T.color[L],t.loadData(new Float32Array(b),Y.COLOR_SIZE),T.textureCoordinates.length-1<L?(t=e.loader.createVertexBuffer(),T.textureCoordinates.push(t)):t=T.textureCoordinates[L],t.loadData(new Float32Array(x),Y.TEXTURE_COORDINATE_SIZE),A.length-1<L?(r=e.loader.createIndexBuffer(),A.push(r)):r=A[L],r.loadData(new Uint16Array(w)),P=[],b=[],x=[],w=[]}function o(){e.program=l,e.setVector2DUniform(_.canvasClientSize,new Float32Array([e.canvas.clientWidth,e.canvas.clientHeight]));for(var t=0;L>=t;t++)e.setSampler(_.sampler,d[t]),e.setAttribute(O.vertexPosition,T.position[t]),e.setAttribute(O.vertexColor,T.color[t]),e.setAttribute(O.vertexTextureCoordinates,T.textureCoordinates[t]),e.drawIndexedPrimitives(A[t],v.TRIANGLE_LIST,Y.INDEX_COUNT*h[t])}function a(){s=[],S===!1&&(E=!0)}var c,u,s,f,E,l,O,_,d,h,T,A,S,R,g,p,P,b,x,w,C,L;try{c=this,u=e.gl,void 0!==t&&(S=t.clearsDbAfterDrawing,R=t.areDbFrequentlyChanged),void 0===S&&(S=q.DEFAULT_OF_IF_CLEARS_DB_AFTER_DRAWING),void 0===R&&(R=q.DEFAULT_OF_IF_DB_FREQUENTLY_CHANGED),s=[],r(),n(),f=!1,E=!0}catch(D){throw console.log("g2l.SpriteBatch2: "+D),D}Object.defineProperty(c,"renderer",{get:function(){return e}}),this.begin=function(){f=!0,C=null,L=-1},this.drawSprite=function(e,t,r,n,o,a){if(S!==!1||E!==!1){if(f===!1)throw"A begin-not-called-before-drawing exception raised.";if(y.isDepthOutOfRange(r.z)!==!0){null!==C&&C!==e&&i();var u=new Y(c,e,t,r,n,o,a),l=P.length/(Y.POSITION_SIZE*Y.VERTEX_COUNT),O=Y.VERTEX_COUNT*l;P=P.concat(u.vertexPositions),b=b.concat(u.vertexColors),x=x.concat(u.vertexTextureCoordinates),w=w.concat([O+0,O+1,O+2,O+2,O+1,O+3]),s.push(u),C=e}}},this.end=function(){if(f===!1)throw"A begin-not-called-before-drawing exception raised.";i(),0<s.length&&((S===!0||S===!1&&E===!0)&&S===!1&&(E=!1),o(),S===!0&&a()),d=[],h=[],f=!1}}function K(){}function k(){}function Q(){}function J(){}function $(){}function ee(){}function te(){}function re(e){var t;try{t=this}catch(r){throw console.log("g2l.World2DState: ",r),r}Object.defineProperty(t,"world",{get:function(){return e}})}function ne(e){re.call(this,e)}function ie(e,t,r,n,i,o){re.call(this,e);var a,c,u;try{a=this,Object.defineProperty(a,"screenPosition",{get:function(){return t}}),u=e.size,Object.defineProperty(a,"oldSize",{get:function(){return u}}),Object.defineProperty(a,"newSize",{get:function(){return r}}),Object.defineProperty(a,"updatingCallback",{get:function(){return i}}),Object.defineProperty(a,"finishingCallback",{get:function(){return o}}),c=new h(_.EASE_OUT,n,!1),c.start(),Object.defineProperty(a,"sineEase",{get:function(){return c}})}catch(s){throw console.log("g2l.World2DStateZoomingAtScreenPosition: ",s),s}}function oe(){this.backgroundColor=p.WHITE,this.zoomDuration=250,this.zoomScaleFactor=2,this.hitLineSegmentScreenThicknessTimes=5,this.viewMargin=125}function ae(e,r){function n(){var t=new H(e.canvas.clientWidth,e.canvas.clientHeight);if(H.areEqual(t,S)!==!0){S=t;var r=1/O;l=H.multiplySizeByScalar(t,r),d=!0,c(!1,!0)}}function i(){null!==_&&a(),_=[];for(var e=te.NEAREST_ITEMS-te.FARTHEST_ITEMS+1,t=0;e>t;t++)_.push([])}function a(){if(null!=_){for(var e=0;e<_.length;e++){for(var t=_[e],r=0;r<t.length;r++){var n=t[r];null!==n&&n.dispose()}_[e]=null}_=null}}function c(e){for(var t=0;t<_.length;t++)for(var r=_[t],n=0;n<r.length;n++){var i=r[n];i.invalidateBounds()}}var u,s,f,E,l,O,_,d,h,T,A,S;try{u=this,void 0===r&&(r=new oe),s=new ne(u),f=new Z(e),E=new o(0,0),O=1,i(),S=new H(0,0),n(),d=!1,h=0,T=0,A=null}catch(g){throw console.log("g2l.World2D: "+g),g}Object.defineProperty(u,"renderer",{get:function(){return e}}),Object.defineProperty(u,"style",{get:function(){return r},set:function(e){e!==r&&(r=e)}}),Object.defineProperty(u,"state",{get:function(){return s},set:function(e){e!==s&&(s=e)}}),Object.defineProperty(u,"spriteBatch",{get:function(){return f}}),Object.defineProperty(u,"centerPosition",{get:function(){return E}}),Object.defineProperty(u,"size",{get:function(){return l}}),Object.defineProperty(u,"worldToScreenScaleFactor",{get:function(){return O}}),Object.defineProperty(u,"drawnImageCount",{get:function(){return h},set:function(e){h=e}}),Object.defineProperty(u,"drawnLineSegmentCount",{get:function(){return T},set:function(e){T=e}}),Object.defineProperty(u,"lastDrawnItem",{get:function(){return A},set:function(e){A=e}}),this.addItem=function(e,t){if(null===t)throw"An argument-null exception raised.";var r=e;if(ee.isIndexValid(_.length,r)===!1)throw"An index-out-of-range exception raised.";if($.contains(_[r],t)===!0)throw"A world-layer-item-already-exists exception raised.";_[r].push(t),d=!0},this.removeItem=function(e){if(null===e)throw"An argument-null exception raised.";for(var t=!1,r=0;r<_.length;r++){var n=_[r];if($.contains(n,e)===!0){t=!0;var i=$.remove(n,e);if(i===!1)return!1}}return t===!1?!1:(d=!0,!0)},this.update=function(){if(s.update(),d===!0){for(var e=0;e<_.length;e++)for(var t=_[e],r=0;r<t.length;r++)t[r].update();d=!1}},this.draw=function(){n(),h=0,T=0,e.clear(R.COLOR_BUFFER,r.backgroundColor);for(var t=0;t<_.length;t++)for(var i=_[t],o=0;o<i.length;o++)i[o].draw();this.endSpriteBatch(),A=null},this.move=function(e){if(0!==e.x||0!==e.y){var t=1/O,r=o.multiplyVectorByScalar(e,t);E=o.addVectors(E,r),d=!0,c()}},this.zoomAt=function(e,t,n,i){if(0!==t){var o=0>t?H.multiplySizeByScalar(l,r.zoomScaleFactor):H.multiplySizeByScalar(l,1/r.zoomScaleFactor);this.state=new ie(this,e,o,r.zoomDuration,n,i)}},this.resetSize=function(){n()},this.invalidateItems=function(){d=!0},this.setBounds=function(e,r){var n;e===E?n=!1:(E=e,n=!0);var i;if(r===l)i=!1;else{var o=l.width/l.height,a=r.width/r.height;O*=t.areEqual(o,a)===!0?l.width/r.width:a>=o?l.jeight/r.jeight:l.width/r.width,l=r,i=!0}d=!0,c(n,i)},this.drawsItem=function(e){return e.isVisible===!1||e.isOutOfBounds===!0?!1:!0},this.endSpriteBatch=function(){if(f.isBegun!==!1){var t=e.gl;t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),f.end()}},this.endLineSegmentBatch=function(){},this.convertPositionFromScreenToWorldSpace=function(e){var t=new o(E.x-.5*l.width,E.y-.5*l.height),r=1/O;return new o(t.x+e.x*r,t.y+e.y*r)},this.convertPositionFromWorldToScreenSpace=function(e){var t=new o(E.x-.5*l.width,E.y-.5*l.height);return new o((e.x-t.x)*O,(e.y-t.y)*O)},this.convertLengthFromScreenToWorldSpace=function(e){return e/O},this.convertLengthFromWorldToScreenSpace=function(e){return e*O}}function ce(e){var t,r,n,i,o,a,c;try{t=this,r=!0,n=!0,i=!1,o=!1,c=!0}catch(u){throw console.log("g2l.World2DItem: "+u),u}Object.defineProperty(t,"world",{get:function(){return e}}),Object.defineProperty(t,"isEnabled",{get:function(){return r},set:function(t){t!==r&&(r=t,r===!0&&e.invalidateItems())}}),Object.defineProperty(t,"isVisible",{get:function(){return n},set:function(e){e!==n&&(n=e)}}),Object.defineProperty(t,"isSelected",{get:function(){return i},set:function(e){e!==i&&(i=e)}}),Object.defineProperty(t,"isOutOfBounds",{get:function(){return c===!0&&(t.checkIfOutOfBounds(),c=!1),o},set:function(e){e!==o&&(o=e)}}),Object.defineProperty(t,"tag",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(t,"hasToCheckBounds",{get:function(){return c},set:function(e){c=e}})}function ue(e){ce.call(this,e);var t;try{t=this}catch(r){throw console.log("g2l.World2DLineSegment: "+r),r}}function se(e,t,r,n){ce.call(this,e);var i,a,c,u,s,f,E;try{if(i=this,null===t)throw"An argument-null exception raised.";s=!1,f=new H(0,0),E=new H(Number.MAX_VALUE,Number.MAX_VALUE),Object.defineProperty(i,"texture",{get:function(){return t},set:function(e){t=e}}),Object.defineProperty(i,"centerPosition",{get:function(){return r},set:function(t){o.areEqual(t,r)!==!0&&(r=t,a=e.convertPositionFromWorldToScreenSpace(r),i.invalidateBounds())}}),Object.defineProperty(i,"size",{get:function(){return n},set:function(t){H.areEqual(t,n)!==!0&&(n=t,c=H.multiplySizeByScalar(n,e.worldToScreenScaleFactor),i.invalidateBounds())}}),Object.defineProperty(i,"centerScreenPosition",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(i,"screenSize",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(i,"sourceTextureCoordinateRect",{get:function(){return u},set:function(e){u=e}}),Object.defineProperty(i,"boundsScreenSize",{get:function(){return s},set:function(e){s=e}}),Object.defineProperty(i,"minScreenSize",{get:function(){return f},set:function(e){f=e}}),Object.defineProperty(i,"maxScreenSize",{get:function(){return E},set:function(e){E=e}});var l=n;n=0,this.size=l,this.update()}catch(O){throw console.log("g2l.World2DImage: "+O),O}}function fe(){}function Ee(){var e,t,r,n,i,o;try{e=this,t=Ee.FRAME_COUNT_TO_AVERAGE,r=[],n=0,i=0,o=0;for(var a=0;a<Ee.FRAME_COUNT_TO_AVERAGE;a++)r[a]=1}catch(c){throw console.log("g2l.Fps: "+c),c}Object.defineProperty(e,"average",{get:function(){return o}}),this.update=function(){var e=(new Date).getTime(),a=.001*(e-i);i=e,t+=a-r[n],r[n]=a,n++,n===Ee.FRAME_COUNT_TO_AVERAGE&&(n=0),o=Math.floor(1/(t/Ee.FRAME_COUNT_TO_AVERAGE)+.5)}}function le(){}function Oe(){}t.PI=3.141592653589793,t.PI_OVER_TWO=1.5707963267948966,t.PI_OVER_FOUR=.7853981633974483,t.TWO_PI=6.283185307179586,t.PI_OVER_ONE_EIGHTY=.0174532925199432,t.ONE_EIGHTY_OVER_PI=57.29577951308232,t.RADIANS_OF_FORTY_FIVE_DEGREES=t.PI_OVER_FOUR,t.RADIANS_OF_NINETY_DEGREES=t.PI_OVER_TWO,t.RADIANS_OF_ONE_EIGHTY_DEGREES=t.PI,t.RADIANS_OF_THREE_SIXTY_DEGREES=t.TWO_PI,t.EPSILON=1e-5,t.toRadians=function(e){if("number"!=typeof e)throw"typeof(degrees) !== 'number'";return t.PI_OVER_ONE_EIGHTY*e},t.toDegrees=function(e){if("number"!=typeof e)throw"typeof(degrees) !== 'number'";return t.ONE_EIGHTY_OVER_PI*e},t.isZero=function(e){if("number"!=typeof e)throw"typeof(s) !== 'number'";return e<=-t.EPSILON||t.EPSILON<=e?!1:!0},t.areEqual=function(e,r){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof r)throw"typeof(s2) !== 'number'";var n=e-r;return n<=-t.EPSILON||t.EPSILON<=n?!1:!0},t.isScalar1LessThanScalar2=function(e,r){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof r)throw"typeof(s2) !== 'number'";return e-r<=-t.EPSILON?!0:!1},t.isScalar1LessThanOrEqualToScalar2=function(e,r){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof r)throw"typeof(s2) !== 'number'";return e-r<t.EPSILON?!0:!1},t.isScalar1GreaterThanScalar2=function(e,r){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof r)throw"typeof(s2) !== 'number'";return t.EPSILON<=e-r?!0:!1},t.isScalar1GreaterThanOrEqualToScalar2=function(e,r){if("number"!=typeof e)throw"typeof(s1) !== 'number'";if("number"!=typeof r)throw"typeof(s2) !== 'number'";return-t.EPSILON<e-r?!0:!1},t.isPowerOfTwo=function(e){if("number"!=typeof e)throw"typeof(s) !== 'number'";return 0!==e&&0===(e&e-1)?!0:!1},Object.freeze(t),r.X=0,r.Y=1,r.Z=2,Object.freeze(r),n.prototype={},Object.defineProperty(n.prototype,"s11",{get:function(){return this.db[0]}}),Object.defineProperty(n.prototype,"s12",{get:function(){return this.db[4]}}),Object.defineProperty(n.prototype,"s13",{get:function(){return this.db[8]}}),Object.defineProperty(n.prototype,"s14",{get:function(){return this.db[12]}}),Object.defineProperty(n.prototype,"s21",{get:function(){return this.db[1]}}),Object.defineProperty(n.prototype,"s22",{get:function(){return this.db[5]}}),Object.defineProperty(n.prototype,"s23",{get:function(){return this.db[9]}}),Object.defineProperty(n.prototype,"s24",{get:function(){return this.db[13]}}),Object.defineProperty(n.prototype,"s31",{get:function(){return this.db[2]}}),Object.defineProperty(n.prototype,"s32",{get:function(){return this.db[6]}}),Object.defineProperty(n.prototype,"s33",{get:function(){return this.db[10]}}),Object.defineProperty(n.prototype,"s34",{get:function(){return this.db[14]}}),Object.defineProperty(n.prototype,"s41",{get:function(){return this.db[3]}}),Object.defineProperty(n.prototype,"s42",{get:function(){return this.db[7]}}),Object.defineProperty(n.prototype,"s43",{get:function(){return this.db[11]}}),Object.defineProperty(n.prototype,"s44",{get:function(){return this.db[15]}}),n.ELEMENT_COUNT=16,n.fromArray=function(e){return new n(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},n.createIdentityMatrix=function(){return new n(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},n.createViewMatrix=function(e,t,r){var i,o,a,u;u=c.negateVector(t),a=c.calculateUnitVectorOf(u),u=c.calculateCrossProductOf(r,a),i=c.calculateUnitVectorOf(u),o=c.calculateCrossProductOf(a,i);var s=i.x,f=o.x,E=a.x,l=0,O=i.y,_=o.y,d=a.y,h=0,T=i.z,A=o.z,S=a.z,R=0,g=-c.calculateDotProductOf(i,e),p=-c.calculateDotProductOf(o,e),y=-c.calculateDotProductOf(a,e),P=1;return new n(s,O,T,g,f,_,A,p,E,d,S,y,l,h,R,P)},n.createProjectionMatrix=function(e,t,r,i){void 0===e&&(e=f.FIELD_OF_VIEW_Y),void 0===r&&(r=f.DEFAULT_DISTANCE_TO_NEAR_PLANE),void 0===i&&(i=f.DEFAULT_DISTANCE_TO_FAR_PLANE);var o,a;a=1/Math.tan(e/2),o=a/t;var c=[];return c[0]=o,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=a,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=i/(r-i),c[11]=-1,c[12]=0,c[13]=0,c[14]=r*i/(r-i),c[15]=0,n.fromArray(c)},n.createScaleMatrix=function(e){return new n(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1)},n.createRotationMatrix=function(e,t){var i=Math.cos(t),o=Math.sin(t);
switch(e){case r.X:return new n(1,0,0,0,0,i,-o,0,0,o,i,0,0,0,0,1);case r.Y:return new n(i,0,o,0,0,1,0,0,-o,0,i,0,0,0,0,1);case r.Z:return new n(i,-o,0,0,o,i,0,0,0,0,1,0,0,0,0,1);default:console.log("A not-supported exception raised.")}},n.createTranslationMatrix=function(e){return new n(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1)},n.multiplyMatrices=function(e,t){var r=e.db,i=t.db,o=[],a=r[0],c=r[4],u=r[8],s=r[12],f=r[1],E=r[5],l=r[9],O=r[13],_=r[2],d=r[6],h=r[10],T=r[14],A=r[3],S=r[7],R=r[11],g=r[15],p=i[0],y=i[4],P=i[8],b=i[12],x=i[1],w=i[5],C=i[9],v=i[13],L=i[2],D=i[6],m=i[10],I=i[14],N=i[3],U=i[7],F=i[11],z=i[15];return o[0]=a*p+c*x+u*L+s*N,o[4]=a*y+c*w+u*D+s*U,o[8]=a*P+c*C+u*m+s*F,o[12]=a*b+c*v+u*I+s*z,o[1]=f*p+E*x+l*L+O*N,o[5]=f*y+E*w+l*D+O*U,o[9]=f*P+E*C+l*m+O*F,o[13]=f*b+E*v+l*I+O*z,o[2]=_*p+d*x+h*L+T*N,o[6]=_*y+d*w+h*D+T*U,o[10]=_*P+d*C+h*m+T*F,o[14]=_*b+d*v+h*I+T*z,o[3]=A*p+S*x+R*L+g*N,o[7]=A*y+S*w+R*D+g*U,o[11]=A*P+S*C+R*m+g*F,o[15]=A*b+S*v+R*I+g*z,n.fromArray(o)},n.transposeMatrix=function(e){return new n(e.s11,e.s21,e.s31,e.s41,e.s12,e.s22,e.s32,e.s42,e.s13,e.s23,e.s33,e.s43,e.s14,e.s24,e.s34,e.s44)},n.invertMatrix=function(e){var t=e.s11,r=e.s12,i=e.s13,o=e.s14,a=e.s21,c=e.s22,u=e.s23,s=e.s24,f=e.s31,E=e.s32,l=e.s33,O=e.s34,_=e.s41,d=e.s42,h=e.s43,T=e.s44,A=u*O*d-s*l*d+s*E*h-c*O*h-u*E*T+c*l*T,S=o*l*d-i*O*d-o*E*h+r*O*h+i*E*T-r*l*T,R=i*s*d-o*u*d+o*c*h-r*s*h-i*c*T+r*u*T,g=o*u*E-i*s*E-o*c*l+r*s*l+i*c*O-r*u*O,p=t*A+a*S+f*R+_*g;if(0===p)throw"Can't invert matrix cuz determinant is 0";return p=1/p,n.fromArray([A*p,(s*l*_-u*O*_-s*f*h+a*O*h+u*f*T-a*l*T)*p,(c*O*_-s*E*_+s*f*d-a*O*d-c*f*T+a*E*T)*p,(u*E*_-c*l*_-u*f*d+a*l*d+c*f*h-a*E*h)*p,S*p,(i*O*_-o*l*_+o*f*h-t*O*h-i*f*T+t*l*T)*p,(o*E*_-r*O*_-o*f*d+t*O*d+r*f*T-t*E*T)*p,(r*l*_-i*E*_+i*f*d-t*l*d-r*f*h+t*E*h)*p,R*p,(o*u*_-i*s*_-o*a*h+t*s*h+i*a*T-t*u*T)*p,(r*s*_-o*c*_+o*a*d-t*s*d-r*a*T+t*c*T)*p,(i*c*_-r*u*_-i*a*d+t*u*d+r*a*h-t*c*h)*p,g*p,(i*s*f-o*u*f+o*a*l-t*s*l-i*a*O+t*u*O)*p,(o*c*f-r*s*f-o*a*E+t*s*E+r*a*O-t*c*O)*p,(r*u*f-i*c*f+i*a*E-t*u*E-r*a*l+t*c*l)*p])},n.areEqual=function(e,t){if(e instanceof n==!1||t instanceof n==!1)return!1;for(var r=e.db,i=t.db,o=0;o<n.ELEMENT_COUNT;o++)if(r[o]!==i[o])return!1;return!0},Object.freeze(n),i.prototype={toMatrix4x4:function(){var e=this.x,t=this.y,r=this.z,i=this.w,o=e*e,a=t*t,c=r*r,u=e*t,s=r*i,f=r*e,E=t*i,l=t*r,O=e*i,_=[1-2*(a+c),2*(u+s),2*(f-E),0,2*(u-s),1-2*(c+o),2*(l+O),0,2*(f+E),2*(l-O),1-2*(a+o),0,0,0,0,1];return n.fromArray(_)}},i.ELEMENT_COUNT=4,i.fromAxisAngle=function(e,t){e=c.calculateUnitVectorOf(e);var r=.5*t,n=Math.sin(r),o=Math.cos(r);return new i(e.x*n,e.y*n,e.z*n,o)},i.fromArray=function(e){return new i(e[0],e[1],e[2],e[3])},i.createIdentityQuaternion=function(){return new i(0,0,0,1)},i.calculateUnitQuaternionOf=function(e){var r=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w);if(r<t.EPSILON)return new i(0,0,0,0);var n=1/r;return new i(e.x*n,e.y*n,e.z*n,e.w*n)},i.areEqual=function(e,t){return e instanceof i==!1||t instanceof i==!1?!1:e.x!==t.x||e.y!==t.y||e.z!==t.z||e.w!==t.w?!1:!0},Object.freeze(i),o.prototype={toArray:function(){return[this.x,this.y]}},o.ELEMENT_COUNT=2,o.fromArray=function(e){return new o(e[0],e[1])},o.calculateUnitVectorOf=function(e){var r=Math.sqrt(e.x*e.x+e.y*e.y);if(r<t.EPSILON)return new o(0,0);var n=1/r;return new o(e.x*n,e.y*n)},o.negateVector=function(e){return new o(-e.x,-e.y)},o.addVectors=function(e,t){return new o(e.x+t.x,e.y+t.y)},o.subtractVectors=function(e,t){return new o(e.x-t.x,e.y-t.y)},o.multiplyVectorByScalar=function(e,t){return new o(e.x*t,e.y*t)},o.calculateLengthOf=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},o.calculateLengthSquaredOf=function(e){return e.x*e.x+e.y*e.y},o.calculateDotProductOf=function(e,t){return e.x*t.x+e.y*t.y},o.calculatePerpendicularVectorOf=function(e){return new o(-e.y,e.x)},o.calculatePerpendicularDotProductOf=function(e,t){return-e.y*t.x+e.x*t.y},o.areEqual=function(e,t){return e instanceof o==!1||t instanceof o==!1?!1:e.x!==t.x||e.y!==t.y?!1:!0},Object.freeze(o),a.prototype={toArray:function(){return[this.x,this.y,this.z,this.w]}},Object.defineProperty(a.prototype,"xyz",{get:function(){return new c(this.x,this.y,this.z)}}),a.ELEMENT_COUNT=4,a.fromArray=function(e){return new a(e[0],e[1],e[2],e[3])},a.calculateUnitVectorOf=function(e){var r=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w);if(r<t.EPSILON)return new a(0,0,0,0);var n=1/r;return new a(e.x*n,e.y*n,e.z*n,e.w*n)},a.addVectors=function(e,t){return new a(e.x+t.x,e.y+t.y,e.z+t.z,e.w+t.w)},a.subtractVectors=function(e,t){return new a(e.x-t.x,e.y-t.y,e.z-t.z,e.w-t.w)},a.multiplyVectorByScalar=function(e,t){return new a(e.x*t,e.y*t,e.z*t,e.w*t)},a.calculateLengthOf=function(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w)},a.calculateLengthSquaredOf=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},a.transform=function(e,t){return new a(e.s11*t.x+e.s12*t.y+e.s13*t.z+e.s14*t.w,e.s21*t.x+e.s22*t.y+e.s23*t.z+e.s24*t.w,e.s31*t.x+e.s32*t.y+e.s33*t.z+e.s34*t.w,e.s41*t.x+e.s42*t.y+e.s43*t.z+e.s44*t.w)},a.areEqual=function(e,t){return e instanceof a==!1||t instanceof a==!1?!1:e.x!==t.x||e.y!==t.y||e.z!==t.z||e.w!==t.w?!1:!0},Object.freeze(a),c.prototype={toArray:function(){return[this.x,this.y,this.z]}},Object.defineProperty(c.prototype,"xy",{get:function(){return new o(this.x,this.y)}}),c.ELEMENT_COUNT=3,c.fromArray=function(e){return new c(e[0],e[1],e[2])},c.calculateUnitVectorOf=function(e){var r=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);if(r<t.EPSILON)return new c(0,0,0);var n=1/r;return new c(e.x*n,e.y*n,e.z*n)},c.negateVector=function(e){return new c(-e.x,-e.y,-e.z)},c.addVectors=function(e,t){return new c(e.x+t.x,e.y+t.y,e.z+t.z)},c.subtractVectors=function(e,t){return new c(e.x-t.x,e.y-t.y,e.z-t.z)},c.multiplyVectorByScalar=function(e,t){return new c(e.x*t,e.y*t,e.z*t)},c.calculateLengthOf=function(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)},c.calculateLengthSquaredOf=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},c.calculateDotProductOf=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},c.calculateCrossProductOf=function(e,t){return new c(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z,e.x*t.y-e.y*t.x)},c.transformPoint=function(e,t){var r=new a(t.x,t.y,t.z,1),n=a.Transform(e,r),i=1/n.w;return new c(n.x*i,n.y*i,n.z*i)},c.transformVector=function(e,t){var r=new a(t.x,t.y,t.z,0);return t=a.Transform(e,r),new c(t.x,t.y,t.z)},c.transform=function(e,t){var r=t.X+t.X,n=t.Y+t.Y,i=t.Z+t.Z,o=t.W*r,a=t.W*n,u=t.W*i,s=t.X*r,f=t.X*n,E=t.X*i,l=t.Y*n,O=t.Y*i,_=t.Z*i,d=1-l-_,h=f-u,T=E+a,A=f+u,S=1-s-_,R=O-o,g=E-a,p=O+o,y=1-s-l;return new c(e.X*d+e.Y*h+e.Z*T,e.X*A+e.Y*S+e.Z*R,e.X*g+e.Y*p+e.Z*y)},c.areEqual=function(e,t){return e instanceof c==!1||t instanceof c==!1?!1:e.x!==t.x||e.y!==t.y||e.z!==t.z?!1:!0},Object.freeze(c),u.X_AXIS=new c(1,0,0),u.Y_AXIS=new c(0,1,0),u.Z_AXIS=new c(0,0,1),Object.freeze(u),Object.freeze(s),f.prototype={zoom:function(e){var t=c.multiplyVectorByScalar(c.calculateUnitVectorOf(this.facingDirection),e);this.position=c.addVectors(this.position,t),this.invalidateViewMatrix()}},f.DEFAULT_FACING_DIRECTION=c.negateVector(u.Z_AXIS),f.DEFAULT_UP_DIRECTION=u.Y_AXIS,f.FIELD_OF_VIEW_Y=t.PI_OVER_FOUR,f.MIN_DISTANCE_TO_NEAR_PLANE=10,f.MAX_DISTANCE_TO_FAR_PLANE=1e6,f.DEFAULT_DISTANCE_TO_NEAR_PLANE=f.MIN_DISTANCE_TO_NEAR_PLANE,f.DEFAULT_DISTANCE_TO_FAR_PLANE=1e5,Object.freeze(f),E.prototype={update:function(){}},Object.freeze(E),l.inherit=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r},Object.freeze(l),l.inherit(O,E),Object.freeze(O),_.EASE_IN=0,_.EASE_OUT=1,_.EASE_IN_OUT=2,Object.freeze(_),Object.freeze(d),Object.freeze(h),l.inherit(T,E),T.prototype.update=function(){var e=this.sineEase,t=e.isFinished,r=e.ratioOfCurrentToTotalSineOfAngleOffset;void 0!==this.updatingCallback&&this.updatingCallback(e.ratioOfCurrentToTotalTimeOffset);var n=this.distance*r;this.camera.baseZoom(n-this.zoomedDistance),this.zoomedDistance=n,t===!0&&(void 0!==this.finishingCallback&&this.finishingCallback(),this.camera.state=new O(this.camera))},Object.freeze(T),l.inherit(A,f),A.DEFAULT_ZOOM_DURATION=250,Object.freeze(A),S.fromDisplayToDrawSpace=function(e,t){return{x:t.x/e.clientWidth*e.width,y:t.y/e.clientHeight*e.height}},S.fromDrawToDisplaySpace=function(e,t){return{x:t.x/e.width*e.clientWidth,y:t.y/e.height*e.clientHeight}},Object.freeze(S),R.COLOR_BUFFER=16384,R.DEPTH_BUFFER=256,R.STENCIL_BUFFER=1024,Object.freeze(R),g.prototype={toArray:function(){return[this.r,this.g,this.b,this.a]}},g.areEqual=function(e,t){return e instanceof g==!1||t instanceof g==!1?!1:e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a?!1:!0},Object.freeze(g),p.DEFAULT_BACKGROUND=new g(32/255,32/255,32/255,1),p.BLACK=new g(0,0,0,1),p.WHITE=new g(1,1,1,1),p.TRANSPARENT=new g(1,1,1,0),p.SKY_BLUE=new g(135/255,206/255,235/255,1),p.CADET_BLUE=new g(95/255,158/255,160/255,1),p.PINK=new g(1,192/255,203/255,1),p.PHOTOSHOP_DARK_RED=new g(157/255,10/255,14/255,1),p.PHOTOSHOP_PASTEL_RED_ORANGE=new g(255,173/255,129/255,1),p.PHOTOSHOP_DARK_RED_ORANGE=new g(255,65/255,13/255,1),p.PHOTOSHOP_PASTEL_YELLOW_ORANGE=new g(253/255,198/255,137/255,1),p.PHOTOSHOP_DARK_YELLOW_ORANGE=new g(163/255,97/255,9/255,1),p.PHOTOSHOP_PASTEL_YELLOW=new g(1,247/255,.6,1),p.PHOTOSHOP_DARK_YELLOW=new g(171/255,160/255,0,1),p.PHOTOSHOP_PASTEL_PEA_GREEN=new g(196/255,223/255,155/255,1),p.PHOTOSHOP_DARK_PEA_GREEN=new g(89/255,133/255,39/255,1),p.PHOTOSHOP_PASTEL_YELLOW_GREEN=new g(162/255,211/255,156/255,1),p.PHOTOSHOP_DARK_YELLOW_GREEN=new g(25/255,122/255,48/255,1),p.PHOTOSHOP_PASTEL_GREEN=new g(130/255,202/255,156/255,1),p.PHOTOSHOP_DARK_GREEN=new g(0,114/255,54/255,1),p.PHOTOSHOP_PASTEL_GREEN_CYAN=new g(122/255,.8,200/255,1),p.PHOTOSHOP_DARK_GREEN_CYAN=new g(0,115/255,106/255,1),p.PHOTOSHOP_PASTEL_CYAN=new g(109/255,207/255,246/255,1),p.PHOTOSHOP_DARK_CYAN=new g(0,118/255,163/255,1),p.PHOTOSHOP_PASTEL_CYAN_BLUE=new g(125/255,167/255,216/255,1),p.PHOTOSHOP_DARK_CYAN_BLUE=new g(0,74/255,128/255,1),p.PHOTOSHOP_PASTEL_BLUE=new g(131/255,147/255,202/255,1),p.PHOTOSHOP_DARK_BLUE=new g(0,52/255,113/255,1),p.PHOTOSHOP_PASTEL_BLUE_VIOLET=new g(135/255,129/255,189/255,1),p.PHOTOSHOP_DARK_BLUE_VIOLET=new g(27/255,20/255,100/255,1),p.PHOTOSHOP_PASTEL_VIOLET=new g(161/255,134/255,190/255,1),p.PHOTOSHOP_DARK_VIOLET=new g(68/255,14/255,98/255,1),p.PHOTOSHOP_PASTEL_VIOLET_MAGENTA=new g(188/255,140/255,191/255,1),p.PHOTOSHOP_DARK_VIOLET_MAGENTA=new g(98/255,4/255,96/255,1),p.PHOTOSHOP_PASTEL_MAGENTA=new g(244/255,154/255,193/255,1),p.PHOTOSHOP_DARK_MAGENTA=new g(158/255,0,93/255,1),p.PHOTOSHOP_PASTEL_MAGENTA_RED=new g(245/255,152/255,157/255,1),p.PHOTOSHOP_DARK_MAGENTA_RED=new g(157/255,0,57/255,1),p.PHOTOSHOP_PALE_COOL_BROWN=new g(199/255,178/255,.6,1),p.PHOTOSHOP_DARK_COOL_BROWN=new g(83/255,71/255,65/255,1),p.PHOTOSHOP_PALE_WARM_BROWN=new g(198/255,156/255,109/255,1),p.PHOTOSHOP_DARK_WARM_BROWN=new g(117/255,76/255,36/255,1),p.OSX_SOLID_KELP=new g(89/255,136/255,123/255,1),Object.freeze(p),y.NEAR_CLIP_PLANE=0,y.FAR_CLIP_PLANE=1,y.isDepthOutOfRange=function(e){return t.isScalar1LessThanScalar2(e,y.NEAR_CLIP_PLANE)===!0||t.isScalar1LessThanScalar2(y.FAR_CLIP_PLANE,e)===!0?!0:!1},Object.freeze(y),P.prototype={loadData:function(e){var t=this.bufferLoader.loader.renderer.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.webGLBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}},Object.freeze(P),b.MIN_X=-1,b.MAX_X=1,b.MIN_Y=-1,b.MAX_Y=1,b.MIN_Z=-1,b.MAX_Z=1,Object.freeze(b),x.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","attribute vec4 vertexColor;","varying vec4 color;","uniform mat4 transform;","void main() {","gl_Position = transform * vec4(vertexPosition, 1.0);","color = vertexColor;","}"].join("\n"),x.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 color;","void main() {","gl_FragColor = color;","}"].join("\n"),Object.freeze(x),w.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","uniform mat4 transform;","void main() {","gl_Position = transform * vec4(vertexPosition, 1.0);","}"].join("\n"),w.FRAGMENT_SHADER_SOURCE=["precision mediump float;","void main() {","gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","}"].join("\n"),Object.freeze(w),C.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","attribute vec2 vertexTextureCoordinates;","varying vec2 textureCoordinates;","uniform mat4 transform;","void main() {","gl_Position = transform * vec4(vertexPosition, 1.0);","textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),C.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec2 textureCoordinates;","uniform sampler2D sampler;","void main() {","gl_FragColor = texture2D(sampler, textureCoordinates);","}"].join("\n"),Object.freeze(C),v.LINE_LIST=1,v.LINE_STRIP=3,v.TRIANGLE_LIST=4,v.TRIANGLE_STRIP=5,Object.freeze(v),Object.freeze(L),D.prototype={},Object.defineProperty(D.prototype,"right",{get:function(){return this.left+this.width}}),Object.defineProperty(D.prototype,"top",{get:function(){return this.bottom+this.height}}),Object.defineProperty(D.prototype,"center",{get:function(){return new o(this.left+.5*this.width,this.bottom+.5*this.height)}}),Object.defineProperty(D.prototype,"size",{get:function(){return new o(this.width,this.height)}}),Object.freeze(D),m.prototype={loadData:function(e,t){var r=this.bufferLoader.loader.renderer.gl;this.size=t,r.bindBuffer(r.ARRAY_BUFFER,this.webGLBuffer),r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW)}},Object.freeze(m),Object.freeze(I),N.VERTEX_SHADER=0,N.FRAGMENT_SHADER=1,Object.freeze(N),Object.freeze(U),Object.freeze(F),Object.freeze(z),Object.freeze(V),Object.freeze(j),X.CANVAS_WIDTH=1024,X.CANVAS_HEIGHT=1024,X.DEFAULT_CLEAR_OPTIONS=R.COLOR_BUFFER|R.DEPTH_BUFFER,X.DEFAULT_CLEAR_COLOR=p.DEFAULT_BACKGROUND,X.DEFAULT_CLEAR_DEPTH=1,X.DEFAULT_CLEAR_STENCIL=0,X.DEFAULT_TEXTURE_UNIT=0,Object.freeze(X),M.toClipSpace=function(e,t){return new a(b.MIN_X+t.x/e.clientWidth*(b.MAX_X-b.MIN_X),b.MIN_Y+t.y/e.clientHeight*(b.MAX_Y-b.MIN_Y),b.MIN_Z+t.z*(b.MAX_Z-b.MIN_Z),1)},Object.freeze(M),H.addSizes=function(e,t){return new H(e.width+t.width,e.height+t.height)},H.subtractSizes=function(e,t){return new H(e.width-t.width,e.height-t.height)},H.multiplySizeByScalar=function(e,t){return new H(e.width*t,e.height*t)},H.areEqual=function(e,t){return e instanceof H==!1||t instanceof H==!1?!1:e.width!==t.width||e.height!==t.height?!1:!0},Object.freeze(H),Object.freeze(B),G.VERTEX_POSITIONS=1,G.VERTEX_COLORS=2,G.VERTEX_TEXTURE_COORDINATES=4,Object.freeze(G),W.VERTEX_COUNT=4,W.POSITION_SIZE=3,W.COLOR_SIZE=4,W.TEXTURE_COORDINATE_SIZE=2,W.INDEX_COUNT=6,W.DEFAULT_CREATION_OPTIONS=G.VERTEX_POSITIONS,W.DEFAULT_SCREEN_POSITION_DEPTH=y.NEAR_CLIP_PLANE,W.DEFAULT_VERTEX_COLOR=p.WHITE,W.DEFAULT_SOURCE_TEXTURE_COORDINATE_RECT=new D(0,0,1,1),W.DEFAULT_VERTEX_COLORS=new Float32Array([].concat(W.DEFAULT_VERTEX_COLOR.toArray(),W.DEFAULT_VERTEX_COLOR.toArray(),W.DEFAULT_VERTEX_COLOR.toArray(),W.DEFAULT_VERTEX_COLOR.toArray())),W.DEFAULT_VERTEX_COLORS2=[].concat(W.DEFAULT_VERTEX_COLOR.toArray(),W.DEFAULT_VERTEX_COLOR.toArray(),W.DEFAULT_VERTEX_COLOR.toArray(),W.DEFAULT_VERTEX_COLOR.toArray()),W.DEFAULT_VERTEX_TEXTURE_COORDINATES=new Float32Array([1,0,1,1,0,0,0,1]),W.DEFAULT_VERTEX_TEXTURE_COORDINATES2=[1,0,1,1,0,0,0,1],W.DEFAULT_INDICES=new Uint16Array([0,1,2,2,1,3]),W.createVertexPositions=function(e,t){var r=.5*t.width,n=.5*t.height;return new Float32Array([e.x+r,e.y-n,e.z,e.x+r,e.y+n,e.z,e.x-r,e.y-n,e.z,e.x-r,e.y+n,e.z])},W.createVertexColors=function(e){return new Float32Array([e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a])},W.createVertexTextureCoordinates=function(e){return new Float32Array([e.right,e.bottom,e.right,e.top,e.left,e.bottom,e.left,e.top])},Object.freeze(W),Y.VERTEX_COUNT=4,Y.POSITION_SIZE=3,Y.COLOR_SIZE=4,Y.TEXTURE_COORDINATE_SIZE=2,Y.INDEX_COUNT=6,Y.DEFAULT_CREATION_OPTIONS=G.VERTEX_POSITIONS,Y.DEFAULT_VERTEX_COLOR=p.WHITE,Y.DEFAULT_SOURCE_TEXTURE_COORDINATE_RECT=new D(0,0,1,1),Y.DEFAULT_VERTEX_COLORS=new Float32Array([].concat(Y.DEFAULT_VERTEX_COLOR.toArray(),Y.DEFAULT_VERTEX_COLOR.toArray(),Y.DEFAULT_VERTEX_COLOR.toArray(),Y.DEFAULT_VERTEX_COLOR.toArray())),Y.DEFAULT_VERTEX_COLORS2=[].concat(Y.DEFAULT_VERTEX_COLOR.toArray(),Y.DEFAULT_VERTEX_COLOR.toArray(),Y.DEFAULT_VERTEX_COLOR.toArray(),Y.DEFAULT_VERTEX_COLOR.toArray()),Y.DEFAULT_VERTEX_TEXTURE_COORDINATES=new Float32Array([1,0,1,1,0,0,0,1]),Y.DEFAULT_VERTEX_TEXTURE_COORDINATES2=[1,0,1,1,0,0,0,1],Y.DEFAULT_INDICES=new Uint16Array([0,1,2,2,1,3]),Y.createVertexPositions=function(e,t){var r=.5*t.width,n=.5*t.height;return new Float32Array([e.x+r,e.y-n,e.z,e.x+r,e.y+n,e.z,e.x-r,e.y-n,e.z,e.x-r,e.y+n,e.z])},Y.createVertexPositions2=function(e,t){var r=.5*t.width,n=.5*t.height;return[e.x+r,e.y-n,e.z,e.x+r,e.y+n,e.z,e.x-r,e.y-n,e.z,e.x-r,e.y+n,e.z]},Y.createVertexColors=function(e){return new Float32Array([e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a])},Y.createVertexColors2=function(e){return[e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a,e.r,e.g,e.b,e.a]},Y.createVertexTextureCoordinates=function(e){return new Float32Array([e.right,e.bottom,e.right,e.top,e.left,e.bottom,e.left,e.top])},Y.createVertexTextureCoordinates2=function(e){return[e.right,e.bottom,e.right,e.top,e.left,e.bottom,e.left,e.top]},Object.freeze(Y),Z.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","attribute vec4 vertexColor;","attribute vec2 vertexTextureCoordinates;","varying vec4 color;","varying vec2 textureCoordinates;","uniform vec2 canvasClientSize;","void main() {","gl_Position = vec4 (","-1.0 + 2.0 * (vertexPosition.x / canvasClientSize.x),","-1.0 + 2.0 * (vertexPosition.y / canvasClientSize.y),","vertexPosition.z,","1.0",");","color = vertexColor;","textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),Z.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 color;","varying vec2 textureCoordinates;","uniform sampler2D sampler;","void main() {","gl_FragColor = color * texture2D(sampler, textureCoordinates);","}"].join("\n"),Z.DEFAULT_OF_IF_CLEARS_DB_AFTER_DRAWING=!0,Z.DEFAULT_OF_IF_DB_FREQUENTLY_CHANGED=!0,Object.freeze(Z),q.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec3 vertexPosition;","attribute vec4 vertexColor;","attribute vec2 vertexTextureCoordinates;","varying vec4 color;","varying vec2 textureCoordinates;","uniform vec2 canvasClientSize;","void main() {","gl_Position = vec4 (","-1.0 + 2.0 * (vertexPosition.x / canvasClientSize.x),","-1.0 + 2.0 * (vertexPosition.y / canvasClientSize.y),","vertexPosition.z,","1.0",");","color = vertexColor;","textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),q.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 color;","varying vec2 textureCoordinates;","uniform sampler2D sampler;","void main() {","gl_FragColor = color * texture2D(sampler, textureCoordinates);","}"].join("\n"),q.DEFAULT_OF_IF_CLEARS_DB_AFTER_DRAWING=!0,q.DEFAULT_OF_IF_DB_FREQUENTLY_CHANGED=!0,Object.freeze(q),K.toUV=function(e,t){return{u:e,v:1-t}},K.toST=function(e,t){return{s:e,t:1-t}},Object.freeze(K),k.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec4 vertexPosition;","attribute vec4 vertexColor;","varying vec4 color;","void main() {","gl_Position = vertexPosition;","color = vertexColor;","}"].join("\n"),k.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 color;","void main() {","gl_FragColor = color;","}"].join("\n"),Object.freeze(k),Q.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec4 vertexPosition;","attribute vec4 vertexColor;","attribute vec2 vertexTextureCoordinates;","varying vec4 color;","varying vec2 textureCoordinates;","void main() {","gl_Position = vertexPosition;","color = vertexColor;","textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),Q.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec4 color;","varying vec2 textureCoordinates;","uniform sampler2D sampler;","void main() {","gl_FragColor = color * texture2D(sampler, textureCoordinates);","}"].join("\n"),Object.freeze(Q),J.VERTEX_SHADER_SOURCE=["precision highp float;","attribute vec4 vertexPosition;","attribute vec2 vertexTextureCoordinates;","varying vec2 textureCoordinates;","void main() {","gl_Position = vertexPosition;","textureCoordinates = vertexTextureCoordinates;","}"].join("\n"),J.FRAGMENT_SHADER_SOURCE=["precision mediump float;","varying vec2 textureCoordinates;","uniform sampler2D sampler;","void main() {","gl_FragColor = texture2D(sampler, textureCoordinates);","}"].join("\n"),Object.freeze(J),$.contains=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1},$.remove=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return e.splice(r,1),!0;return!1},Object.freeze($),ee.isIndexValid=function(e,t){return 0>t||t>e-1?!1:!0},Object.freeze(ee),te.BACKGROUND=0,te.RESERVED_ITEMS_BETWEEN_BACKGROUND_AND_FARTHEST_LINE_SEGMENTS=1,te.LINE_SEGMENTS_BELOW_FAR_IMAGES=2,te.FAR_IMAGES=3,te.LINE_SEGMENTS_BELOW_MIDDLE_IMAGES=4,te.MIDDLE_IMAGES=5,te.LINE_SEGMENTS_ABOVE_MIDDLE_IMAGES=6,te.NEAR_IMAGES=7,te.LINE_SEGMENTS_ABOVE_NEAR_IMAGES=8,te.RESERVED_ITEMS_BETWEEN_NEAREST_LINE_SEGMENTS_AND_TEXT=9,te.TEXT=10,te.RESERVED_ITEMS_BETWEEN_TEXT_AND_UI=11,te.UI=12,te.NEAREST_RESERVED_ITEMS=13,te.FARTHEST_ITEMS=te.BACKGROUND,te.NEAREST_ITEMS=te.NEAREST_RESERVED_ITEMS,Object.freeze(te),re.prototype={update:function(){}},Object.freeze(re),l.inherit(ne,re),Object.freeze(ne),l.inherit(ie,re),ie.prototype.update=function(){var e=this.sineEase.isFinished,t=this.sineEase.ratioOfCurrentToTotalSineOfAngleOffset;void 0!==this.updateCallback&&this.updatingCallback(_sineEase.ratioOfCurrentToTotalTimeOffset);var r=e===!1?H.addSizes(this.oldSize,H.multiplySizeByScalar(H.subtractSizes(this.newSize,this.oldSize),t)):this.newSize,n=this.world.centerPosition,i=this.world.convertPositionFromScreenToWorldSpace(this.screenPosition);this.world.setBounds(n,r);var a=o.subtractVectors(this.world.convertPositionFromScreenToWorldSpace(this.screenPosition),i);n=o.subtractVectors(n,a),this.world.setBounds(n,r),e===!0&&(void 0!==this.finishingCallback&&this.finishingCallback(),this.world.state=new ne(this.world))},Object.freeze(ie),Object.freeze(oe),ae.DEFAULT_LINE_SEGMENT_LAYER_INDEX=te.LINE_SEGMENTS_BELOW_FAR_IMAGES,ae.DEFAULT_IMAGE_LAYER_INDEX=te.MIDDLE_IMAGES,Object.freeze(ae),ce.prototype={update:function(){},draw:function(){},invalidateBounds:function(){this.hasToCheckBounds=!0},checkIfOutOfBounds:function(){}},Object.freeze(ce),l.inherit(ue,ce),Object.freeze(ue),l.inherit(se,ce),se.prototype.update=function(){this.isEnabled!==!1&&(this.centerScreenPosition=this.world.convertPositionFromWorldToScreenSpace(this.centerPosition),this.screenSize=H.multiplySizeByScalar(this.size,this.world.worldToScreenScaleFactor),this.boundScreenSize())},se.prototype.draw=function(){var e=this.world;e.drawsItem(this)!==!1&&(null===e.lastDrawnItem?this.beginSpriteBatch():e.lastDrawnItem instanceof ue==!0?(e.lineSegmentBatch.isBegun===!0&&e.endLineSegmentBatch(),this.beginSpriteBatch()):e.lastDrawnItem instanceof se==!0&&e.spriteBatch.isBegun===!1&&(console.log("An invalid-operation exception raised."),this.beginSpriteBatch()),e.spriteBatch.drawSprite(this.texture,void 0,new c(this.centerScreenPosition.x,this.centerScreenPosition.y,W.DEFAULT_SCREEN_POSITION_DEPTH),this.screenSize,W.DEFAULT_VERTEX_COLOR,this.sourceTextureCoordinateRect),e.lastDrawnItem=this,e.drawnImageCount++)},se.prototype.boundScreenSize=function(){if(this.boundsScreenSize!==!1){if(this.maxScreenSize.width<this.minScreenSize.width||this.maxScreenSize.height<this.minScreenSize.height)throw new InvalidOperationException;this.screenSize.width<this.minScreenSize.width&&(this.screenSize.width=this.minScreenSize.width),this.screenSize.height<this.minScreenSize.height&&(this.screenSize.height=this.minScreenSize.height),this.maxScreenSize.width<this.screenSize.width&&(this.screenSize.width=this.maxScreenSize.width),this.maxScreenSize.height<this.screenSize.height&&(this.screenSize.height=this.maxScreenSize.height)}},se.prototype.checkIfOutOfBounds=function(){var e=this.world,t=e.centerPosition,r=e.size;.5*this.size.width+.5*r.width<Math.abs(this.centerPosition.x-t.x)||.5*this.size.height+.5*r.height<Math.abs(this.centerPosition.y-t.y)?this.isOutOfBounds=!0:this.isOutOfBounds=!1},se.prototype.beginSpriteBatch=function(){this.world.spriteBatch.begin()},se.DEFAULT_SOURCE_TEXTURE_COORDINATE_RECT=W.DEFAULT_SOURCE_TEXTURE_COORDINATE_RECT,Object.freeze(se),fe.displayMessageOf=function(e){alert(e)},Object.freeze(fe),Ee.FRAME_COUNT_TO_AVERAGE=16,Object.freeze(Ee),le.LEFT=0,le.MIDDLE=1,le.RIGHT=2,Object.freeze(le),Object.freeze(Oe),e.Camera=f,e.CameraState=E,e.CameraStateStill=O,e.CameraStateZooming=T,e.SmoothCamera=A,e.CanvasCoordinateHelper=S,e.ClearOptions=R,e.Color=g,e.Colors=p,e.DepthBufferValues=y,e.IndexBuffer=P,e.NormalizedDeviceCoordinates=b,e.PositionColor=x,e.PositionOnly=w,e.PositionTextureCoordinates=C,e.PrimitiveType=v,e.Program=L,e.Rect=D,e.Renderer=X,e.RendererSettings=j,e.ScreenCoordinateHelper=M,e.ShaderType=N,e.Size2D=H,e.Size3D=B,e.Sprite=W,e.Sprite2=Y,e.SpriteBatch=Z,e.SpriteBatch2=q,e.SpriteCreationOptions=G,e.Texture2D=F,e.TextureCoordinateHelper=K,e.TransformedPositionColor=k,e.TransformedPositionColorTextureCoordinates=Q,e.TransformedPositionTextureCoordinates=J,e.VertexBuffer=m,e.World2D=ae,e.World2DImage=se,e.World2DItem=ce,e.World2DLineSegment=ue,e.World2DLayerName=te,e.World2DState=re,e.World2DStateNormal=ne,e.World2DStateZoomingAtScreenPosition=ie,e.World2DStyle=oe,e.ArrayHelper=$,e.ExceptionHelper=fe,e.Fps=Ee,e.IndexHelper=ee,e.JSHelper=l,e.MouseButton=le,e.BufferLoader=I,e.Loader=V,e.ProgramLoader=U,e.TextureLoader=z,e.AxisGroup=u,e.MathHelper=t,e.Vector2D=o,e.Vector3D=c,e.Vector4D=a,e.Matrix4x4=n,e.CartesianAxis=r,e.Plane=Oe,e.Quaternion=i,e.ViewFrustum=s,e.EaseMode=_,e.SineEase=h,e.Stopwatch=d}(this.GorillaGL=this.GorillaGL||{});
